"use strict";(self.webpackChunkvanillaforum=self.webpackChunkvanillaforum||[]).push([[858],{75799(e,t,r){r.d(t,{F:()=>b});var n=r(67294),s=r(23410),a=r(59736),i=r(83386),o=r(75994),l=r(10141),u=r(11590);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let p=()=>{let e=(0,o.OF)(),t=(0,u.iv)(d(m(d(m({},i.W.font(m({},e.fontSizeAndWeightVars("medium")))),{zIndex:1}),i.W.padding({horizontal:e.gutter.size,vertical:e.gutter.size}),i.W.border(),(0,l.kL)().dropDown()),{background:s.w.colorOut(e.mainColors.bg),width:280,maxHeight:120,overflowX:"hidden",overflowY:"auto","&:not(last-of-type)":{marginTop:(0,a.dd)(e.gutter.size)},p:{margin:0}}),";label:Toast-styles-root;"),r=(0,u.iv)({name:"goseef-Toast-styles-closeButton",styles:"position:absolute;top:16px;right:0;label:Toast-styles-closeButton;"});return{root:t,closeButton:r}};var f=r(34098),v=r(76048),g=r(29368);function b(e){let{children:t,role:r,className:s,visibility:a,autoCloseDuration:i,onVisibilityChange:o,dismissible:l}=e,u=p(),[c,m]=(0,n.useState)(null==a||a);return(0,n.useEffect)(()=>{i&&c&&setTimeout(()=>m(!1),i)},[c,i]),(0,n.useEffect)(()=>{o&&o(c)},[c,o]),(0,n.useEffect)(()=>{m(!!a)},[a]),n.createElement(v.k,{isEntered:c,fromDirection:v.a.LEFT},n.createElement("div",{className:(0,f.cx)(u.root,s),role:null!=r?r:"status","aria-live":"assertive","aria-atomic":!0},l&&n.createElement(g.Z,{className:u.closeButton,onClick:()=>m(!1),compact:!0}),t))}},33691(e,t,r){r.d(t,{VW:()=>g,pm:()=>v});var n=r(75799),s=r(11590),a=r(75994),i=r(83386);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let l=()=>{var e,t;let r=(0,a.OF)(),n=(0,s.iv)((e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}({display:"flex",flexDirection:"column-reverse",position:"fixed",top:0,left:0,height:"100vh",width:"auto",pointerEvents:"none"},i.W.padding({all:r.gutter.size})),t=(t={"& > *":{pointerEvents:"auto"}},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e),";label:ToastContext-styles-area;");return{area:n}};var u=r(22021),c=r(67294);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let f=c.createContext({toasts:null,addToast:()=>"",updateToast(){},removeToast(){}});function v(){return(0,c.useContext)(f)}function g(e){let{children:t}=e,[r,n]=(0,c.useState)(null),s=e=>{let t=(0,u.k$)(),r=p(d({},e),{toastID:t,visibility:!0});return n(e=>e?[...e,r]:[r]),t};window.__LEGACY_ADD_TOAST__=s;let a=(e,t)=>{r&&t&&n(r=>r?r.map(r=>r.toastID===e?p(d({},r,t),{toastID:r.toastID}):r):r)},i=e=>{r&&(n(t=>t?t.map((t,n)=>t.toastID===e?p(d({},r[n]),{visibility:!1}):t):t),setTimeout(()=>{n(t=>t?t.filter(t=>t.toastID!==e):t)},2e3))};return c.createElement(f.Provider,{value:{toasts:r,addToast:s,updateToast:a,removeToast:i}},c.createElement(b,null),t)}function b(){let e=l(),{toasts:t}=(0,c.useContext)(f);return c.createElement(c.Fragment,null,t&&t.length>0&&c.createElement("section",{className:e.area},c.createElement(c.Fragment,null,t.filter(e=>e.persistent).map(e=>{var t;return c.createElement(n.F,{key:e.toastID,visibility:null===(t=e.visibility)||void 0===t||t,autoCloseDuration:e.autoDismiss?3e3:void 0,dismissible:e.dismissible,className:e.className},e.body)}),t.filter(e=>!e.persistent).map(e=>{var t;return c.createElement(n.F,{key:e.toastID,visibility:null===(t=e.visibility)||void 0===t||t,autoCloseDuration:e.autoDismiss?3e3:void 0,dismissible:e.dismissible,className:e.className},e.body)}))))}},31600(e,t,r){r.d(t,{N:()=>C});var n=r(67294),s=r(33188),a=r(57298),i=r(24027),o=r(38918),l=r(47178),u=r(81478),c=r(52303),m=r(30731),d=r(10914),p=r(11590),f=r(34937),v=r(75994),g=r(83386),b=r(97923),y=r(59736);function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){O(e,t,r[t])})}return e}let h=()=>{var e,t;let r=(0,v.OF)(),n=(0,p.iv)((e=E({minHeight:(0,f._)().sizing.minHeight},(0,b.Mh)().middleLeft()),t=(t={"& button":E({margin:(0,y.dd)("3px")},g.W.font(E({},r.fontSizeAndWeightVars("medium"))))},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e),";label:ThemePreviewToast-style-toastActions;");return{toastActions:n}};var P=r(33691);function I(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){I(a,n,s,i,o,"next",e)}function o(e){I(a,n,s,i,o,"throw",e)}i(void 0)})}}function C(){var e,t,r;let{applyStatus:p,cancelStatus:f}=(0,o.n)(),[v,g]=(0,n.useState)((0,a.xZ)("themePreview",null)),{putCurrentTheme:b,putPreviewTheme:y,patchThemeWithRevisionID:O}=(0,i.ib)(),[E,I]=(0,n.useState)(!1),[C,D]=(0,n.useState)(!1),w=null!==(e=null==v?void 0:v.revisionID)&&void 0!==e&&e,A=h(),{addToast:j,updateToast:N}=(0,P.pm)(),R=(t=S(function*(){if(v){if(w){I(!0);let e=yield O({themeID:v.themeID,revisionID:v.revisionID});e&&(I(!1),D(!0)),y({themeID:"",revisionID:void 0,type:i.N5.APPLY})}else b(v.themeID),y({themeID:"",type:i.N5.APPLY})}}),function(){return t.apply(this,arguments)}),x=(r=S(function*(){y({themeID:"",type:i.N5.CANCEL})}),function(){return r.apply(this,arguments)}),U=(0,n.useMemo)(()=>f.status===l.Px.LOADING||f.status===l.Px.SUCCESS,[f]),L=(0,n.useMemo)(()=>p.status===l.Px.LOADING||p.status===l.Px.SUCCESS||E,[p,E]),T=(0,n.useMemo)(()=>w?(0,c.t)("Restore"):(0,c.t)("Apply"),[w]);(0,n.useEffect)(()=>{v&&(v.name&&p.status===l.Px.SUCCESS||f.status===l.Px.SUCCESS||C)&&(window.location.href=w?`/appearance/style-guides/${v.themeID}/revisions`:v.redirect)});let[_,Z]=(0,n.useState)(),k=(0,n.useMemo)(()=>v?n.createElement(n.Fragment,null,"You are previewing the ",n.createElement("b",null,v&&v.name)," theme.",p.error&&n.createElement(u.Z,{errors:[p.error]}),n.createElement("div",{className:A.toastActions},n.createElement(m.Z,{onClick:R,buttonType:s.q.TEXT},L?n.createElement(d.Z,{buttonType:s.q.TEXT}):n.createElement(n.Fragment,null,T)),n.createElement(m.Z,{onClick:x,buttonType:s.q.TEXT_PRIMARY},U?n.createElement(d.Z,{buttonType:s.q.TEXT_PRIMARY}):(0,c.t)("Cancel")))):null,[T,p.error,L,U,v]);return(0,n.useEffect)(()=>{if(k&&!_){let e=j({persistent:!0,body:k});Z(e)}k&&_&&N(_,{body:k})},[k]),null}},38918(e,t,r){r.d(t,{Z:()=>u,n:()=>c});var n=r(47178),s=r(87219),a=r(76983),i=r(24027),o=r(46458);let l={applyStatus:{status:n.Px.PENDING},cancelStatus:{status:n.Px.PENDING}},u=(0,s.Uy)((0,a.reducerWithInitialState)(l).case(i.ZP.putCurrentThemeACs.started,(e,t)=>(e.applyStatus.status=n.Px.LOADING,e.applyStatus.data={themeID:t.themeID},e)).case(i.ZP.putCurrentThemeACs.done,(e,t)=>(e.applyStatus.status=n.Px.SUCCESS,e.applyStatus.error=void 0,e)).case(i.ZP.putCurrentThemeACs.failed,(e,t)=>(e.applyStatus.status=n.Px.ERROR,e.applyStatus.error=t.error,e)).case(i.ZP.putPreviewThemeACs.started,(e,t)=>(t.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.LOADING),e.cancelStatus.data={themeID:t.themeID},e)).case(i.ZP.putPreviewThemeACs.done,(e,t)=>(t.params.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.SUCCESS),e.cancelStatus.error=void 0,e)).case(i.ZP.putPreviewThemeACs.failed,(e,t)=>(e.cancelStatus.status=n.Px.ERROR,e.cancelStatus.error=t.error,e)));function c(){return(0,o.v9)(e=>e.themePreviewToaster)}},23908(e,t,r){r.d(t,{Q:()=>u});var n=r(43210),s=r(25162),a=r(92633),i=r(22021),o=r(67294);function l(e){let{Tag:t,tagProps:r,domNodesToAttach:n}=e,i=(0,s.Hx)();return(0,a.Ky)(n,i.triggerRef),o.createElement(t,Object.assign({},r,i.props,{ref:i.triggerRef}),i.contents)}function u(e=document){if(void 0===e||!(0,n.Z)())return;let t=e.querySelectorAll(".js-userCard:not(.js-userCardInitialized)"),r=Array.from(t).map(e=>{var t;let r=e.dataset.userid;if(!r)return(0,i.H)("No userID for found for js-userCard: ",e),null;let n=Number.parseInt(r);if(Number.isNaN(n))return(0,i.H)(`Invalid userID \`${r}\` found for js-userCard: `,e),null;let u=(0,a.bG)(e),c=e.tagName.toLowerCase();return u.className=null!==(t=u.className)&&void 0!==t?t:"",u.className+=" js-userCardInitialized",{component:o.createElement(s.TR,{userID:n},o.createElement(l,{Tag:c,tagProps:u,domNodesToAttach:Array.from(e.childNodes)})),target:e}}).filter(i.Dw);(0,a.Fr)(r,void 0,{overwrite:!0})}},25162(e,t,r){r.d(t,{TR:()=>ei,HW:()=>el,Hx:()=>eo});var n=r(11590),s=r(47178),a=r(43210),i=r(4483),o=r(92234),l=r(72588),u=r(62425),c=r(21965),m=r(67294);let d=m.createContext({isOpen:!1,setIsOpen(){},triggerRef:{current:null},contentRef:{current:null},contents:null,contentID:"",triggerID:""});function p(){return(0,m.useContext)(d)}var f=r(44765),v=r(92111),g=r(94982),b=r(75994),y=r(83386),O=r(52239),E=r(59736),h=r(28236),P=r(23410),I=r(75864),S=r(85938);function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){C(e,t,r[t])})}return e}let w=(0,h.yI)(e=>{var t,r;let n=(0,I.Cg)("userCard",e),s=(0,b.OF)(),a=n("container",{spacing:s.gutter.size}),i=n("button",{minWidth:120,mobile:{minWidth:0}}),o=n("name",{font:S.L.font(D({},s.fontSizeAndWeightVars("large","bold"))),margin:S.L.spacing({top:9})}),l=n("label",{border:S.L.border({color:s.mainColors.primary,radius:3}),padding:S.L.spacing({horizontal:10}),margin:S.L.spacing({top:12}),font:S.L.font({color:s.mainColors.primary,size:10,lineHeight:1.5,transform:"uppercase"})}),u=n("containerWithBorder",{color:P.w.colorOut(s.border.color)}),c=n("message",{font:S.L.font({size:s.fonts.size.small}),margin:S.L.spacing({top:12})}),m=n("headerLink",{color:P.w.colorOut(s.mainColors.fg),font:S.L.font((t=D({},s.fontSizeAndWeightVars("small")),r=(r={align:"center"},r),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),margin:S.L.spacing({top:8}),minHeight:(0,E.dd)(24)});return{container:a,button:i,name:o,label:l,containerWithBorder:u,message:c,headerLink:m}});var A=r(85819);function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){j(e,t,r[t])})}return e}function R(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let x=(0,h.yI)((e={})=>{var t;let r=w(),s=(0,g.J)().mediaQueries(),a=(0,b.OF)();(0,n.hi)({"[data-reach-popover]":{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:1050}},";label:UserCard-styles-userCardClasses;");let i=(0,n.iv)(R(N({display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"center"},y.W.padding({all:r.container.spacing})),{flexWrap:"wrap"}),";label:UserCard-styles-container;"),o=(0,n.cx)(i,(0,n.iv)({borderTop:`1px solid ${r.containerWithBorder.color}`},";label:UserCard-styles-containerWithBorder;")),l=(0,n.iv)({name:"14zkbwb-UserCard-styles-row",styles:"display:flex;width:100%;justify-content:center;label:UserCard-styles-row;"}),u=(0,n.iv)(N({maxWidth:(0,A.aQ)(100)},{"&&":{minWidth:(0,E.dd)(r.button.minWidth)}},s.oneColumnDown(N({},{"&&":{width:(0,A.aQ)(100),minWidth:(0,E.dd)(r.button.mobile.minWidth)}}))),";label:UserCard-styles-button;"),c=(0,n.iv)(R(N({},y.W.padding({horizontal:r.container.spacing/2})),{flexWrap:"wrap"}),";label:UserCard-styles-buttonsContainer;"),m=(0,n.iv)(N({maxWidth:(0,A.aQ)(100)},y.W.padding({top:0,bottom:r.container.spacing,horizontal:r.container.spacing/2}),s.oneColumnDown({"&&":{flexGrow:1,flexBasis:(0,A.aQ)(50)}})),";label:UserCard-styles-buttonContainer;"),d=(0,n.iv)(R(N({},y.W.margin(r.name.margin),y.W.font(r.name.font)),{width:(0,A.aQ)(100),textAlign:"center"}),s.oneColumnDown({fontSize:1.25*r.name.font.size}),";label:UserCard-styles-name;"),p=(0,n.iv)(N({},y.W.padding(r.label.padding),y.W.font(r.label.font),y.W.border(r.label.border),y.W.margin(r.label.margin)),";label:UserCard-styles-label;"),f=(0,n.iv)(N({borderRight:(0,O.$N)({})},y.W.padding({right:a.spacer.size/2,left:a.spacer.size})),";label:UserCard-styles-statLeft;"),h=(0,n.iv)(N({},y.W.padding({right:a.spacer.size,left:a.spacer.size/2})),";label:UserCard-styles-statRight;"),P=(0,n.iv)({name:"bezbfl-UserCard-styles-header",styles:"position:relative;label:UserCard-styles-header;"}),I=y.W.clickable.itemState({default:r.headerLink.color}),S=(0,n.iv)(R(N({},I),{"&&":N({minHeight:r.headerLink.minHeight,display:"inline-flex",alignItems:"center"},y.W.font(r.headerLink.font),y.W.margin(r.headerLink.margin))}),";label:UserCard-styles-headerLink;"),C=(0,n.iv)({name:"m7jc2-UserCard-styles-metas",styles:"&&{text-align:center;};label:UserCard-styles-metas;"}),D=(0,n.iv)(N({},y.W.margin({vertical:0})),";label:UserCard-styles-metaItem;"),j=(0,v.Gv)(),x=(0,n.iv)(N({},{"&&&":N(R(N({},y.W.absolute.topRight()),{width:(0,E.dd)(j.sizing.height),height:(0,E.dd)(j.sizing.height)}),s.oneColumnDown({height:(0,E.dd)(j.sizing.height)}))}),";label:UserCard-styles-close;"),U=(0,n.iv)(R(N({},y.W.margin({top:r.container.spacing})),{display:"block"}),";label:UserCard-styles-userPhoto;"),L=(0,n.iv)(N({},y.W.font(r.message.font),y.W.margin(r.message.margin)),";label:UserCard-styles-message;");return{container:i,containerWithBorder:o,buttonsContainer:c,button:u,buttonContainer:m,name:d,label:p,header:P,headerLink:S,statLeft:f,statRight:h,close:x,userPhoto:U,row:l,metas:C,metaItem:D,message:L}});var U=r(30731),L=r(33188),T=r(28590),_=r(81612),Z=r(24821),k=r(35524),B=r(70563),G=r(92097),F=r(88791),z=r(57298),W=r(52808),M=r(21663),V=r(92633);let $="This user has been banned.",H="Banned";function X(e){var t,r;let{zIndex:s}=(0,V.DE)(),a=x({zIndex:s}),{user:o}=e,u=(0,l.Fy)(),c=u===l.uv.MOBILE||u===l.uv.XS,d=c?T.pz.XLARGE:T.pz.LARGE,p=(0,z.xZ)("context.conversationsEnabled",!1),v=(0,i.Fk)(),g=o.userID===v,b=null!==(t=null==o?void 0:o.private)&&void 0!==t&&t,y=(0,f.Fs)("personalInfo.view"),O=null!==(r=null==o?void 0:o.banned)&&void 0!==r?r:0,E=1===O,h=(0,z.xZ)("ui.bannedPrivateProfile","0");h=""===h?"0":"1";let P="0"!==h,I=(0,m.useMemo)(()=>{let{label:e,title:t}=o;return E?m.createElement("div",{className:a.label},(0,z.t)(H)):t?m.createElement("div",{className:a.label},t):!t&&e?m.createElement("div",{className:a.label,dangerouslySetInnerHTML:{__html:e}}):null},[E,o]);return(b||E&&P)&&!y&&!g?m.createElement(Q,{user:o,onClose:e.onClose}):m.createElement(m.Fragment,null,m.createElement("div",{className:a.header},c&&m.createElement(U.Z,{className:a.close,onClick:e.onClose,buttonType:L.q.ICON},m.createElement(m.Fragment,null,m.createElement(_.e9,null),m.createElement(Z.Z,null,(0,z.t)("Close"))))),m.createElement(ee,null,m.createElement("div",{className:a.row},m.createElement(T.cy,{userInfo:o,size:d,className:a.userPhoto})),m.createElement("div",{className:a.row},m.createElement("div",{className:a.name},o.name)),I&&m.createElement("div",{className:a.row},I),o.email&&m.createElement(f.ZP,{permission:"personalInfo.view"},m.createElement("div",{className:a.row},m.createElement("a",{className:a.headerLink,href:`mailto:${o.email}`},o.email))),X.extraLinks.map((e,t)=>m.createElement(e.component,{key:t,userID:o.userID})),E&&m.createElement("div",{className:(0,n.cx)(a.row,a.message)},m.createElement("div",null,(0,z.t)($)))),m.createElement("div",{className:(0,n.cx)(a.row,a.buttonsContainer)},m.createElement(q,{to:(0,z.tI)(o.name)},(0,z.t)("View Profile")),m.createElement(f.ZP,{permission:"conversations.add"},p&&!O&&m.createElement(q,{to:`/messages/add/${o.name}`},(0,z.t)("Message"))),X.extraButtons.map((e,t)=>m.createElement(e.component,{key:t,userID:o.userID}))),m.createElement(ee,{borderTop:!0},m.createElement(G.k,{to:(0,z.nQ)(o.name),value:o.countDiscussions,label:(0,z.t)("Discussions"),classNames:a.statLeft}),m.createElement(G.k,{to:(0,z._F)(o.name),value:o.countComments,label:(0,z.t)("Comments"),classNames:a.statRight})),X.extraContent.map((e,t)=>m.createElement(ee,{key:t,borderTop:!0},m.createElement(e.component,{userID:o.userID}))),m.createElement(ee,{borderTop:!0},m.createElement(k.HX,{className:a.metas},m.createElement(k.y1,{className:a.metaItem},(0,z.t)("Joined"),": ",m.createElement(M.Z,{timestamp:o.dateInserted})),o.dateLastActive&&m.createElement(k.y1,{className:a.metaItem},(0,z.t)("Last Active"),": ",m.createElement(M.Z,{timestamp:o.dateLastActive})))))}function K(e){var t;let{userFragment:r}=e,s=(0,l.Fy)(),a=s===l.uv.MOBILE||s===l.uv.XS,i=a?T.pz.XLARGE:T.pz.LARGE,o=(0,z.xZ)("context.conversationsEnabled",!1),u=x();return m.createElement(m.Fragment,null,m.createElement("div",{className:u.header},a&&m.createElement(U.Z,{className:u.close,onClick:e.onClose,buttonType:L.q.ICON},m.createElement(m.Fragment,null,m.createElement(_.e9,null),m.createElement(Z.Z,null,(0,z.t)("Close"))))),m.createElement(ee,null,m.createElement("div",{className:u.row},(null==r?void 0:r.photoUrl)?m.createElement(T.cy,{userInfo:r,size:i,className:u.userPhoto}):m.createElement(T.fP,{size:i,className:u.userPhoto})),m.createElement("div",{className:u.row},m.createElement("div",{className:u.name},null!==(t=null==r?void 0:r.name)&&void 0!==t?t:m.createElement(W.ZM,{inline:!0,height:12,width:60}))),m.createElement(f.ZP,{permission:"personalInfo.view",mode:f.R9.GLOBAL},m.createElement("div",{className:u.row},m.createElement("span",{className:u.headerLink},m.createElement(W.ZM,{inline:!0,height:12,width:120})))),!!(null==r?void 0:r.userID)&&X.extraLinks.map((e,t)=>m.createElement(m.Fragment,{key:t},e.skeleton?m.createElement(e.skeleton,{userID:r.userID}):m.createElement(W.ZM,{inline:!0,height:12,width:120})))),m.createElement("div",{className:(0,n.cx)(u.row,u.buttonsContainer)},m.createElement(q,{disabled:!(null==r?void 0:r.name),to:(null==r?void 0:r.name)?(0,z.tI)(null==r?void 0:r.name):""},(0,z.t)("View Profile")),m.createElement(f.ZP,{permission:"conversations.add"},o&&m.createElement(q,{disabled:!(null==r?void 0:r.name),to:`/messages/add/${null==r?void 0:r.name}`},(0,z.t)("Message"))),!!(null==r?void 0:r.userID)&&X.extraButtons.map((e,t)=>m.createElement(m.Fragment,null,e.skeleton?m.createElement(e.skeleton,{key:t,userID:r.userID}):m.createElement(W.ZM,{inline:!0,height:"2em",width:120})))),m.createElement(ee,{borderTop:!0},m.createElement(Y,{text:(0,z.t)("Discussions"),position:"left"}),m.createElement(Y,{text:(0,z.t)("Comments"),position:"right"})),!!(null==r?void 0:r.userID)&&X.extraContent.map((e,t)=>m.createElement(ee,{key:t,borderTop:!0},e.skeleton?m.createElement(e.skeleton,{userID:r.userID}):m.createElement(W.ZM,{inline:!0,height:"2em",width:120}))),m.createElement(ee,{borderTop:!0},m.createElement(k.HX,{className:u.metas},m.createElement(k.y1,{className:u.metaItem},(0,z.t)("Joined"),": ",m.createElement(W.ZM,{inline:!0,height:8,width:60})),m.createElement(k.y1,{className:u.metaItem},(0,z.t)("Last Active"),": ",m.createElement(W.ZM,{inline:!0,height:8,width:60})))))}function Q(e){var t,r,s;let{user:a,userFragment:i}=e,o=x(),u=(0,l.Fy)(),c=u===l.uv.MOBILE||u===l.uv.XS,d=c?T.pz.XLARGE:T.pz.LARGE,p=1===(null!==(r=null!==(t=null==a?void 0:a.banned)&&void 0!==t?t:null==i?void 0:i.banned)&&void 0!==r?r:0),f=p?(0,z.t)(H):(0,z.t)("Private"),v=p?(0,z.t)($):(0,z.t)("This user's profile is private."),g=null!==(s=null==a?void 0:a.name)&&void 0!==s?s:null==i?void 0:i.name;return m.createElement(m.Fragment,null,m.createElement("div",{className:o.header}),m.createElement(ee,null,m.createElement("div",{className:o.row},m.createElement(T.cy,{userInfo:null!=a?a:i,size:d,className:o.userPhoto})),m.createElement("div",{className:o.row},m.createElement("div",{className:o.name},g)),m.createElement("div",{className:o.row},m.createElement("div",{className:o.label},f)),m.createElement("div",{className:(0,n.cx)(o.row,o.message)},m.createElement("div",null,v))))}function J(e){let t=x(),r=(0,l.Fy)(),s=r===l.uv.MOBILE||r===l.uv.XS,a=s?T.pz.XLARGE:T.pz.LARGE,i={photoUrl:(0,z.CN)("/applications/dashboard/design/images/banned.png",!0)},o=e.error?e.error:"This user has been deleted.",u=e.error?(0,z.t)("ERROR"):(0,z.t)("DELETED");return m.createElement(m.Fragment,null,m.createElement("div",{className:t.header}),m.createElement(ee,null,m.createElement("div",{className:t.row},m.createElement(T.cy,{userInfo:i,size:a,className:t.userPhoto})),m.createElement("div",{className:t.row},m.createElement("div",{className:t.label},u)),m.createElement("div",{className:(0,n.cx)(t.row,t.message)},m.createElement("div",null,o))))}function q(e){var t;let{zIndex:r}=(0,V.DE)(),n=x({zIndex:r});return m.createElement("div",{className:n.buttonContainer},m.createElement(F.Z,{disabled:e.disabled,to:null!==(t=e.to)&&void 0!==t?t:"",buttonType:L.q.STANDARD,className:n.button,target:e.target},e.children))}function Y(e){let{zIndex:t}=(0,V.DE)(),r=(0,B.u)(),s=x({zIndex:t}),{text:a,position:i}=e;return m.createElement("div",{className:(0,n.cx)(r.statItem,{[s.statLeft]:"left"===i},{[s.statRight]:"right"===i})},m.createElement("div",{className:r.statData},m.createElement(W.ZM,{height:35,width:48})),m.createElement("div",{className:r.statLabel},a))}function ee(e){let{borderTop:t}=e,{zIndex:r}=(0,V.DE)(),n=x({zIndex:r});return m.createElement("div",{className:t?n.containerWithBorder:n.container},e.children)}X.extraContent=[],X.registerContent=function(e){X.extraContent.find(t=>t.key===e.key)||X.extraContent.push(e)},X.extraButtons=[],X.registerButtons=function(e){X.extraButtons.find(t=>t.key===e.key)||X.extraButtons.push(e)},X.extraLinks=[],X.registerLinks=function(e){X.extraLinks.find(t=>t.key===e.key)||X.extraLinks.push(e)};var et=r(79089),er=r(77039),en=r(52303);function es(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ea(e){return(0,a.Z)()?e.user?m.createElement(X,{user:e.user,onClose:e.onClose}):m.createElement(ec,Object.assign({},e)):m.createElement(m.Fragment,null)}function ei(e){var t;let[r,n]=(0,m.useState)(!1),s=null!==(t=e.forceOpen)&&void 0!==t?t:r;function i(e){n(e),e&&window.closeAllFlyouts&&window.closeAllFlyouts()}let o=(0,et.hu)("popupTrigger"),p=(0,m.useRef)(null),f=(0,m.useRef)(null),v=(0,l.Fy)(),g=v===l.uv.MOBILE||v===l.uv.XS;return(0,a.Z)()?m.createElement(V.Yh,null,m.createElement(d.Provider,{value:{isOpen:s,setIsOpen:i,triggerRef:p,contentRef:f,triggerID:o,contentID:o+"-content",contents:m.createElement(m.Fragment,null,!g&&s&&m.createElement(er.ZP,{targetRef:p,position:el},m.createElement(eu,Object.assign({},e,{onClose(){i(!1)}}))),g&&m.createElement(u.Z,{isVisible:s,size:c.Z.SMALL,exitHandler(){i(!1)}},m.createElement(ea,Object.assign({},e,{onClose(){i(!1)}}))))}},e.children)):m.createElement(m.Fragment,null,e.children)}function eo(){let e=p(),t=(0,m.useCallback)((t,r)=>{var n;t||r===e.contentRef.current||(null===(n=e.contentRef.current)||void 0===n?void 0:n.contains(r))||e.setIsOpen(!1)},[e.setIsOpen,e.contentRef]);return(0,V.LJ)(e.triggerRef,t),{props:(0,a.Z)()?{"aria-controls":e.contentID,"aria-expanded":e.isOpen,"aria-haspopup":e.isOpen,role:"button",onClick(t){t.preventDefault(),e.setIsOpen(!e.isOpen)},onKeyPress(t){if((" "===t.key||"Enter"===t.key)&&(t.preventDefault(),e.setIsOpen(!e.isOpen)),"Escape"===t.key){var r;t.preventDefault(),e.setIsOpen(!1),null===(r=e.triggerRef.current)||void 0===r||r.focus()}}}:{},triggerRef:e.triggerRef,isOpen:e.isOpen,contents:e.contents}}function el(e,t){var r,n,s,a,i;let o=(0,er.MN)(e,t),l=(null!==(r=null==t?void 0:t.width)&&void 0!==r?r:0)/2,u=(null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0)/2,c=(null!==(s=null==e?void 0:e.left)&&void 0!==s?s:0)+u+window.pageXOffset-l;return c<16||c+2*l>window.innerWidth-16?o:(a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){es(e,t,r[t])})}return e}({},o),i=(i={left:c},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a)}function eu(e){let t=p(),r=(0,m.useCallback)((e,r)=>{r&&!e&&r!==t.triggerRef.current&&t.setIsOpen(!1)},[t.setIsOpen,t.triggerRef]);return(0,V.LJ)(t.contentRef,r),m.createElement("div",{ref:t.contentRef,className:(0,n.cx)((0,o.IJ)().contentsBox,"isMedium"),onKeyDown(e){if("Escape"===e.key){var r;e.preventDefault(),t.setIsOpen(!1),null===(r=t.triggerRef.current)||void 0===r||r.focus()}},onClick(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},m.createElement(ea,Object.assign({},e)))}function ec(e){var t,r;let{userFragment:n,forceSkeleton:a=!1}=e,o=(0,i.aF)({userID:e.userID}),l=(0,i.Fk)(),u=(null==n?void 0:n.userID)===l,c=(0,f.Fs)("personalInfo.view"),d=(0,z.xZ)("ui.bannedPrivateProfile","0");d=""===d?"0":"1";let p="0"!==d,v=null!==(r=null==n?void 0:n.banned)&&void 0!==r?r:0;return((null==n?void 0:n.private)||p&&1===v)&&!c&&!u?m.createElement(Q,{userFragment:n,onClose:e.onClose}):a||o.status===s.Px.PENDING||o.status===s.Px.LOADING?m.createElement(K,{userFragment:n,onClose:e.onClose}):o.error&&(null==o?void 0:null===(t=o.error)||void 0===t?void 0:t.response.status)===404?m.createElement(J,{onClose:e.onClose}):o.data&&o.status!==s.Px.ERROR?m.createElement(X,{user:o.data,onClose:e.onClose}):m.createElement(J,{error:(0,en.t)("Failed to load user"),onClose:e.onClose})}},90226(e,t,r){r.d(t,{Z:()=>p});var n=r(67294),s=r(57298),a=r(47178),i=r(74367),o=r(95774),l=r(224),u=r(46458),c=r(73819);class m extends n.Component{render(){let{suggestions:e,label:t}=this.props,r;return e.status===a.Px.SUCCESS&&e.data&&(r=e.data.map(e=>({value:e.userID,label:e.name}))),n.createElement(c.n,{label:t?(0,s.t)(t):(0,s.t)("Author"),placeholder:(0,s.t)("Select..."),options:r,isLoading:e.status===a.Px.LOADING||e.status===a.Px.PENDING,onChange:this.props.onChange,value:this.props.value,onInputChange:this.onInputChange,className:this.props.className,maxHeight:this.props.maxHeight})}constructor(...e){super(...e),this.onInputChange=e=>{(e=e.trim())&&this.props.suggestionActions.loadUsers(e)}}}let d=(0,u.$j)(o.Z.mapStateToProps,e=>({suggestionActions:new i.Z(e,l.ZP)})),p=d(m)},44765(e,t,r){r.d(t,{Fs:()=>c,R9:()=>n,ZP:()=>u});var n,s,a=r(47178),i=r(7837),o=r(67294),l=r(18626);function u(e){var t,r;if((0,l.TE)(),!e.permission)return o.createElement(o.Fragment,null,e.children);let s=c(e.permission,{mode:null!==(t=e.mode)&&void 0!==t?t:null!=e.resourceID?n.RESOURCE_IF_JUNCTION:n.GLOBAL_OR_RESOURCE,resourceType:e.resourceType,resourceID:e.resourceID})?e.children:null!==(r=e.fallback)&&void 0!==r?r:null;return o.createElement(o.Fragment,null,s)}function c(e,t){let{permissions:r}=(0,i.ZP)().getState().users,s=e;if(Array.isArray(s)||(s=[s]),!r.data||r.status!==a.Px.SUCCESS)return!1;if(r.data.isAdmin)return!0;t||(t={mode:n.GLOBAL_OR_RESOURCE});let{resourceID:o,resourceType:l}=t;l||(l="global",o=null);let u=!1;if(null!=o&&null!=l){var c,m,d,p,f;let v=null===(c=r.data.junctionAliases)||void 0===c?void 0:c[l];v&&(o=null!==(p=null!==(d=v[o])&&void 0!==d?d:v[o.toString()])&&void 0!==p?p:o);let g=null!==(f=null===(m=r.data.junctions)||void 0===m?void 0:m[l])&&void 0!==f?f:null;g&&(u=g.includes(o))}let b=r.data.permissions.filter(e=>{let r="global"===e.type,s=e.type===l&&e.id===o;switch(t.mode){case n.RESOURCE_IF_JUNCTION:return u?s:r;case n.GLOBAL:return r;case n.GLOBAL_OR_RESOURCE:return!0;case n.RESOURCE:return s}}),y=!1;return b.forEach(e=>{for(let[t,r]of Object.entries(e.permissions))s.includes(t)&&r&&(y=!0)}),y}(s=n||(n={})).GLOBAL="global",s.RESOURCE="resource",s.GLOBAL_OR_RESOURCE="globalOrResource",s.RESOURCE_IF_JUNCTION="resourceIfJunction"},45835(e,t,r){r.d(t,{Z:()=>d,_:()=>p});var n=r(47178),s=r(75741),a=r(99308),i=r(57557),o=r.n(i);function l(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){l(a,n,s,i,o,"next",e)}function o(e){l(a,n,s,i,o,"throw",e)}i(void 0)})}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let m=(0,a.Jy)("@@users"),d=class e extends s.ZP{constructor(...t){super(...t),this.getMe=()=>{let t=this.getState().users.current;if(t.status===n.Px.LOADING)return;var r=this;let a=(0,s.KP)(e.getMeACs,u(function*(){let e=yield r.api.get("/users/me");return null==e?void 0:e.data}))();return this.dispatch(a)},this.getPermissions=()=>{let t=this.getState().users.permissions;if(t.status!==n.Px.PENDING)return;var r=this;let a=(0,s.KP)(e.getPermissionsACs,u(function*(){let e=yield r.api.get("/users/$me/permissions?expand=junctions");return null==e?void 0:e.data}))();return this.dispatch(a)},this.checkCountData=()=>{let t=new Date().getTime(),{lastRequested:r}=this.getState().users.countInformation;if(null!==r&&t<r+60)return;var n=this;let a=(0,s.KP)(e.getCountsACs,u(function*(){let e=yield n.api.get("/users/me-counts");return e.data}))();return this.dispatch(a)},this.getUserByID=t=>{let{userID:r}=t;var n=this;let a=(0,s.KP)(e.getUserACs,u(function*(){let e=yield n.api.get(`/users/${r}/?expand[]=all`);return e.data}))({userID:r});return this.dispatch(a)},this.postUser=t=>{var r=this;let n=(0,s.KP)(e.postUserACs,u(function*(){let e=yield r.api.post("/users",t);return e.data}))(t);return this.dispatch(n)},this.clearInviteUsers=this.bindDispatch(e.clearInviteUsersAC),this.inviteUsersByGroupID=t=>{let{groupID:r,userIDs:n,emails:a}=t,i={userIDs:n,emails:a};var o=this;let l=(0,s.KP)(e.inviteUsersACs,u(function*(){let e=yield o.api.post(`/groups/${r}/invitations`,i);return e.data}))(t);return this.dispatch(l)},this.updateIDs=({userID:t,IDs:r})=>{this.dispatch(e.updateInviteeIDsAC({userID:t,IDs:r}))},this.updateEmails=({userID:t,emails:r})=>{this.dispatch(e.updateInviteeEmailsAC({userID:t,emails:r}))},this.updateEmailsString=({userID:t,emailsString:r})=>{this.dispatch(e.updateInviteeEmailsStringAC({userID:t,emailsString:r}))},this.updateInvitees=({userID:t,invitees:r})=>{this.dispatch(e.updateInviteesAC({userID:t,invitees:r}))},this.patchUser=t=>{let{userID:r}=t,n=`${r}-${t.patchID}`;var a,i,l=this;let m=(0,s.KP)(e.patchUserAC,u(function*(){let e=yield l.api.patch(`/users/${r}`,o()(t,"patchID"));return e.data}))((a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},t),i=(i={patchID:n},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a));return this.dispatch(m)}}};function p(){return(0,s.LO)(d)}d.getMeACs=m.async("GET_ME"),d.getPermissionsACs=m.async("GET_PERMISSIONS"),d.getCountsACs=m.async("GET_ME_COUNTS"),d.getUserACs=m.async("GET_USER"),d.postUserACs=m.async("POST_USER"),d.clearInviteUsersAC=m("CLEAR_INVITE_USER"),d.inviteUsersACs=m.async("INVITE_USERS"),d.updateInviteeIDsAC=m("UPDATE_INVITEE_IDS"),d.updateInviteeEmailsAC=m("UPDATE_INVITEE_EMAIlS"),d.updateInviteeEmailsStringAC=m("UPDATE_INVITEE_EMAIlS_STRING"),d.updateInviteesAC=m("UPDATE_INVITEES"),d.patchUserAC=m.async("PATCH_USER")},43210(e,t,r){r.d(t,{Z:()=>s});var n=r(44765);function s(){return(0,n.Fs)(["profiles.view","users.add","users.edit","users.delete"])}},74367(e,t,r){r.d(t,{Z:()=>c});var n=r(22021),s=r(47178),a=r(75741),i=r(95774),o=r(224),l=r(23279),u=r.n(l);let c=class e extends a.ZP{static setActiveAC(t,r){return a.ZP.createAction(e.SET_ACTIVE_SUGGESTION,{suggestionID:t,suggestionIndex:r})}static filterSuggestions(e,t){let r=Intl.Collator("en",{usage:"search",sensitivity:"base",ignorePunctuation:!0,numeric:!0});return e.filter(e=>{if(e.name.length<t.length)return!1;let n=e.name.substring(0,t.length);return 0===r.compare(n,t)})}constructor(...t){super(...t),this.setActive=this.bindDispatch(e.setActiveAC),this.interalLoadUsers=t=>this.dispatch((r,a)=>{let l=i.Z.selectSuggestionsTrie(a()),u=l.getValue(t);if(null!=u)switch(u.status){case s.Px.SUCCESS:if(u.data)return r(e.loadUsersACs.response({data:u.data,status:200},{username:t}));break;case s.Px.LOADING:return;case s.Px.ERROR:if(u.error)return r(e.loadUsersACs.error(u.error,{username:t}))}let c=l.getValueFromPartialsOfWord(t);if(null!=c)switch(c.status){case s.Px.SUCCESS:if(c.data&&c.data.length<e.USER_LIMIT)return r(e.loadUsersACs.response({data:e.filterSuggestions(c.data,t),status:200},{username:t}));case s.Px.ERROR:case s.Px.PENDING:}r(e.loadUsersACs.request({username:t}));let m={name:t+"*",order:"mention",limit:e.USER_LIMIT};return o.ZP.get("/users/by-names/",{params:m}).then(n=>{if(n.status>=500)throw Error(n.data);n.data=n.data.map(e=>(e.domID="mentionSuggestion"+e.userID,e)),r(e.loadUsersACs.response(n,{username:t}))}).catch(s=>{(0,n.H)(s),r(e.loadUsersACs.error(s,{username:t}))})}),this.loadUsers=u()(this.interalLoadUsers,50)}};c.SET_ACTIVE_SUGGESTION="@@mentions/SET_ACTIVE_SUGGESTION",c.LOAD_USERS_REQUEST="@@mentions/GET_USERS_REQUEST",c.LOAD_USERS_RESPONSE="@@mentions/LOAD_USERS_RESPONSE",c.LOAD_USERS_ERROR="@@mentions/LOAD_USERS_ERROR",c.USER_LIMIT=50,c.loadUsersACs=a.ZP.generateApiActionCreators(c.LOAD_USERS_REQUEST,c.LOAD_USERS_RESPONSE,c.LOAD_USERS_ERROR,{},{})},95774(e,t,r){r.d(t,{Z:()=>c});var n=r(47178);let s=class{insert(e,t){let r=this.root;for(let n=0;n<e.length;n++){let s=e[n];if(r.children||(r.children={}),!(s in r.children)){let a=n!==e.length-1?{}:{children:{}};r.children[s]=a}r=r.children[s]}r.value=t}getNode(e){let t=this.root;if(void 0===e)return t;for(let r=0;r<e.length;r++){let n=e.charAt(r);if(!t.children||!t.children[n])return null;t=t.children[n]}return t}getValue(e){let t=this.getNode(e);return t&&t.value||null}getValueFromPartialsOfWord(e){let t=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,e.length);for(let r=t;r>0;r--){let n=e.substring(0,r),s=this.getValue(n);if(null!=s)return s}return null}constructor(){this.MAX_PARTIAL_LOOKUP_ITERATIONS=10,this.root={}}};var a=r(74367),i=r(34068);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let c=class e{static mapStateToProps(t){let r=l({},e.stateSlice(t)),{trie:s}=r,a=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(r,["trie"]),i=r.lastSuccessfulUsername&&s.getValue(r.lastSuccessfulUsername)||e.defaultSuggestions,o=r.currentUsername&&s.getValue(r.currentUsername),c=!!o&&o.status===n.Px.LOADING;return u(l({},a),{suggestions:i,isLoading:c})}static selectSuggestionsTrie(t){return e.stateSlice(t).trie}static stateSlice(e){if(!e.users||!e.users.suggestions)throw Error(`Could not find users.suggestions in state ${e}. Be sure to initialize the usersReducer()`);return e.users.suggestions}static sortSuggestions(e,t,r=new Date){let n=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0}),s=[],a=[],o=(0,i.mM)(r,90);for(let l of e){if(!l.dateLastActive){a.push(l);continue}let u=l.dateLastActive?new Date(l.dateLastActive):new Date;(0,i.LY)(u,o)?s.push(l):a.push(l)}let c=(e,r)=>{let s=t.toLocaleLowerCase(),a=e.name.toLocaleLowerCase(),i=r.name.toLocaleLowerCase();return a.startsWith(s)&&!i.startsWith(s)?-1:i.startsWith(s)&&!a.startsWith(s)?1:n.compare(e.name.toLocaleLowerCase(),r.name.toLocaleLowerCase())},m=(e,r)=>{let n=t.toLocaleLowerCase(),s=e.name.toLocaleLowerCase();return s===n?-1:0};s.sort(c),a.sort(c);let d=[...s,...a];return d.sort(m),d}constructor(){this.initialState={lastSuccessfulUsername:null,currentUsername:null,trie:new s,activeSuggestionID:"",activeSuggestionIndex:0},this.reducer=(t=this.initialState,r)=>{switch(r.type){case a.Z.LOAD_USERS_REQUEST:{let{username:s}=r.meta;t.trie.insert(s,{status:n.Px.LOADING});let i=!1,o=t.lastSuccessfulUsername;if(null!=o&&s.length>=o.length){let c=s.substring(0,o.length);c===o&&(i=!0)}return u(l({},t),{currentUsername:s,lastSuccessfulUsername:i?t.lastSuccessfulUsername:null})}case a.Z.LOAD_USERS_ERROR:{let m=r.payload,{username:d}=r.meta;return t.trie.insert(d,{status:n.Px.ERROR,data:void 0,error:m}),t}case a.Z.LOAD_USERS_RESPONSE:{let p=r.payload.data,{username:f}=r.meta;t.trie.insert(f,{status:n.Px.SUCCESS,data:e.sortSuggestions(p,f)});let v=p.length>0?p[0].domID:"";return u(l({},t),{activeSuggestionID:v,activeSuggestionIndex:0,lastSuccessfulUsername:f,currentUsername:f})}case a.Z.SET_ACTIVE_SUGGESTION:{let{suggestionID:g,suggestionIndex:b}=r.payload;return u(l({},t),{activeSuggestionID:g,activeSuggestionIndex:b})}default:return t}}}};c.defaultSuggestions={status:n.Px.PENDING}},4483(e,t,r){r.d(t,{Fk:()=>m,aF:()=>f,og:()=>v,tF:()=>p,xJ:()=>d});var n=r(46458),s=r(45835),a=r(67294),i=r(47178),o=r(18626),l=r(79089);function u(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(){return(0,n.v9)(e=>{var t;return null===(t=e.users.current.data)||void 0===t?void 0:t.userID})}function d(){return(0,n.v9)(e=>e.users.current.data)}function p(){return(0,n.v9)(e=>!!(e.users.current.data&&e.users.current.data.userID!==o._i))}function f(e){let t=(0,s._)(),{userID:r}=e,o=(0,n.v9)(e=>{var t;let n={status:i.Px.PENDING};return null==r?n:null!==(t=e.users.usersByID[r])&&void 0!==t?t:n}),{status:l}=o;return(0,a.useEffect)(()=>{null!=r&&i.Px.PENDING.includes(l)&&t.getUserByID({userID:r})},[l,t,r]),(0,a.useDebugValue)(o),o}function v(e){var t,r;let o=(0,s._)(),m=(0,l.hu)("userPatch"),d=(0,n.v9)(t=>{var r,n;return null!==(n=null===(r=t.users.patchStatusByPatchID[`${e}-${m}`])||void 0===r?void 0:r.status)&&void 0!==n?n:i.Px.PENDING}),p=(0,n.v9)(t=>{var r;return null===(r=t.users.patchStatusByPatchID[`${e}-${m}`])||void 0===r?void 0:r.error}),f=(0,a.useCallback)((r=(t=function*(e){var t,r;return yield o.patchUser((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},e),r=(r={patchID:m},r),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))},function(){var e=this,r=arguments;return new Promise(function(n,s){var a=t.apply(e,r);function i(e){u(a,n,s,i,o,"next",e)}function o(e){u(a,n,s,i,o,"throw",e)}i(void 0)})}),function(e){return r.apply(this,arguments)}),[o,m]);return{patchUser:f,patchErrors:p,patchStatus:d}}},18626(e,t,r){r.d(t,{$m:()=>O,KQ:()=>h,TE:()=>I,_i:()=>y,cA:()=>E,eu:()=>P});var n=r(47178),s=r(95774),a=r(45835),i=r(87219),o=r(76983),l=r(33198),u=r(46458),c=r(67294),m=r(66678),d=r.n(m);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function v(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let g=new s.Z().reducer,b={current:{status:n.Px.PENDING},permissions:{status:n.Px.PENDING},countInformation:{counts:[],lastRequested:null},suggestions:g(void 0,""),usersByID:{},usersInvitationsByID:{},postFormSubmit:{status:n.Px.PENDING},patchStatusByUserID:{},patchStatusByPatchID:{}},y=0;function O(e){return e&&e.userID===y}let E=(0,i.ZP)((0,o.reducerWithInitialState)(d()(b)).case(a.Z.getMeACs.started,e=>(e.current.status=n.Px.LOADING,e)).case(a.Z.getMeACs.done,(e,t)=>(e.current.data=t.result,e.current.status=n.Px.SUCCESS,e)).case(a.Z.getMeACs.failed,(e,t)=>(e.current.status=n.Px.ERROR,e.current.error=t.error,e)).case(a.Z.getPermissionsACs.started,e=>(e.permissions.status=n.Px.LOADING,e)).case(a.Z.getPermissionsACs.done,(e,t)=>(e.permissions.data=t.result,e.permissions.status=n.Px.SUCCESS,e)).case(a.Z.getPermissionsACs.failed,(e,t)=>(e.permissions.status=n.Px.ERROR,e.permissions.error=t.error,e)).case(a.Z.getCountsACs.started,e=>(e.countInformation.lastRequested=new Date().getTime(),e)).case(a.Z.getCountsACs.done,(e,t)=>(e.countInformation.counts=t.result.counts,e)).case(a.Z.getUserACs.started,(e,t)=>{let{userID:r}=t;return e.usersByID[r]={status:n.Px.LOADING},e}).case(a.Z.getUserACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.getUserACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={status:n.Px.ERROR,error:t.error},e}).case(a.Z.postUserACs.started,(e,t)=>(e.postFormSubmit.status=n.Px.LOADING,e)).case(a.Z.postUserACs.failed,(e,t)=>(e.postFormSubmit.status=n.Px.ERROR,e.postFormSubmit.error=t.error,e)).case(a.Z.postUserACs.done,(e,t)=>{let r=t.result.userID;return e.postFormSubmit.status=n.Px.SUCCESS,e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.inviteUsersACs.started,(e,t)=>{let{userID:r}=t;return e.usersInvitationsByID[r].results={status:n.Px.LOADING},e}).case(a.Z.inviteUsersACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.SUCCESS,data:t.result},e.usersInvitationsByID[r].emailsString="",e.usersInvitationsByID[r].invitees=[],e}).case(a.Z.clearInviteUsersAC,(e,t)=>{let{userID:r}=t;return delete e.usersInvitationsByID[r],e}).case(a.Z.inviteUsersACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.ERROR,error:t.error},e}).case(a.Z.updateInviteeIDsAC,(e,t)=>{var r,n;let{userID:s,IDs:a}=t;return e.usersInvitationsByID[s]=v(f({},e.usersInvitationsByID[s]),{userIDs:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.userIDs)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteesAC,(e,t)=>{let{userID:r,invitees:n}=t;return e.usersInvitationsByID[r]=v(f({},e.usersInvitationsByID[r]),{invitees:n}),e}).case(a.Z.updateInviteeEmailsAC,(e,t)=>{var r,n;let{userID:s,emails:a}=t;return e.usersInvitationsByID[s]=v(f({},e.usersInvitationsByID[s]),{emails:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.emails)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteeEmailsStringAC,(e,t)=>{let{userID:r,emailsString:n}=t;return e.usersInvitationsByID[r]=v(f({},e.usersInvitationsByID[r]),{emailsString:n}),e}).case(a.Z.patchUserAC.started,(e,t)=>{var r;let{patchID:s}=t;return e.patchStatusByPatchID[s]=v(f({},null!==(r=e.patchStatusByPatchID[s])&&void 0!==r?r:{}),{status:n.Px.LOADING}),e}).case(a.Z.patchUserAC.done,(e,t)=>{var r,s;let{userID:a,patchID:i}=t.params;return(null===(r=e.usersByID[a])||void 0===r?void 0:r.data)&&(e.usersByID[a].data=f({},null===(s=e.usersByID[a])||void 0===s?void 0:s.data,t.result)),e.patchStatusByPatchID[i]={status:n.Px.SUCCESS},e}).case(a.Z.patchUserAC.failed,(e,t)=>{let{patchID:r}=t.params;return e.patchStatusByPatchID[r]={status:n.Px.ERROR,error:t.error},e}).default((e,t)=>(t.type===l.Z.MARK_ALL_READ_RESPONSE&&e.current.data&&(e.current.data.countUnreadNotifications=0),e.suggestions=g(e.suggestions,t),e)));function h(e){if(!e.users||!e.users.current)throw Error(`It seems you did not initialize the users model correctly. Could not find "users.current" in state: ${e}`);return{currentUser:e.users.current}}function P(){return(0,u.v9)(h)}function I(){let e=(0,u.v9)(e=>e.users.permissions),{getPermissions:t}=(0,a._)(),{status:r}=e;return(0,c.useEffect)(()=>{[n.Px.PENDING,n.Px.LOADING].includes(r)&&t()},[r,t]),e}}}]);