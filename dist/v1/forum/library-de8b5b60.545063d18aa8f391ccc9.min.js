"use strict";(self.webpackChunkvanillaforum=self.webpackChunkvanillaforum||[]).push([[9331],{46302(e,t,r){r.d(t,{F:()=>d});var n=r(67294),a=r(36780),l=r(24504),s=r(57298),o=r(33780),i=r(81176),u=r(27405),c=r(56562),m=r(8283);function d(e){let{onRouteChange:t}=e,r=(0,n.useMemo)(()=>(0,o.lX)({basename:(0,s.CN)("")}),[]);(0,n.useEffect)(()=>{(0,c.hy)(r)},[r]);let f=(0,n.useCallback)(()=>{window.scrollTo(0,0),null==t||t(r)},[r,t]);(0,c.wG)(f);let p=n.createElement(m.A,null,n.createElement(l.rs,null,d._routes,n.createElement(l.AW,{key:"@not-found",component:i.Z})));if(p=n.createElement(u.lX,null,p),!e.disableDynamicRouting){var v,b;p=n.createElement(a.PO,{useLayoutRouting:e.useLayoutRouting,linkContexts:null===(v=null!==(b=e.sectionRoots)&&void 0!==b?b:["/"])||void 0===v?void 0:v.map(e=>(0,s.CN)(e,!0))},p)}return n.createElement(l.F0,{history:r},p)}d._routes=[],d.addRoutes=e=>{Array.isArray(e)?d._routes.push(...e):d._routes.push(e)}},84547(e,t,r){var n=r(224),a=r(44765),l=r(7837),s=r(52303);let o={apiv2:n.ZP,translate:s.Iu,getCurrentUser:()=>(0,l.ZP)().getState().users.current.data,getCurrentUserPermissions:()=>(0,l.ZP)().getState().users.permissions.data,currentUserHasPermission:a.Fs,getCurrentLocale:s.BH};window.__VANILLA_GLOBALS_DO_NOT_USE_DIRECTLY__=o},61045(e,t,r){r.d(t,{A:()=>h});var n=r(11590),a=r(89582),l=r(47178),s=r(13723),o=r(67294),i=r(89734),u=r.n(i),c=r(21663),m=r(41230),d=r(23249),f=r(3026),p=r(75994),v=r(83386),b=r(52303),g=r(92633),y=r(85819);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){let{isLoading:t,profileFields:r}=function(e){let t=(0,a.mX)(e),r=(0,a.or)(),n=(0,o.useMemo)(()=>[t.status,r.status].some(e=>[l.Px.PENDING,l.Px.LOADING].includes(e)),[t,r]),i=(0,o.useMemo)(()=>r.data?Object.fromEntries(r.data.map(e=>[e.apiName,e])):{},[r]),d=(e,t)=>o.createElement("span",null,e,o.createElement(s.c,{visibility:t})),f=(0,o.useMemo)(()=>{let e=[t.status===l.Px.SUCCESS,r.status===l.Px.SUCCESS].every(e=>!0===e);if(e){let n=u()(Object.keys(t.data),e=>i[e].sort);return n.map(e=>{var r;let n=t.data[e],a=i[e];return{key:d(null!==(r=a.label)&&void 0!==r?r:e,i[e].visibility),value:"date"===a.dataType?o.createElement(c.Z,{timestamp:(0,m.Ok)(n)}):n}})}return null},[t,r]);return{isLoading:n,profileFields:f}}(e.userID),i=(0,o.useRef)(null),h=(0,g.xE)(i),w=h.width<501,O=(0,n.iv)({"& table":function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){E(e,t,r[t])})}return e}({width:(0,y.aQ)(100)},v.W.margin({bottom:(0,p.OF)().spacer.pageComponent}))},";label:AboutMeWidget-tableStyles;");return o.createElement(f.S,null,o.createElement("div",{ref:i},o.createElement(d.F,{className:O,title:(0,b.t)("About Me"),isLoading:t,data:null!=r?r:[],colgroups:w?[40,60]:[30,70]})))}},8398(e,t,r){r.d(t,{H6:()=>eh});var n,a,l,s=r(67294),o=r(11590),i=r(23410),u=r(75994),c=r(83386),m=r(28236);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){d(e,t,r[t])})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let v=(0,m.yI)(()=>{let e=(0,u.OF)(),t=(0,o.iv)({name:"1estuep-AccountSettings-classes-root",styles:";label:AccountSettings-classes-root;"}),r=(0,o.iv)(f({color:i.w.colorOut(e.mainColors.fgHeading)},c.W.font(f({},e.fontSizeAndWeightVars("subTitle"))),c.W.margin({vertical:16})),";label:AccountSettings-classes-subtitle;"),n=(0,o.iv)(f({},c.W.margin({vertical:16})),";label:AccountSettings-classes-infoRow;"),a=(0,o.iv)({display:"flex",alignItems:"center",fontWeight:e.fonts.weights.bold},";label:AccountSettings-classes-infoLabel;"),l=(0,o.iv)({display:"flex",alignItems:"center","& .password":f({letterSpacing:"-0.25em"},c.W.margin({left:"-0.25em"}))},";label:AccountSettings-classes-infoDetail;"),s=(0,o.iv)(p(f({width:16,minWidth:16,height:16},c.W.margin({horizontal:10})),{"@media(max-width: 806px)":{minWidth:16}}),";label:AccountSettings-classes-infoEdit;"),m=(0,o.iv)(f({display:"flex",alignItems:"center",fontWeight:e.fonts.weights.normal,fontSize:e.fonts.size.small},c.W.margin({left:10})),";label:AccountSettings-classes-emailVerify;"),d=(0,o.iv)({color:i.w.colorOut(e.messageColors.confirm),width:e.fonts.size.large,height:e.fonts.size.large},";label:AccountSettings-classes-verified;"),v=(0,o.iv)({color:i.w.colorOut(e.messageColors.warning.state),width:e.fonts.size.medium,height:e.fonts.size.medium},";label:AccountSettings-classes-unverified;"),b=(0,o.iv)(p(f({},c.W.margin({top:e.spacer.headingItem/2})),{height:"18px!important"}),";label:AccountSettings-classes-loadingRectAdjustments;"),g=(0,o.iv)({name:"1myyjhk-AccountSettings-classes-topLevelErrors",styles:"margin-bottom:16px;label:AccountSettings-classes-topLevelErrors;"}),y=(0,o.iv)({name:"dihcgw-AccountSettings-classes-fitWidth",styles:"max-width:fit-content;label:AccountSettings-classes-fitWidth;"}),E=(0,o.iv)(f({},c.W.margin({bottom:(0,u.OF)().spacer.componentInner})),";label:AccountSettings-classes-instructions;"),h=(0,o.iv)(f({},c.W.margin({top:8})),";label:AccountSettings-classes-passwordMatchAdjustments;");return{root:t,subtitle:r,infoRow:n,infoLabel:a,infoDetail:l,infoEdit:s,emailVerify:m,verified:d,unverified:v,loadingRectAdjustments:b,topLevelErrors:g,fitWidth:y,instructions:E,passwordMatchAdjustments:h}});var b,g=r(2292),y=r(52303),E=r(70259);function h(e){let{label:t,value:r,afterValue:n,afterLabel:a}=e,l=v();return s.createElement("div",{className:l.infoRow},s.createElement("p",{className:l.infoLabel},t,a),s.createElement("div",{className:l.infoDetail},r,n))}(b=a||(a={})).USERNAME="username",b.EMAIL="email",b.PASSWORD="password";var w=r(4483),O=r(47178),S=r(33691),P=r(70015),j=r(44765);let A="registration.method",C="password.minLength",I=s.createContext({isRegistrationConnect:!1,canEditUsers:!1,canEditUsernames:!1,viewingUser:null,viewingUserID:-1,isViewingSelf:!1,minPasswordLength:12});function D(e){let{userID:t,children:r}=e,n=(0,P.g_)([A,C]),a=(0,s.useMemo)(()=>{var e;return(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e[A])==="Connect"},[n]),l=(0,s.useMemo)(()=>{var e,t;return null!==(t=null===(e=n.data)||void 0===e?void 0:e[C])&&void 0!==t?t:12},[n]),o=(0,j.Fs)(["users.edit","profile.editusernames"]),i=(0,j.Fs)(["users.edit"]),u=(0,w.xJ)(),c=(0,s.useMemo)(()=>{var e;return null!==(e=null==u?void 0:u.userID)&&void 0!==e?e:-1},[u]),m=(0,w.aF)({userID:t}),d=(0,s.useMemo)(()=>{var e;return null!==(e=null==m?void 0:m.data)&&void 0!==e?e:null},[m]);return s.createElement(I.Provider,{value:{isRegistrationConnect:a,canEditUsernames:o,canEditUsers:i,viewingUser:d,viewingUserID:e.userID,isViewingSelf:c===t,minPasswordLength:l}},r)}function x(){return(0,s.useContext)(I)}var N=r(21422),L=r(24324),k=r(59782),M=r(24462),Z=r(46452);function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let R=(0,s.forwardRef)(function(e,t){var r,n;let{setIsSaving:a,setIsFormDirty:l,setIsSuccess:o}=e,i=v(),{viewingUserID:u,viewingUser:c,isViewingSelf:m,canEditUsers:d}=x(),{patchUser:f,patchErrors:p,patchStatus:b}=(0,w.og)(u),{addToast:g}=(0,S.pm)(),h=(0,s.useMemo)(()=>c?null==c?void 0:c.email:"",[c]),[P,j]=(0,s.useState)(h),[A,C]=(0,s.useState)(""),[I,D]=(0,s.useState)(null==c?void 0:c.emailConfirmed),R=(0,s.useMemo)(()=>!m&&d,[d,m]);return(0,s.useEffect)(()=>{(null==c?void 0:c.email)&&j(null==c?void 0:c.email),D(null==c?void 0:c.emailConfirmed)},[c]),(0,s.useEffect)(()=>{b===O.Px.LOADING?a(!0):a(!1)},[b]),(0,s.useEffect)(()=>{b===O.Px.SUCCESS&&(o(!0),g({autoDismiss:!0,body:s.createElement(s.Fragment,null,(0,y.t)("Your email has been updated"))}))},[b,o]),(0,s.useEffect)(()=>{let e=[P!==(null==c?void 0:c.email),I!==(null==c?void 0:c.emailConfirmed)].some(e=>!0===e);l(e)},[P,I,c]),(0,s.useImperativeHandle)(t,()=>({onSave(){f(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){T(e,t,r[t])})}return e}({userID:u,email:P},I&&{emailConfirmed:I},A&&{passwordConfirmation:A}))}}),[f,u,P,I,A]),s.createElement(s.Fragment,null,p&&s.createElement(Z.Z,{className:i.topLevelErrors,type:"error",stringContents:p.message}),s.createElement(M.Z,{className:i.instructions},(0,y.t)("Enter your new email address. After your changes have been saved, you will need to confirm your email.")),s.createElement(N.Z,{label:(0,y.t)("Current Email")},s.createElement("span",null,h)),s.createElement(L.Z,{label:s.createElement("span",null,(0,y.t)("New Email")),errors:null==p?void 0:null===(r=p.errors)||void 0===r?void 0:r.email,noteAfterInput:(0,y.t)("Enter your new email address"),inputProps:{required:!0,onChange(e){j(e.target.value)},value:P},extendErrorMessage:!0}),d&&s.createElement("span",{style:{marginBottom:8,display:"flex"}},s.createElement(E.Z,{fullWidth:!0,hugLeft:!0,id:"email-verified-status",label:(0,y.t)("Verified. Bypasses spam and pre-moderation filters."),labelBold:!1,checked:I,onChange:e=>D(e.target.checked)})),!R&&s.createElement(N.Z,{label:(0,y.t)("Password"),errors:null==p?void 0:null===(n=p.errors)||void 0===n?void 0:n.password,extendErrorMessage:!0},s.createElement(k.Z,{id:"password",onChange:e=>C(e.target.value),value:A,"aria-label":(0,y.t)("Password"),showUnmask:!0,required:!0})))}),U=(0,o.iv)({display:"flex",alignItems:"center",gap:(0,u.OF)().spacer.headingItem/2,"& > span":{display:"flex"}},";label:StatusIndicator-statusIndicatorLayout;");function F(e){let{className:t,icon:r,statusText:n}=e;return s.createElement("span",{className:(0,o.cx)(U,t)},s.createElement("span",null,r),n&&s.createElement("span",null,n))}var W=r(224);function _(e,t,r,n,a,l,s){try{var o=e[l](s),i=o.value}catch(u){r(u);return}o.done?t(i):Promise.resolve(i).then(n,a)}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y=r(81612),z=r(10914),B=r(26458);function V(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let G=()=>{let e=(0,o.iv)({name:"175g6hk-EditUsername-classes-labelAndStatusLayout",styles:"display:flex;align-items:center;label:EditUsername-classes-labelAndStatusLayout;"}),t=(0,o.iv)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){V(e,t,r[t])})}return e}({display:"inline-flex",alignItems:"center"},c.W.padding({horizontal:(0,u.OF)().spacer.headingItem/2})),";label:EditUsername-classes-statusLayout;"),r=(0,o.iv)({width:(0,u.OF)().fonts.size.medium,height:(0,u.OF)().fonts.size.medium,padding:0},";label:EditUsername-classes-loadingSpinner;");return{labelAndStatusLayout:e,statusLayout:t,loadingSpinner:r}};var H=r(77423);function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let X=(0,s.forwardRef)(function(e,t){var r,n;let a=G(),{setIsSaving:l,setIsFormDirty:o,setIsSuccess:i}=e,{viewingUserID:u,isViewingSelf:c,canEditUsernames:m,viewingUser:d}=x();(0,w.xJ)();let f=(0,s.useMemo)(()=>!c&&m,[m,c]),{patchUser:p,patchErrors:b,patchStatus:g}=(0,w.og)(u),{addToast:E}=(0,S.pm)(),h=(0,s.useMemo)(()=>d?d.name:"",[d]),[P,j]=(0,s.useState)(h),A=function(e){var t,r;let[n,a]=(0,s.useState)({}),l=(0,s.useCallback)((r=(t=function*(e){let{data:t}=yield W.ZP.get("/users/by-names",{params:{name:e}});a(r=>{var n,a;return n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){q(e,t,r[t])})}return e}({},r),a=(a={[e]:Array.isArray(t)&&t.length<1},a),Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}),n})},function(){var e=this,r=arguments;return new Promise(function(n,a){var l=t.apply(e,r);function s(e){_(l,n,a,s,o,"next",e)}function o(e){_(l,n,a,s,o,"throw",e)}s(void 0)})}),function(e){return r.apply(this,arguments)}),[]);return(0,s.useEffect)(()=>{e&&!Object.keys(n).includes(e)&&l(e)},[e,l]),n[e]}(P),[C,I]=(0,s.useState)(!1),[D,M]=(0,s.useState)("");(0,s.useEffect)(()=>{(null==h?void 0:h.length)>0&&j(h)},[h]),(0,s.useEffect)(()=>{switch(g){case O.Px.LOADING:l(!0);break;case O.Px.SUCCESS:l(!1),i(!0),E({autoDismiss:!0,body:s.createElement(s.Fragment,null,(0,y.t)("Username changed successfully."))});break;default:l(!1),i(!1)}},[g,b]);let T=(0,s.useMemo)(()=>C&&P.length>0&&P!==h,[h,C,P]),R=(0,s.useMemo)(()=>{let e=(e,t)=>s.createElement("span",{className:a.statusLayout},s.createElement(B.e,{label:e},s.createElement("span",null,s.createElement(F,{icon:t}))));if(T)switch(A){case!0:return e((0,y.t)("This username is available"),s.createElement(Y.pv,{className:v().verified}));case!1:return e((0,y.t)("This username is unavailable"),s.createElement(H.JO,{icon:"status-warning",className:v().unverified}));default:return e((0,y.t)("Checking username availability"),s.createElement(z.Z,{className:a.loadingSpinner}))}return null},[T,A]),U=(0,s.useMemo)(()=>{let e=[];return T&&!1===A&&e.push({message:(0,y.t)("The name you entered is already in use by another member.")}),e},[T,A]);return(0,s.useImperativeHandle)(t,()=>({onSave(){p(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){J(e,t,r[t])})}return e}({userID:u,name:P},D&&{passwordConfirmation:D}))}}),[P,D,h]),s.createElement(s.Fragment,null,b&&s.createElement(Z.Z,{className:v().topLevelErrors,type:"error",stringContents:b.message}),s.createElement(N.Z,{label:(0,y.t)("Current Username")},s.createElement("span",null,h)),s.createElement(L.Z,{label:s.createElement("span",{className:a.labelAndStatusLayout},(0,y.t)("New Username"),R),noteAfterInput:(0,y.t)("Your new username must be unique"),errors:(null==b?void 0:null===(r=b.errors)||void 0===r?void 0:r.username)||U,inputProps:{required:!0,onChange(e){j(e.target.value),I(!0),o(!0)},value:P,valid:!1},extendErrorMessage:!0}),!f&&s.createElement(N.Z,{label:(0,y.t)("Password"),errors:null==b?void 0:null===(n=b.errors)||void 0===n?void 0:n.password,extendErrorMessage:!0},s.createElement(k.Z,{id:"password",onChange:e=>M(e.target.value),value:D,"aria-label":(0,y.t)("Password"),showUnmask:!0,required:!0})))});var $=r(17903);function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let Q=(0,s.forwardRef)(function(e,t){var r,n,a;let{setIsSaving:l,setIsSuccess:o,setIsFormDirty:i}=e,{viewingUserID:u,isViewingSelf:c,canEditUsers:m,minPasswordLength:d}=x(),{patchUser:f,patchErrors:p,patchStatus:b}=(0,w.og)(u),g=v(),[E,h]=(0,s.useState)(""),[P,j]=(0,s.useState)(""),[A,C]=(0,s.useState)(""),I=(0,S.pm)(),D=(0,s.useMemo)(()=>!c&&m,[m,c]);(0,s.useEffect)(()=>{let e=[!!E.length,!!P.length,!!A.length].some(e=>!0===e);i(e)},[A,E,P,i]);let L=(0,s.useMemo)(()=>P.length>0&&""===A?(0,y.t)("This must match the new password field"):A.length>0&&P.length>0&&A===P?s.createElement(F,{className:g.passwordMatchAdjustments,statusText:(0,y.t)("Passwords Match"),icon:s.createElement(Y.pv,{className:g.verified})}):null,[P,A]),M=(0,s.useMemo)(()=>{let e=[];return""!==A&&A!==P&&e.push({message:(0,y.t)("New password does not match. Please reconfirm your new password.")}),e},[A,P]);return(0,s.useEffect)(()=>{switch(b){case O.Px.LOADING:l(!0);break;case O.Px.SUCCESS:l(!1),o(!0),I.addToast({autoDismiss:!0,body:s.createElement(s.Fragment,null,(0,y.t)("Password changed successfully."))});break;default:l(!1),o(!1)}},[b,p]),(0,s.useImperativeHandle)(t,()=>({onSave(){A===P&&f(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){K(e,t,r[t])})}return e}({userID:u,password:P},E&&{passwordConfirmation:E}))}}),[A,P,f,u,E]),s.createElement(s.Fragment,null,p&&s.createElement(Z.Z,{className:g.topLevelErrors,type:"error",stringContents:p.message}),!D&&s.createElement(N.Z,{label:(0,y.t)("Current Password"),errors:null==p?void 0:null===(r=p.errors)||void 0===r?void 0:r.passwordConfirmation,extendErrorMessage:!0},s.createElement(k.Z,{id:"current-password",showUnmask:!0,onChange:e=>h(e.target.value),value:E,"aria-label":(0,y.t)("Current Password"),required:!0})),s.createElement(N.Z,{label:(0,y.t)("New Password"),noteAfterInput:!(null==p?void 0:null===(n=p.errors)||void 0===n?void 0:n.password)&&s.createElement($.Z,{source:"Your new password must be at least <0/> characters",c0:d}),errors:null==p?void 0:null===(a=p.errors)||void 0===a?void 0:a.password,extendErrorMessage:!0},s.createElement(k.Z,{id:"new-password",showUnmask:!0,onChange:e=>j(e.target.value),value:P,hasError:P.length>0&&P.length<d,errorTooltip:s.createElement($.Z,{source:"Your new password must be at least <0/> characters",c0:d}),"aria-label":(0,y.t)("New Password"),required:!0})),s.createElement(N.Z,{label:(0,y.t)("Confirm New Password"),noteAfterInput:L,errors:M,extendErrorMessage:!0},s.createElement(k.Z,{id:"confirm-new-password",showUnmask:!0,onChange:e=>C(e.target.value),value:A,hasError:""!==A&&A!==P,"aria-label":(0,y.t)("Confirm New Password"),required:!0})))});var ee=r(3026),et=r(30731),er=r(33188),en=r(64166),ea=r(78290),el=r(32201),es=r(77225),eo=r(86665),ei=r(14698),eu=r(62425),ec=r(17878),em=r(21965),ed=r(79089);function ef(e){let{editType:t,visibility:r,onVisibilityChange:n}=e,[l,i]=(0,s.useState)(!1),[u,c]=(0,s.useState)(!1),[m,d]=(0,s.useState)(!1),[f,p]=(0,s.useState)(null),v=(0,s.useRef)(null),b=(0,ed.hu)("editUserProfile_modal"),g=(0,eo.B)(),E=(0,el.V)(),h=(0,s.useMemo)(()=>{if(t){var e;return null!==(e=({[a.USERNAME]:X,[a.EMAIL]:R,[a.PASSWORD]:Q})[t])&&void 0!==e?e:null}return null},[t]),w=(0,s.useMemo)(()=>{switch(t){case a.USERNAME:return(0,y.t)("Edit username");case a.EMAIL:return(0,y.t)("Edit email");case a.PASSWORD:return(0,y.t)("Change password");default:return(0,y.t)("Edit")}},[t]);(0,s.useEffect)(()=>{f&&O()},[f,n]);let O=()=>{n&&n(!1),i(!1),c(!1),d(!1),p(null)};return s.createElement("div",null,s.createElement(eu.Z,{isVisible:r,size:em.Z.SMALL,exitHandler(){m?i(!0):O()},titleID:b},s.createElement("form",{onSubmit(e){var t;e.preventDefault(),e.stopPropagation(),null===(t=v.current)||void 0===t||t.onSave()}},s.createElement(en.Z,{header:s.createElement(ei.Z,{titleID:b,closeFrame:O,title:w}),body:s.createElement(ea.Z,null,s.createElement("div",{className:(0,o.cx)("frameBody-contents",E.contents)},s.createElement(ee.S,null,h&&s.createElement(h,{setIsSaving:c,setIsFormDirty:d,setIsSuccess:p,ref:v})))),footer:s.createElement(es.Z,{justifyRight:!0},s.createElement(et.Z,{className:g.actionButton,buttonType:er.q.TEXT,onClick:O},(0,y.t)("Cancel")),s.createElement(et.Z,{type:"submit",className:g.actionButton,buttonType:er.q.TEXT_PRIMARY},u?s.createElement(z.Z,null):(0,y.t)("Save")))}))),s.createElement(ec.Z,{isVisible:l,title:(0,y.t)("Unsaved Changes"),onCancel(){i(!1)},onConfirm(){i(!1),O()},confirmTitle:(0,y.t)("Exit")},(0,y.t)("You have unsaved changes and your work will be lost. Are you sure you want to continue without saving?")))}var ep=r(38443),ev=r(52808),eb=r(8283);function eg(e,t,r,n,a,l,s){try{var o=e[l](s),i=o.value}catch(u){r(u);return}o.done?t(i):Promise.resolve(i).then(n,a)}function ey(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eE(){var e,t;let r=v(),{viewingUserID:n,viewingUser:o,isRegistrationConnect:i,canEditUsernames:u,canEditUsers:c,isViewingSelf:m}=x(),{patchUser:d,patchStatus:f}=(0,w.og)(n),p=(0,S.pm)(),[b,P]=(0,s.useState)(s.createElement(ev.ZM,{width:100,className:r.loadingRectAdjustments})),[j,A]=(0,s.useState)(s.createElement(ev.ZM,{width:160,className:r.loadingRectAdjustments})),[C,I]=(0,s.useState)(s.createElement(ev.ZM,{width:126,className:r.loadingRectAdjustments})),[D,N]=(0,s.useState)(null),[L,k]=(0,s.useState)(!1),[M,Z]=(0,s.useState)(!1),[T,R]=(0,s.useState)(null),[U,W]=(0,s.useState)(!1),_=e=>{R(e),W(!0)};(0,s.useEffect)(()=>{if(o){var e,t,r,n,a;P(null!==(e=null==o?void 0:o.name)&&void 0!==e?e:b),A(null!==(t=null==o?void 0:o.email)&&void 0!==t?t:j),N(null!==(r=null==o?void 0:o.emailConfirmed)&&void 0!==r?r:D),k(null!==(n=null==o?void 0:o.showEmail)&&void 0!==n?n:L),Z(a=!(null==o?void 0:o.private)),I(s.createElement("span",{"aria-label":(0,y.t)("masked password"),className:"password"},"﹡﹡﹡﹡﹡﹡﹡﹡﹡﹡﹡﹡"))}},[o]);let q=(t=(e=function*(e,t){let r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){ey(e,t,r[t])})}return e}({userID:n},e===l.PROFILE&&{private:!t},e===l.EMAIL&&{showEmail:t}),a=yield d(r).then(t=>{switch(e){case l.PROFILE:return t.private?"Your profile will not be publicly displayed.":"Your profile will be publicly displayed.";case l.EMAIL:return t.showEmail?"Your email will be publicly displayed.":"Your email will not be publicly displayed.";default:return null}}).catch(e=>{p.addToast({autoDismiss:!1,body:s.createElement(s.Fragment,null,(0,y.t)("An error occurred updating your privacy setting."))})});a&&p.addToast({autoDismiss:!0,body:s.createElement(s.Fragment,null,(0,y.t)(a))})},function(){var t=this,r=arguments;return new Promise(function(n,a){var l=e.apply(t,r);function s(e){eg(l,n,a,s,o,"next",e)}function o(e){eg(l,n,a,s,o,"throw",e)}s(void 0)})}),function(e,r){return t.apply(this,arguments)}),z=(e,t,n,a)=>s.createElement(ep.Z,{condition:!e,component:B.e,componentProps:{label:t}},s.createElement("span",null,s.createElement(et.Z,{buttonType:er.q.ICON,className:r.infoEdit,ariaLabel:n,onClick:()=>_(a),disabled:!e},s.createElement(H.JO,{icon:"dashboard-edit"})))),V=(0,s.useMemo)(()=>null!==D?s.createElement("span",{className:r.emailVerify},s.createElement(F,{icon:D?s.createElement(Y.pv,{className:r.verified}):s.createElement(H.JO,{icon:"status-warning",className:r.unverified}),statusText:D?(0,y.t)("Confirmed"):(0,y.t)("Needs Confirmation")})):null,[D]);return s.createElement("section",null,s.createElement(g.Z,{depth:1,renderAsDepth:1},(0,y.t)("Account & Privacy Settings")),s.createElement(g.Z,{depth:2,className:r.subtitle},(0,y.t)("Your Account")),s.createElement(h,{label:(0,y.t)("Username"),value:b,afterValue:z(u||m,(0,y.t)("You don't have the permission to edit your username"),(0,y.t)("Edit username"),a.USERNAME)}),s.createElement(h,{label:(0,y.t)("Email"),value:j,afterLabel:V,afterValue:z(!i&&c||m,(0,y.t)("You don't have the permission to edit your email"),(0,y.t)("Edit email"),a.EMAIL)}),s.createElement(h,{label:(0,y.t)("Password"),value:C,afterValue:z(!i&&c||m,(0,y.t)("You don't have the permission to edit your password"),(0,y.t)("Change password"),a.PASSWORD)}),s.createElement(g.Z,{depth:2,className:r.subtitle},(0,y.t)("Privacy")),s.createElement(E.Z,{label:(0,y.t)("Display my profile publicly"),labelBold:!1,checked:M,disabled:f===O.Px.LOADING,onChange:e=>q(l.PROFILE,e.target.checked),className:r.fitWidth,hugLeft:!0}),s.createElement(E.Z,{id:"email-privacy",label:(0,y.t)("Display my email publicly"),labelBold:!1,checked:L,disabled:f===O.Px.LOADING,onChange:e=>q(l.EMAIL,e.target.checked),className:r.fitWidth,hugLeft:!0}),s.createElement(ef,{key:T,editType:T,visibility:U,onVisibilityChange:W}))}function eh(e){return s.createElement(D,{userID:e.userID},s.createElement(eb.A,null,s.createElement(eE,null)))}(n=l||(l={})).PROFILE="private",n.EMAIL="showEmail"},55972(e,t,r){r.d(t,{V:()=>n}),r(67294);let n=e=>{document.addEventListener("pageViewWithContext",e)}},67720(e,t,r){r.d(t,{Z0:()=>c});var n,a,l=r(22021),s=r(224),o=r(57298);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){i(e,t,r[t])})}return e}(n=a||(a={})).DEFAULT="page_view",n.DISCUSSION="discussion_view",n.KB_DEFAULT="kb_view",n.KB_ARTICLE="kb_article_view",n.KB_CATEGORY="kb_category_view";let c=(e=window.location.href,t,r)=>{var n,l;let s=r||(null!==(l=(0,o.xZ)("viewEventType"))&&void 0!==l?l:a.DEFAULT),i=(0,o.xZ)("DiscussionID"),c=JSON.parse((0,o.xZ)("TickExtra","{}")),d=null===(n=(0,o.yq)())||void 0===n?void 0:n.sectionID,f=null==c?void 0:c.CategoryID,p=u({url:e},i&&{discussionID:i},f&&{categoryID:f},d&&{siteSectionID:d},t&&u({},t));m(s,p)},m=(e,t)=>{s.ZP.post("/tick",u({type:e},t)).catch(e=>(0,l.H)(e))}},76048(e,t,r){r.d(t,{a:()=>n,k:()=>u});var n,a,l=r(67294),s=r(75778),o=r(94184),i=r.n(o);(a=n||(n={})).TOP="top",a.LEFT="left",a.RIGHT="right",a.BOTTOM="bottom";let u=l.forwardRef(function(e,t){let{firstItemProps:r,lastItemProps:n,isEntered:a,delay:o,fromDirection:u,fade:m,asElement:d,halfDirection:f,targetTransform:p,children:v,onDestroyed:b}=e,g=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["firstItemProps","lastItemProps","isEntered","delay","fromDirection","fade","asElement","halfDirection","targetTransform","children","onDestroyed"]),y=c(e),E=(0,s.Yz)(a?v:null,e=>null==e?void 0:e.key,y),h=d?s.q[d]:s.q.div;return E.map(({item:e,key:a,props:s},o)=>{let u=0===o,c=o===E.length-1,m=i()(g.className,u&&(null==r?void 0:r.className),c&&(null==n?void 0:n.className));return e&&l.createElement(h,Object.assign({},g,u&&null!=r?r:{},c&&null!=n?n:{},{className:m,ref:t,key:a,style:s}),e)})}),c=e=>{let{fromDirection:t,delay:r,fade:a,halfDirection:s,targetTransform:o,onDestroyed:i}=e,{xPercent:u=0,yPercent:c=0}=null!=o?o:{};return(0,l.useMemo)(()=>{let e=a?0:1,l,o;if(t){let m=0,d=0,f=0,p=0,v=s?25:100;switch(t){case n.BOTTOM:m=u,d=u,f=c+v,p=c;break;case n.TOP:m=u,d=u,f=c-v,p=c;break;case n.RIGHT:m=u+v,d=u,f=c,p=c;break;case n.LEFT:m=u-v,d=u,f=c,p=c}l=`translate3d(${m}%, ${f}%, 0)`,o=`translate3d(${d}%, ${p}%, 0)`}let b={config:{tension:250,friction:30,clamp:!0},trail:r||0,onDestroyed(){null==i||i()},from:{pointerEvents:"none",opacity:e,transform:l},enter:{opacity:1,pointerEvents:"initial",transform:o},leave:{opacity:e,pointerEvents:"none",transform:l}};return b.from.transform||delete b.from.transform,b.enter.transform||delete b.enter.transform,b.leave.transform||delete b.leave.transform,b},[a,t,r,s,u,c,i])}},224(e,t,r){r.d(t,{W1:()=>E,ZP:()=>b,cQ:()=>h,cT:()=>g});var n=r(67294),a=r(57298),l=r(22021),s=r(9669),o=r.n(s),i=r(80129),u=r.n(i),c=r(8975),m=r(53994),d=r(77910),f=r(64611);function p(e,t,r,n,a,l,s){try{var o=e[l](s),i=o.value}catch(u){r(u);return}o.done?t(i):Promise.resolve(i).then(n,a)}let v=o().create({baseURL:(0,a.or)("/api/v2/"),headers:{"X-Requested-With":"vanilla"},validateStatus:e=>e<400||408===e,transformResponse:[...o().defaults.transformResponse,function(e){return e&&e.status>=400&&e.errors&&e.errors.length>0&&(e.errors=(0,l.o2)(e.errors,"field")),e}],paramsSerializer:e=>u().stringify(e)});v.interceptors.response.use(void 0,function(e){var t,r,n,s;let o=(null===(t=e.response)||void 0===t?void 0:t.data)||"";"object"==typeof o&&o.message&&(e.message=o.message,e.errors=null!==(s=o.errors)&&void 0!==s?s:{});let i=null===(r=e.response)||void 0===r?void 0:null===(n=r.headers)||void 0===n?void 0:n["content-type"];if(e.response&&"string"==typeof i&&i.startsWith("text/html")){let u=e.response.data||"",c=function(e){try{var t,r,n,s;let o=new DOMParser,i=o.parseFromString(e,"text/html"),u=i.querySelector(".cf-error-details");if(!u)return null;let c=null!==(n=null===(t=u.querySelector("h1"))||void 0===t?void 0:t.innerText)&&void 0!==n?n:(0,a.t)("An Error has Occured"),m=null!==(s=null===(r=u.querySelector("p"))||void 0===r?void 0:r.innerText)&&void 0!==s?s:"",d=i.querySelectorAll(".footer-p"),f=null;for(let p of d)p instanceof HTMLElement&&p.innerText.includes("Ray ID")&&(f=p.innerText);return{message:c,description:[m,f].filter(l.Dw).join(" ")}}catch(v){return null}}(u);if(c)return Promise.reject(c)}return Promise.reject(e)});let b=v;function g(e){return y.apply(this,arguments)}function y(){var e;return(y=(e=function*(e,t={}){let r=(0,a.xZ)("upload.allowedExtensions",[]);r=r.map(e=>e.toLowerCase());let n=(0,a.xZ)("upload.maxSize",0),l=e.name.split("."),s=l[l.length-1]||"";if(e.size>n){let o=(0,m.g)(n),i=o.amount+o.unitAbbr,u=(0,c.sprintf)((0,a.t)("The uploaded file was too big (max %s)."),i);throw Error(u)}if(!r.includes(s.toLowerCase())){let d=r.join(", "),f=(0,c.sprintf)((0,a.t)("The uploaded file did not have an allowed extension. \nOnly the following extensions are allowed. \n%s."),d);throw Error(f)}let p=new FormData;p.append("file",e,e.name);let b=yield v.post("/media",p,t);return b.data},function(){var t=this,r=arguments;return new Promise(function(n,a){var l=e.apply(t,r);function s(e){p(l,n,a,s,o,"next",e)}function o(e){p(l,n,a,s,o,"throw",e)}s(void 0)})})).apply(this,arguments)}function E(e){return n.createElement(d.GS.Provider,{value:v},e.children)}function h(e){var t,r,n,a;return"object"==typeof e&&e&&"response"in e&&(null===(t=e.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.message)?{message:e.response.data.message,description:null!==(n=e.response.data.description)&&void 0!==n?n:void 0,status:null!==(a=e.response.data.status)&&void 0!==a?a:e.response.status}:e}let w=new f.e(v);v.interceptors.response.use(w.successMiddleware,w.errorMiddleware)}}]);