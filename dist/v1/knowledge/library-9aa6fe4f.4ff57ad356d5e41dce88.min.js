"use strict";(self.webpackChunkvanillaknowledge=self.webpackChunkvanillaknowledge||[]).push([[858],{75799(e,t,r){r.d(t,{F:()=>E});var n=r(67294),s=r(23410),a=r(59736),i=r(83386),l=r(75994),o=r(10141),u=r(11590);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let p=()=>{let e=(0,l.OF)(),t=(0,u.iv)(d(m(d(m({},i.W.font(m({},e.fontSizeAndWeightVars("medium")))),{zIndex:1}),i.W.padding({horizontal:e.gutter.size,vertical:e.gutter.size}),i.W.border(),(0,o.kL)().dropDown()),{background:s.w.colorOut(e.mainColors.bg),width:280,maxHeight:120,overflowX:"hidden",overflowY:"auto","&:not(last-of-type)":{marginTop:(0,a.dd)(e.gutter.size)},p:{margin:0}}),";label:Toast-styles-root;"),r=(0,u.iv)({name:"goseef-Toast-styles-closeButton",styles:"position:absolute;top:16px;right:0;label:Toast-styles-closeButton;"});return{root:t,closeButton:r}};var f=r(34098),g=r(76048),v=r(29368);function E(e){let{children:t,role:r,className:s,visibility:a,autoCloseDuration:i,onVisibilityChange:l,dismissible:o}=e,u=p(),[c,m]=(0,n.useState)(null==a||a);return(0,n.useEffect)(()=>{i&&c&&setTimeout(()=>m(!1),i)},[c,i]),(0,n.useEffect)(()=>{l&&l(c)},[c,l]),(0,n.useEffect)(()=>{m(!!a)},[a]),n.createElement(g.k,{isEntered:c,fromDirection:g.a.LEFT},n.createElement("div",{className:(0,f.cx)(u.root,s),role:null!=r?r:"status","aria-live":"assertive","aria-atomic":!0},o&&n.createElement(v.Z,{className:u.closeButton,onClick:()=>m(!1),compact:!0}),t))}},33691(e,t,r){r.d(t,{pm:()=>a}),r(75799),r(11590),r(75994),r(83386),r(88895);var n=r(67294);let s=n.createContext({toasts:null,addToast:()=>"",updateToast(){},removeToast(){}});function a(){return(0,n.useContext)(s)}},31600(e,t,r){r.d(t,{N:()=>C});var n=r(67294),s=r(33188),a=r(57298),i=r(24027),l=r(38918),o=r(47178),u=r(81478),c=r(52303),m=r(30731),d=r(10914),p=r(11590),f=r(34937),g=r(75994),v=r(83386),E=r(97923),h=r(59736);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y(e,t,r[t])})}return e}let O=()=>{var e,t;let r=(0,g.OF)(),n=(0,p.iv)((e=b({minHeight:(0,f._)().sizing.minHeight},(0,E.Mh)().middleLeft()),t=(t={"& button":b({margin:(0,h.dd)("3px")},v.W.font(b({},r.fontSizeAndWeightVars("medium"))))},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e),";label:ThemePreviewToast-style-toastActions;");return{toastActions:n}};var I=r(33691);function P(e,t,r,n,s,a,i){try{var l=e[a](i),o=l.value}catch(u){r(u);return}l.done?t(o):Promise.resolve(o).then(n,s)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){P(a,n,s,i,l,"next",e)}function l(e){P(a,n,s,i,l,"throw",e)}i(void 0)})}}function C(){var e,t,r;let{applyStatus:p,cancelStatus:f}=(0,l.n)(),[g,v]=(0,n.useState)((0,a.xZ)("themePreview",null)),{putCurrentTheme:E,putPreviewTheme:h,patchThemeWithRevisionID:y}=(0,i.ib)(),[b,P]=(0,n.useState)(!1),[C,D]=(0,n.useState)(!1),w=null!==(e=null==g?void 0:g.revisionID)&&void 0!==e&&e,A=O(),{addToast:R,updateToast:N}=(0,I.pm)(),U=(t=S(function*(){if(g){if(w){P(!0);let e=yield y({themeID:g.themeID,revisionID:g.revisionID});e&&(P(!1),D(!0)),h({themeID:"",revisionID:void 0,type:i.N5.APPLY})}else E(g.themeID),h({themeID:"",type:i.N5.APPLY})}}),function(){return t.apply(this,arguments)}),x=(r=S(function*(){h({themeID:"",type:i.N5.CANCEL})}),function(){return r.apply(this,arguments)}),L=(0,n.useMemo)(()=>f.status===o.Px.LOADING||f.status===o.Px.SUCCESS,[f]),j=(0,n.useMemo)(()=>p.status===o.Px.LOADING||p.status===o.Px.SUCCESS||b,[p,b]),T=(0,n.useMemo)(()=>w?(0,c.t)("Restore"):(0,c.t)("Apply"),[w]);(0,n.useEffect)(()=>{g&&(g.name&&p.status===o.Px.SUCCESS||f.status===o.Px.SUCCESS||C)&&(window.location.href=w?`/appearance/style-guides/${g.themeID}/revisions`:g.redirect)});let[Z,_]=(0,n.useState)(),k=(0,n.useMemo)(()=>g?n.createElement(n.Fragment,null,"You are previewing the ",n.createElement("b",null,g&&g.name)," theme.",p.error&&n.createElement(u.Z,{errors:[p.error]}),n.createElement("div",{className:A.toastActions},n.createElement(m.Z,{onClick:U,buttonType:s.q.TEXT},j?n.createElement(d.Z,{buttonType:s.q.TEXT}):n.createElement(n.Fragment,null,T)),n.createElement(m.Z,{onClick:x,buttonType:s.q.TEXT_PRIMARY},L?n.createElement(d.Z,{buttonType:s.q.TEXT_PRIMARY}):(0,c.t)("Cancel")))):null,[T,p.error,j,L,g]);return(0,n.useEffect)(()=>{if(k&&!Z){let e=R({persistent:!0,body:k});_(e)}k&&Z&&N(Z,{body:k})},[k]),null}},38918(e,t,r){r.d(t,{Z:()=>u,n:()=>c});var n=r(47178),s=r(87219),a=r(76983),i=r(24027),l=r(46458);let o={applyStatus:{status:n.Px.PENDING},cancelStatus:{status:n.Px.PENDING}},u=(0,s.Uy)((0,a.reducerWithInitialState)(o).case(i.ZP.putCurrentThemeACs.started,(e,t)=>(e.applyStatus.status=n.Px.LOADING,e.applyStatus.data={themeID:t.themeID},e)).case(i.ZP.putCurrentThemeACs.done,(e,t)=>(e.applyStatus.status=n.Px.SUCCESS,e.applyStatus.error=void 0,e)).case(i.ZP.putCurrentThemeACs.failed,(e,t)=>(e.applyStatus.status=n.Px.ERROR,e.applyStatus.error=t.error,e)).case(i.ZP.putPreviewThemeACs.started,(e,t)=>(t.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.LOADING),e.cancelStatus.data={themeID:t.themeID},e)).case(i.ZP.putPreviewThemeACs.done,(e,t)=>(t.params.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.SUCCESS),e.cancelStatus.error=void 0,e)).case(i.ZP.putPreviewThemeACs.failed,(e,t)=>(e.cancelStatus.status=n.Px.ERROR,e.cancelStatus.error=t.error,e)));function c(){return(0,l.v9)(e=>e.themePreviewToaster)}},90432(e,t,r){r.d(t,{TR:()=>ei,HW:()=>eo,Hx:()=>el});var n=r(11590),s=r(47178),a=r(44765);function i(){return(0,a.Fs)(["profiles.view","users.add","users.edit","users.delete"])}var l=r(4483),o=r(92234),u=r(72588),c=r(62425),m=r(21965),d=r(67294);let p=d.createContext({isOpen:!1,setIsOpen(){},triggerRef:{current:null},contentRef:{current:null},contents:null,contentID:"",triggerID:""});function f(){return(0,d.useContext)(p)}var g=r(92111),v=r(94982),E=r(75994),h=r(83386),y=r(52239),b=r(59736),O=r(28236),I=r(23410),P=r(75864),S=r(85938);function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){C(e,t,r[t])})}return e}let w=(0,O.yI)(e=>{var t,r;let n=(0,P.Cg)("userCard",e),s=(0,E.OF)(),a=n("container",{spacing:s.gutter.size}),i=n("button",{minWidth:120,mobile:{minWidth:0}}),l=n("name",{font:S.L.font(D({},s.fontSizeAndWeightVars("large","bold"))),margin:S.L.spacing({top:9})}),o=n("label",{border:S.L.border({color:s.mainColors.primary,radius:3}),padding:S.L.spacing({horizontal:10}),margin:S.L.spacing({top:12}),font:S.L.font({color:s.mainColors.primary,size:10,lineHeight:1.5,transform:"uppercase"})}),u=n("containerWithBorder",{color:I.w.colorOut(s.border.color)}),c=n("message",{font:S.L.font({size:s.fonts.size.small}),margin:S.L.spacing({top:12})}),m=n("headerLink",{color:I.w.colorOut(s.mainColors.fg),font:S.L.font((t=D({},s.fontSizeAndWeightVars("small")),r=(r={align:"center"},r),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),margin:S.L.spacing({top:8}),minHeight:(0,b.dd)(24)});return{container:a,button:i,name:l,label:o,containerWithBorder:u,message:c,headerLink:m}});var A=r(85819);function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){R(e,t,r[t])})}return e}function U(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let x=(0,O.yI)((e={})=>{var t;let r=w(),s=(0,v.J)().mediaQueries(),a=(0,E.OF)();(0,n.hi)({"[data-reach-popover]":{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:1050}},";label:UserCard-styles-userCardClasses;");let i=(0,n.iv)(U(N({display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"center"},h.W.padding({all:r.container.spacing})),{flexWrap:"wrap"}),";label:UserCard-styles-container;"),l=(0,n.cx)(i,(0,n.iv)({borderTop:`1px solid ${r.containerWithBorder.color}`},";label:UserCard-styles-containerWithBorder;")),o=(0,n.iv)({name:"14zkbwb-UserCard-styles-row",styles:"display:flex;width:100%;justify-content:center;label:UserCard-styles-row;"}),u=(0,n.iv)(N({maxWidth:(0,A.aQ)(100)},{"&&":{minWidth:(0,b.dd)(r.button.minWidth)}},s.oneColumnDown(N({},{"&&":{width:(0,A.aQ)(100),minWidth:(0,b.dd)(r.button.mobile.minWidth)}}))),";label:UserCard-styles-button;"),c=(0,n.iv)(U(N({},h.W.padding({horizontal:r.container.spacing/2})),{flexWrap:"wrap"}),";label:UserCard-styles-buttonsContainer;"),m=(0,n.iv)(N({maxWidth:(0,A.aQ)(100)},h.W.padding({top:0,bottom:r.container.spacing,horizontal:r.container.spacing/2}),s.oneColumnDown({"&&":{flexGrow:1,flexBasis:(0,A.aQ)(50)}})),";label:UserCard-styles-buttonContainer;"),d=(0,n.iv)(U(N({},h.W.margin(r.name.margin),h.W.font(r.name.font)),{width:(0,A.aQ)(100),textAlign:"center"}),s.oneColumnDown({fontSize:1.25*r.name.font.size}),";label:UserCard-styles-name;"),p=(0,n.iv)(N({},h.W.padding(r.label.padding),h.W.font(r.label.font),h.W.border(r.label.border),h.W.margin(r.label.margin)),";label:UserCard-styles-label;"),f=(0,n.iv)(N({borderRight:(0,y.$N)({})},h.W.padding({right:a.spacer.size/2,left:a.spacer.size})),";label:UserCard-styles-statLeft;"),O=(0,n.iv)(N({},h.W.padding({right:a.spacer.size,left:a.spacer.size/2})),";label:UserCard-styles-statRight;"),I=(0,n.iv)({name:"bezbfl-UserCard-styles-header",styles:"position:relative;label:UserCard-styles-header;"}),P=h.W.clickable.itemState({default:r.headerLink.color}),S=(0,n.iv)(U(N({},P),{"&&":N({minHeight:r.headerLink.minHeight,display:"inline-flex",alignItems:"center"},h.W.font(r.headerLink.font),h.W.margin(r.headerLink.margin))}),";label:UserCard-styles-headerLink;"),C=(0,n.iv)({name:"m7jc2-UserCard-styles-metas",styles:"&&{text-align:center;};label:UserCard-styles-metas;"}),D=(0,n.iv)(N({},h.W.margin({vertical:0})),";label:UserCard-styles-metaItem;"),R=(0,g.Gv)(),x=(0,n.iv)(N({},{"&&&":N(U(N({},h.W.absolute.topRight()),{width:(0,b.dd)(R.sizing.height),height:(0,b.dd)(R.sizing.height)}),s.oneColumnDown({height:(0,b.dd)(R.sizing.height)}))}),";label:UserCard-styles-close;"),L=(0,n.iv)(U(N({},h.W.margin({top:r.container.spacing})),{display:"block"}),";label:UserCard-styles-userPhoto;"),j=(0,n.iv)(N({},h.W.font(r.message.font),h.W.margin(r.message.margin)),";label:UserCard-styles-message;");return{container:i,containerWithBorder:l,buttonsContainer:c,button:u,buttonContainer:m,name:d,label:p,header:I,headerLink:S,statLeft:f,statRight:O,close:x,userPhoto:L,row:o,metas:C,metaItem:D,message:j}});var L=r(30731),j=r(33188),T=r(28590),Z=r(81612),_=r(24821),k=r(91589),B=r(70563),G=r(92097),F=r(88791),W=r(57298),z=r(52808),M=r(21663),V=r(39607);let X="This user has been banned.",H="Banned";function $(e){var t,r;let{zIndex:s}=(0,V.DE)(),i=x({zIndex:s}),{user:o}=e,c=(0,u.Fy)(),m=c===u.uv.MOBILE||c===u.uv.XS,p=m?T.pz.XLARGE:T.pz.LARGE,f=(0,W.xZ)("context.conversationsEnabled",!1),g=(0,l.Fk)(),v=o.userID===g,E=null!==(t=null==o?void 0:o.private)&&void 0!==t&&t,h=(0,a.Fs)("personalInfo.view"),y=null!==(r=null==o?void 0:o.banned)&&void 0!==r?r:0,b=1===y,O=(0,W.xZ)("ui.bannedPrivateProfile","0");O=""===O?"0":"1";let I="0"!==O,P=(0,d.useMemo)(()=>{let{label:e,title:t}=o;return b?d.createElement("div",{className:i.label},(0,W.t)(H)):t?d.createElement("div",{className:i.label},t):!t&&e?d.createElement("div",{className:i.label,dangerouslySetInnerHTML:{__html:e}}):null},[b,o]);return(E||b&&I)&&!h&&!v?d.createElement(Q,{user:o,onClose:e.onClose}):d.createElement(d.Fragment,null,d.createElement("div",{className:i.header},m&&d.createElement(L.Z,{className:i.close,onClick:e.onClose,buttonType:j.q.ICON},d.createElement(d.Fragment,null,d.createElement(Z.e9,null),d.createElement(_.Z,null,(0,W.t)("Close"))))),d.createElement(ee,null,d.createElement("div",{className:i.row},d.createElement(T.cy,{userInfo:o,size:p,className:i.userPhoto})),d.createElement("div",{className:i.row},d.createElement("div",{className:i.name},o.name)),P&&d.createElement("div",{className:i.row},P),o.email&&d.createElement(a.ZP,{permission:"personalInfo.view"},d.createElement("div",{className:i.row},d.createElement("a",{className:i.headerLink,href:`mailto:${o.email}`},o.email))),$.extraLinks.map((e,t)=>d.createElement(e.component,{key:t,userID:o.userID})),b&&d.createElement("div",{className:(0,n.cx)(i.row,i.message)},d.createElement("div",null,(0,W.t)(X)))),d.createElement("div",{className:(0,n.cx)(i.row,i.buttonsContainer)},d.createElement(q,{to:(0,W.tI)(o.name)},(0,W.t)("View Profile")),d.createElement(a.ZP,{permission:"conversations.add"},f&&!y&&d.createElement(q,{to:`/messages/add/${o.name}`},(0,W.t)("Message"))),$.extraButtons.map((e,t)=>d.createElement(e.component,{key:t,userID:o.userID}))),d.createElement(ee,{borderTop:!0},d.createElement(G.k,{to:(0,W.nQ)(o.name),value:o.countDiscussions,label:(0,W.t)("Discussions"),classNames:i.statLeft}),d.createElement(G.k,{to:(0,W._F)(o.name),value:o.countComments,label:(0,W.t)("Comments"),classNames:i.statRight})),$.extraContent.map((e,t)=>d.createElement(ee,{key:t,borderTop:!0},d.createElement(e.component,{userID:o.userID}))),d.createElement(ee,{borderTop:!0},d.createElement(k.HX,{className:i.metas},d.createElement(k.y1,{className:i.metaItem},(0,W.t)("Joined"),": ",d.createElement(M.Z,{timestamp:o.dateInserted})),o.dateLastActive&&d.createElement(k.y1,{className:i.metaItem},(0,W.t)("Last Active"),": ",d.createElement(M.Z,{timestamp:o.dateLastActive})))))}function K(e){var t;let{userFragment:r}=e,s=(0,u.Fy)(),i=s===u.uv.MOBILE||s===u.uv.XS,l=i?T.pz.XLARGE:T.pz.LARGE,o=(0,W.xZ)("context.conversationsEnabled",!1),c=x();return d.createElement(d.Fragment,null,d.createElement("div",{className:c.header},i&&d.createElement(L.Z,{className:c.close,onClick:e.onClose,buttonType:j.q.ICON},d.createElement(d.Fragment,null,d.createElement(Z.e9,null),d.createElement(_.Z,null,(0,W.t)("Close"))))),d.createElement(ee,null,d.createElement("div",{className:c.row},(null==r?void 0:r.photoUrl)?d.createElement(T.cy,{userInfo:r,size:l,className:c.userPhoto}):d.createElement(T.fP,{size:l,className:c.userPhoto})),d.createElement("div",{className:c.row},d.createElement("div",{className:c.name},null!==(t=null==r?void 0:r.name)&&void 0!==t?t:d.createElement(z.ZM,{inline:!0,height:12,width:60}))),d.createElement(a.ZP,{permission:"personalInfo.view",mode:a.R9.GLOBAL},d.createElement("div",{className:c.row},d.createElement("span",{className:c.headerLink},d.createElement(z.ZM,{inline:!0,height:12,width:120})))),!!(null==r?void 0:r.userID)&&$.extraLinks.map((e,t)=>d.createElement(d.Fragment,{key:t},e.skeleton?d.createElement(e.skeleton,{userID:r.userID}):d.createElement(z.ZM,{inline:!0,height:12,width:120})))),d.createElement("div",{className:(0,n.cx)(c.row,c.buttonsContainer)},d.createElement(q,{disabled:!(null==r?void 0:r.name),to:(null==r?void 0:r.name)?(0,W.tI)(null==r?void 0:r.name):""},(0,W.t)("View Profile")),d.createElement(a.ZP,{permission:"conversations.add"},o&&d.createElement(q,{disabled:!(null==r?void 0:r.name),to:`/messages/add/${null==r?void 0:r.name}`},(0,W.t)("Message"))),!!(null==r?void 0:r.userID)&&$.extraButtons.map((e,t)=>d.createElement(d.Fragment,null,e.skeleton?d.createElement(e.skeleton,{key:t,userID:r.userID}):d.createElement(z.ZM,{inline:!0,height:"2em",width:120})))),d.createElement(ee,{borderTop:!0},d.createElement(Y,{text:(0,W.t)("Discussions"),position:"left"}),d.createElement(Y,{text:(0,W.t)("Comments"),position:"right"})),!!(null==r?void 0:r.userID)&&$.extraContent.map((e,t)=>d.createElement(ee,{key:t,borderTop:!0},e.skeleton?d.createElement(e.skeleton,{userID:r.userID}):d.createElement(z.ZM,{inline:!0,height:"2em",width:120}))),d.createElement(ee,{borderTop:!0},d.createElement(k.HX,{className:c.metas},d.createElement(k.y1,{className:c.metaItem},(0,W.t)("Joined"),": ",d.createElement(z.ZM,{inline:!0,height:8,width:60})),d.createElement(k.y1,{className:c.metaItem},(0,W.t)("Last Active"),": ",d.createElement(z.ZM,{inline:!0,height:8,width:60})))))}function Q(e){var t,r,s;let{user:a,userFragment:i}=e,l=x(),o=(0,u.Fy)(),c=o===u.uv.MOBILE||o===u.uv.XS,m=c?T.pz.XLARGE:T.pz.LARGE,p=1===(null!==(r=null!==(t=null==a?void 0:a.banned)&&void 0!==t?t:null==i?void 0:i.banned)&&void 0!==r?r:0),f=p?(0,W.t)(H):(0,W.t)("Private"),g=p?(0,W.t)(X):(0,W.t)("This user's profile is private."),v=null!==(s=null==a?void 0:a.name)&&void 0!==s?s:null==i?void 0:i.name;return d.createElement(d.Fragment,null,d.createElement("div",{className:l.header}),d.createElement(ee,null,d.createElement("div",{className:l.row},d.createElement(T.cy,{userInfo:null!=a?a:i,size:m,className:l.userPhoto})),d.createElement("div",{className:l.row},d.createElement("div",{className:l.name},v)),d.createElement("div",{className:l.row},d.createElement("div",{className:l.label},f)),d.createElement("div",{className:(0,n.cx)(l.row,l.message)},d.createElement("div",null,g))))}function J(e){let t=x(),r=(0,u.Fy)(),s=r===u.uv.MOBILE||r===u.uv.XS,a=s?T.pz.XLARGE:T.pz.LARGE,i={photoUrl:(0,W.CN)("/applications/dashboard/design/images/banned.png",!0)},l=e.error?e.error:"This user has been deleted.",o=e.error?(0,W.t)("ERROR"):(0,W.t)("DELETED");return d.createElement(d.Fragment,null,d.createElement("div",{className:t.header}),d.createElement(ee,null,d.createElement("div",{className:t.row},d.createElement(T.cy,{userInfo:i,size:a,className:t.userPhoto})),d.createElement("div",{className:t.row},d.createElement("div",{className:t.label},o)),d.createElement("div",{className:(0,n.cx)(t.row,t.message)},d.createElement("div",null,l))))}function q(e){var t;let{zIndex:r}=(0,V.DE)(),n=x({zIndex:r});return d.createElement("div",{className:n.buttonContainer},d.createElement(F.Z,{disabled:e.disabled,to:null!==(t=e.to)&&void 0!==t?t:"",buttonType:j.q.STANDARD,className:n.button,target:e.target},e.children))}function Y(e){let{zIndex:t}=(0,V.DE)(),r=(0,B.u)(),s=x({zIndex:t}),{text:a,position:i}=e;return d.createElement("div",{className:(0,n.cx)(r.statItem,{[s.statLeft]:"left"===i},{[s.statRight]:"right"===i})},d.createElement("div",{className:r.statData},d.createElement(z.ZM,{height:35,width:48})),d.createElement("div",{className:r.statLabel},a))}function ee(e){let{borderTop:t}=e,{zIndex:r}=(0,V.DE)(),n=x({zIndex:r});return d.createElement("div",{className:t?n.containerWithBorder:n.container},e.children)}$.extraContent=[],$.registerContent=function(e){$.extraContent.find(t=>t.key===e.key)||$.extraContent.push(e)},$.extraButtons=[],$.registerButtons=function(e){$.extraButtons.find(t=>t.key===e.key)||$.extraButtons.push(e)},$.extraLinks=[],$.registerLinks=function(e){$.extraLinks.find(t=>t.key===e.key)||$.extraLinks.push(e)};var et=r(79089),er=r(77039),en=r(52303);function es(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ea(e){return i()?e.user?d.createElement($,{user:e.user,onClose:e.onClose}):d.createElement(ec,Object.assign({},e)):d.createElement(d.Fragment,null)}function ei(e){var t;let[r,n]=(0,d.useState)(!1),s=null!==(t=e.forceOpen)&&void 0!==t?t:r;function a(e){n(e),e&&window.closeAllFlyouts&&window.closeAllFlyouts()}let l=(0,et.hu)("popupTrigger"),o=(0,d.useRef)(null),f=(0,d.useRef)(null),g=(0,u.Fy)(),v=g===u.uv.MOBILE||g===u.uv.XS;return i()?d.createElement(V.Yh,null,d.createElement(p.Provider,{value:{isOpen:s,setIsOpen:a,triggerRef:o,contentRef:f,triggerID:l,contentID:l+"-content",contents:d.createElement(d.Fragment,null,!v&&s&&d.createElement(er.ZP,{targetRef:o,position:eo},d.createElement(eu,Object.assign({},e,{onClose(){a(!1)}}))),v&&d.createElement(c.Z,{isVisible:s,size:m.Z.SMALL,exitHandler(){a(!1)}},d.createElement(ea,Object.assign({},e,{onClose(){a(!1)}}))))}},e.children)):d.createElement(d.Fragment,null,e.children)}function el(){let e=f(),t=(0,d.useCallback)((t,r)=>{var n;t||r===e.contentRef.current||(null===(n=e.contentRef.current)||void 0===n?void 0:n.contains(r))||e.setIsOpen(!1)},[e.setIsOpen,e.contentRef]);return(0,V.LJ)(e.triggerRef,t),{props:i()?{"aria-controls":e.contentID,"aria-expanded":e.isOpen,"aria-haspopup":e.isOpen,role:"button",onClick(t){t.preventDefault(),e.setIsOpen(!e.isOpen)},onKeyPress(t){if((" "===t.key||"Enter"===t.key)&&(t.preventDefault(),e.setIsOpen(!e.isOpen)),"Escape"===t.key){var r;t.preventDefault(),e.setIsOpen(!1),null===(r=e.triggerRef.current)||void 0===r||r.focus()}}}:{},triggerRef:e.triggerRef,isOpen:e.isOpen,contents:e.contents}}function eo(e,t){var r,n,s,a,i;let l=(0,er.MN)(e,t),o=(null!==(r=null==t?void 0:t.width)&&void 0!==r?r:0)/2,u=(null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0)/2,c=(null!==(s=null==e?void 0:e.left)&&void 0!==s?s:0)+u+window.pageXOffset-o;return c<16||c+2*o>window.innerWidth-16?l:(a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){es(e,t,r[t])})}return e}({},l),i=(i={left:c},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a)}function eu(e){let t=f(),r=(0,d.useCallback)((e,r)=>{r&&!e&&r!==t.triggerRef.current&&t.setIsOpen(!1)},[t.setIsOpen,t.triggerRef]);return(0,V.LJ)(t.contentRef,r),d.createElement("div",{ref:t.contentRef,className:(0,n.cx)((0,o.IJ)().contentsBox,"isMedium"),onKeyDown(e){if("Escape"===e.key){var r;e.preventDefault(),t.setIsOpen(!1),null===(r=t.triggerRef.current)||void 0===r||r.focus()}},onClick(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},d.createElement(ea,Object.assign({},e)))}function ec(e){var t,r;let{userFragment:n,forceSkeleton:i=!1}=e,o=(0,l.aF)({userID:e.userID}),u=(0,l.Fk)(),c=(null==n?void 0:n.userID)===u,m=(0,a.Fs)("personalInfo.view"),p=(0,W.xZ)("ui.bannedPrivateProfile","0");p=""===p?"0":"1";let f="0"!==p,g=null!==(r=null==n?void 0:n.banned)&&void 0!==r?r:0;return((null==n?void 0:n.private)||f&&1===g)&&!m&&!c?d.createElement(Q,{userFragment:n,onClose:e.onClose}):i||o.status===s.Px.PENDING||o.status===s.Px.LOADING?d.createElement(K,{userFragment:n,onClose:e.onClose}):o.error&&(null==o?void 0:null===(t=o.error)||void 0===t?void 0:t.response.status)===404?d.createElement(J,{onClose:e.onClose}):o.data&&o.status!==s.Px.ERROR?d.createElement($,{user:o.data,onClose:e.onClose}):d.createElement(J,{error:(0,en.t)("Failed to load user"),onClose:e.onClose})}},90226(e,t,r){r.d(t,{Z:()=>p});var n=r(67294),s=r(57298),a=r(47178),i=r(74367),l=r(95774),o=r(224),u=r(46458),c=r(73819);class m extends n.Component{render(){let{suggestions:e,label:t}=this.props,r;return e.status===a.Px.SUCCESS&&e.data&&(r=e.data.map(e=>({value:e.userID,label:e.name}))),n.createElement(c.n,{label:t?(0,s.t)(t):(0,s.t)("Author"),placeholder:(0,s.t)("Select..."),options:r,isLoading:e.status===a.Px.LOADING||e.status===a.Px.PENDING,onChange:this.props.onChange,value:this.props.value,onInputChange:this.onInputChange,className:this.props.className,maxHeight:this.props.maxHeight})}constructor(...e){super(...e),this.onInputChange=e=>{(e=e.trim())&&this.props.suggestionActions.loadUsers(e)}}}let d=(0,u.$j)(l.Z.mapStateToProps,e=>({suggestionActions:new i.Z(e,o.ZP)})),p=d(m)},44765(e,t,r){r.d(t,{Fs:()=>c,R9:()=>n,ZP:()=>u});var n,s,a=r(47178),i=r(7837),l=r(67294),o=r(18626);function u(e){var t,r;if((0,o.TE)(),!e.permission)return l.createElement(l.Fragment,null,e.children);let s=c(e.permission,{mode:null!==(t=e.mode)&&void 0!==t?t:null!=e.resourceID?n.RESOURCE_IF_JUNCTION:n.GLOBAL_OR_RESOURCE,resourceType:e.resourceType,resourceID:e.resourceID})?e.children:null!==(r=e.fallback)&&void 0!==r?r:null;return l.createElement(l.Fragment,null,s)}function c(e,t){let{permissions:r}=(0,i.ZP)().getState().users,s=e;if(Array.isArray(s)||(s=[s]),!r.data||r.status!==a.Px.SUCCESS)return!1;if(r.data.isAdmin)return!0;t||(t={mode:n.GLOBAL_OR_RESOURCE});let{resourceID:l,resourceType:o}=t;o||(o="global",l=null);let u=!1;if(null!=l&&null!=o){var c,m,d,p,f;let g=null===(c=r.data.junctionAliases)||void 0===c?void 0:c[o];g&&(l=null!==(p=null!==(d=g[l])&&void 0!==d?d:g[l.toString()])&&void 0!==p?p:l);let v=null!==(f=null===(m=r.data.junctions)||void 0===m?void 0:m[o])&&void 0!==f?f:null;v&&(u=v.includes(l))}let E=r.data.permissions.filter(e=>{let r="global"===e.type,s=e.type===o&&e.id===l;switch(t.mode){case n.RESOURCE_IF_JUNCTION:return u?s:r;case n.GLOBAL:return r;case n.GLOBAL_OR_RESOURCE:return!0;case n.RESOURCE:return s}}),h=!1;return E.forEach(e=>{for(let[t,r]of Object.entries(e.permissions))s.includes(t)&&r&&(h=!0)}),h}(s=n||(n={})).GLOBAL="global",s.RESOURCE="resource",s.GLOBAL_OR_RESOURCE="globalOrResource",s.RESOURCE_IF_JUNCTION="resourceIfJunction"},45835(e,t,r){r.d(t,{Z:()=>d,_:()=>p});var n=r(47178),s=r(75741),a=r(99308),i=r(57557),l=r.n(i);function o(e,t,r,n,s,a,i){try{var l=e[a](i),o=l.value}catch(u){r(u);return}l.done?t(o):Promise.resolve(o).then(n,s)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){o(a,n,s,i,l,"next",e)}function l(e){o(a,n,s,i,l,"throw",e)}i(void 0)})}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let m=(0,a.Jy)("@@users"),d=class e extends s.ZP{constructor(...t){super(...t),this.getMe=()=>{let t=this.getState().users.current;if(t.status===n.Px.LOADING)return;var r=this;let a=(0,s.KP)(e.getMeACs,u(function*(){let e=yield r.api.get("/users/me");return null==e?void 0:e.data}))();return this.dispatch(a)},this.getPermissions=()=>{let t=this.getState().users.permissions;if(t.status!==n.Px.PENDING)return;var r=this;let a=(0,s.KP)(e.getPermissionsACs,u(function*(){let e=yield r.api.get("/users/$me/permissions?expand=junctions");return null==e?void 0:e.data}))();return this.dispatch(a)},this.checkCountData=()=>{let t=new Date().getTime(),{lastRequested:r}=this.getState().users.countInformation;if(null!==r&&t<r+60)return;var n=this;let a=(0,s.KP)(e.getCountsACs,u(function*(){let e=yield n.api.get("/users/me-counts");return e.data}))();return this.dispatch(a)},this.getUserByID=t=>{let{userID:r}=t;var n=this;let a=(0,s.KP)(e.getUserACs,u(function*(){let e=yield n.api.get(`/users/${r}/?expand[]=all`);return e.data}))({userID:r});return this.dispatch(a)},this.postUser=t=>{var r=this;let n=(0,s.KP)(e.postUserACs,u(function*(){let e=yield r.api.post("/users",t);return e.data}))(t);return this.dispatch(n)},this.clearInviteUsers=this.bindDispatch(e.clearInviteUsersAC),this.inviteUsersByGroupID=t=>{let{groupID:r,userIDs:n,emails:a}=t,i={userIDs:n,emails:a};var l=this;let o=(0,s.KP)(e.inviteUsersACs,u(function*(){let e=yield l.api.post(`/groups/${r}/invitations`,i);return e.data}))(t);return this.dispatch(o)},this.updateIDs=({userID:t,IDs:r})=>{this.dispatch(e.updateInviteeIDsAC({userID:t,IDs:r}))},this.updateEmails=({userID:t,emails:r})=>{this.dispatch(e.updateInviteeEmailsAC({userID:t,emails:r}))},this.updateEmailsString=({userID:t,emailsString:r})=>{this.dispatch(e.updateInviteeEmailsStringAC({userID:t,emailsString:r}))},this.updateInvitees=({userID:t,invitees:r})=>{this.dispatch(e.updateInviteesAC({userID:t,invitees:r}))},this.patchUser=t=>{let{userID:r}=t,n=`${r}-${t.patchID}`;var a,i,o=this;let m=(0,s.KP)(e.patchUserAC,u(function*(){let e=yield o.api.patch(`/users/${r}`,l()(t,"patchID"));return e.data}))((a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},t),i=(i={patchID:n},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a));return this.dispatch(m)}}};function p(){return(0,s.LO)(d)}d.getMeACs=m.async("GET_ME"),d.getPermissionsACs=m.async("GET_PERMISSIONS"),d.getCountsACs=m.async("GET_ME_COUNTS"),d.getUserACs=m.async("GET_USER"),d.postUserACs=m.async("POST_USER"),d.clearInviteUsersAC=m("CLEAR_INVITE_USER"),d.inviteUsersACs=m.async("INVITE_USERS"),d.updateInviteeIDsAC=m("UPDATE_INVITEE_IDS"),d.updateInviteeEmailsAC=m("UPDATE_INVITEE_EMAIlS"),d.updateInviteeEmailsStringAC=m("UPDATE_INVITEE_EMAIlS_STRING"),d.updateInviteesAC=m("UPDATE_INVITEES"),d.patchUserAC=m.async("PATCH_USER")},74367(e,t,r){r.d(t,{Z:()=>c});var n=r(88895),s=r(47178),a=r(75741),i=r(95774),l=r(224),o=r(23279),u=r.n(o);let c=class e extends a.ZP{static setActiveAC(t,r){return a.ZP.createAction(e.SET_ACTIVE_SUGGESTION,{suggestionID:t,suggestionIndex:r})}static filterSuggestions(e,t){let r=Intl.Collator("en",{usage:"search",sensitivity:"base",ignorePunctuation:!0,numeric:!0});return e.filter(e=>{if(e.name.length<t.length)return!1;let n=e.name.substring(0,t.length);return 0===r.compare(n,t)})}constructor(...t){super(...t),this.setActive=this.bindDispatch(e.setActiveAC),this.interalLoadUsers=t=>this.dispatch((r,a)=>{let o=i.Z.selectSuggestionsTrie(a()),u=o.getValue(t);if(null!=u)switch(u.status){case s.Px.SUCCESS:if(u.data)return r(e.loadUsersACs.response({data:u.data,status:200},{username:t}));break;case s.Px.LOADING:return;case s.Px.ERROR:if(u.error)return r(e.loadUsersACs.error(u.error,{username:t}))}let c=o.getValueFromPartialsOfWord(t);if(null!=c)switch(c.status){case s.Px.SUCCESS:if(c.data&&c.data.length<e.USER_LIMIT)return r(e.loadUsersACs.response({data:e.filterSuggestions(c.data,t),status:200},{username:t}));case s.Px.ERROR:case s.Px.PENDING:}r(e.loadUsersACs.request({username:t}));let m={name:t+"*",order:"mention",limit:e.USER_LIMIT};return l.ZP.get("/users/by-names/",{params:m}).then(n=>{if(n.status>=500)throw Error(n.data);n.data=n.data.map(e=>(e.domID="mentionSuggestion"+e.userID,e)),r(e.loadUsersACs.response(n,{username:t}))}).catch(s=>{(0,n.H)(s),r(e.loadUsersACs.error(s,{username:t}))})}),this.loadUsers=u()(this.interalLoadUsers,50)}};c.SET_ACTIVE_SUGGESTION="@@mentions/SET_ACTIVE_SUGGESTION",c.LOAD_USERS_REQUEST="@@mentions/GET_USERS_REQUEST",c.LOAD_USERS_RESPONSE="@@mentions/LOAD_USERS_RESPONSE",c.LOAD_USERS_ERROR="@@mentions/LOAD_USERS_ERROR",c.USER_LIMIT=50,c.loadUsersACs=a.ZP.generateApiActionCreators(c.LOAD_USERS_REQUEST,c.LOAD_USERS_RESPONSE,c.LOAD_USERS_ERROR,{},{})},95774(e,t,r){r.d(t,{Z:()=>c});var n=r(47178);let s=class{insert(e,t){let r=this.root;for(let n=0;n<e.length;n++){let s=e[n];if(r.children||(r.children={}),!(s in r.children)){let a=n!==e.length-1?{}:{children:{}};r.children[s]=a}r=r.children[s]}r.value=t}getNode(e){let t=this.root;if(void 0===e)return t;for(let r=0;r<e.length;r++){let n=e.charAt(r);if(!t.children||!t.children[n])return null;t=t.children[n]}return t}getValue(e){let t=this.getNode(e);return t&&t.value||null}getValueFromPartialsOfWord(e){let t=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,e.length);for(let r=t;r>0;r--){let n=e.substring(0,r),s=this.getValue(n);if(null!=s)return s}return null}constructor(){this.MAX_PARTIAL_LOOKUP_ITERATIONS=10,this.root={}}};var a=r(74367),i=r(34068);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){l(e,t,r[t])})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let c=class e{static mapStateToProps(t){let r=o({},e.stateSlice(t)),{trie:s}=r,a=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(r,["trie"]),i=r.lastSuccessfulUsername&&s.getValue(r.lastSuccessfulUsername)||e.defaultSuggestions,l=r.currentUsername&&s.getValue(r.currentUsername),c=!!l&&l.status===n.Px.LOADING;return u(o({},a),{suggestions:i,isLoading:c})}static selectSuggestionsTrie(t){return e.stateSlice(t).trie}static stateSlice(e){if(!e.users||!e.users.suggestions)throw Error(`Could not find users.suggestions in state ${e}. Be sure to initialize the usersReducer()`);return e.users.suggestions}static sortSuggestions(e,t,r=new Date){let n=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0}),s=[],a=[],l=(0,i.mM)(r,90);for(let o of e){if(!o.dateLastActive){a.push(o);continue}let u=o.dateLastActive?new Date(o.dateLastActive):new Date;(0,i.LY)(u,l)?s.push(o):a.push(o)}let c=(e,r)=>{let s=t.toLocaleLowerCase(),a=e.name.toLocaleLowerCase(),i=r.name.toLocaleLowerCase();return a.startsWith(s)&&!i.startsWith(s)?-1:i.startsWith(s)&&!a.startsWith(s)?1:n.compare(e.name.toLocaleLowerCase(),r.name.toLocaleLowerCase())},m=(e,r)=>{let n=t.toLocaleLowerCase(),s=e.name.toLocaleLowerCase();return s===n?-1:0};s.sort(c),a.sort(c);let d=[...s,...a];return d.sort(m),d}constructor(){this.initialState={lastSuccessfulUsername:null,currentUsername:null,trie:new s,activeSuggestionID:"",activeSuggestionIndex:0},this.reducer=(t=this.initialState,r)=>{switch(r.type){case a.Z.LOAD_USERS_REQUEST:{let{username:s}=r.meta;t.trie.insert(s,{status:n.Px.LOADING});let i=!1,l=t.lastSuccessfulUsername;if(null!=l&&s.length>=l.length){let c=s.substring(0,l.length);c===l&&(i=!0)}return u(o({},t),{currentUsername:s,lastSuccessfulUsername:i?t.lastSuccessfulUsername:null})}case a.Z.LOAD_USERS_ERROR:{let m=r.payload,{username:d}=r.meta;return t.trie.insert(d,{status:n.Px.ERROR,data:void 0,error:m}),t}case a.Z.LOAD_USERS_RESPONSE:{let p=r.payload.data,{username:f}=r.meta;t.trie.insert(f,{status:n.Px.SUCCESS,data:e.sortSuggestions(p,f)});let g=p.length>0?p[0].domID:"";return u(o({},t),{activeSuggestionID:g,activeSuggestionIndex:0,lastSuccessfulUsername:f,currentUsername:f})}case a.Z.SET_ACTIVE_SUGGESTION:{let{suggestionID:v,suggestionIndex:E}=r.payload;return u(o({},t),{activeSuggestionID:v,activeSuggestionIndex:E})}default:return t}}}};c.defaultSuggestions={status:n.Px.PENDING}},4483(e,t,r){r.d(t,{Fk:()=>l,aF:()=>o});var n=r(46458),s=r(45835),a=r(67294),i=r(47178);function l(){return(0,n.v9)(e=>{var t;return null===(t=e.users.current.data)||void 0===t?void 0:t.userID})}function o(e){let t=(0,s._)(),{userID:r}=e,l=(0,n.v9)(e=>{var t;let n={status:i.Px.PENDING};return null==r?n:null!==(t=e.users.usersByID[r])&&void 0!==t?t:n}),{status:o}=l;return(0,a.useEffect)(()=>{null!=r&&i.Px.PENDING.includes(o)&&t.getUserByID({userID:r})},[o,t,r]),(0,a.useDebugValue)(l),l}r(18626),r(79089)},18626(e,t,r){r.d(t,{$m:()=>h,KQ:()=>b,TE:()=>I,cA:()=>y,eu:()=>O});var n=r(47178),s=r(95774),a=r(45835),i=r(87219),l=r(76983),o=r(33198),u=r(46458),c=r(67294),m=r(66678),d=r.n(m);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function g(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let v=new s.Z().reducer,E={current:{status:n.Px.PENDING},permissions:{status:n.Px.PENDING},countInformation:{counts:[],lastRequested:null},suggestions:v(void 0,""),usersByID:{},usersInvitationsByID:{},postFormSubmit:{status:n.Px.PENDING},patchStatusByUserID:{},patchStatusByPatchID:{}};function h(e){return e&&0===e.userID}let y=(0,i.ZP)((0,l.reducerWithInitialState)(d()(E)).case(a.Z.getMeACs.started,e=>(e.current.status=n.Px.LOADING,e)).case(a.Z.getMeACs.done,(e,t)=>(e.current.data=t.result,e.current.status=n.Px.SUCCESS,e)).case(a.Z.getMeACs.failed,(e,t)=>(e.current.status=n.Px.ERROR,e.current.error=t.error,e)).case(a.Z.getPermissionsACs.started,e=>(e.permissions.status=n.Px.LOADING,e)).case(a.Z.getPermissionsACs.done,(e,t)=>(e.permissions.data=t.result,e.permissions.status=n.Px.SUCCESS,e)).case(a.Z.getPermissionsACs.failed,(e,t)=>(e.permissions.status=n.Px.ERROR,e.permissions.error=t.error,e)).case(a.Z.getCountsACs.started,e=>(e.countInformation.lastRequested=new Date().getTime(),e)).case(a.Z.getCountsACs.done,(e,t)=>(e.countInformation.counts=t.result.counts,e)).case(a.Z.getUserACs.started,(e,t)=>{let{userID:r}=t;return e.usersByID[r]={status:n.Px.LOADING},e}).case(a.Z.getUserACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.getUserACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={status:n.Px.ERROR,error:t.error},e}).case(a.Z.postUserACs.started,(e,t)=>(e.postFormSubmit.status=n.Px.LOADING,e)).case(a.Z.postUserACs.failed,(e,t)=>(e.postFormSubmit.status=n.Px.ERROR,e.postFormSubmit.error=t.error,e)).case(a.Z.postUserACs.done,(e,t)=>{let r=t.result.userID;return e.postFormSubmit.status=n.Px.SUCCESS,e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.inviteUsersACs.started,(e,t)=>{let{userID:r}=t;return e.usersInvitationsByID[r].results={status:n.Px.LOADING},e}).case(a.Z.inviteUsersACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.SUCCESS,data:t.result},e.usersInvitationsByID[r].emailsString="",e.usersInvitationsByID[r].invitees=[],e}).case(a.Z.clearInviteUsersAC,(e,t)=>{let{userID:r}=t;return delete e.usersInvitationsByID[r],e}).case(a.Z.inviteUsersACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.ERROR,error:t.error},e}).case(a.Z.updateInviteeIDsAC,(e,t)=>{var r,n;let{userID:s,IDs:a}=t;return e.usersInvitationsByID[s]=g(f({},e.usersInvitationsByID[s]),{userIDs:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.userIDs)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteesAC,(e,t)=>{let{userID:r,invitees:n}=t;return e.usersInvitationsByID[r]=g(f({},e.usersInvitationsByID[r]),{invitees:n}),e}).case(a.Z.updateInviteeEmailsAC,(e,t)=>{var r,n;let{userID:s,emails:a}=t;return e.usersInvitationsByID[s]=g(f({},e.usersInvitationsByID[s]),{emails:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.emails)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteeEmailsStringAC,(e,t)=>{let{userID:r,emailsString:n}=t;return e.usersInvitationsByID[r]=g(f({},e.usersInvitationsByID[r]),{emailsString:n}),e}).case(a.Z.patchUserAC.started,(e,t)=>{var r;let{patchID:s}=t;return e.patchStatusByPatchID[s]=g(f({},null!==(r=e.patchStatusByPatchID[s])&&void 0!==r?r:{}),{status:n.Px.LOADING}),e}).case(a.Z.patchUserAC.done,(e,t)=>{var r,s;let{userID:a,patchID:i}=t.params;return(null===(r=e.usersByID[a])||void 0===r?void 0:r.data)&&(e.usersByID[a].data=f({},null===(s=e.usersByID[a])||void 0===s?void 0:s.data,t.result)),e.patchStatusByPatchID[i]={status:n.Px.SUCCESS},e}).case(a.Z.patchUserAC.failed,(e,t)=>{let{patchID:r}=t.params;return e.patchStatusByPatchID[r]={status:n.Px.ERROR,error:t.error},e}).default((e,t)=>(t.type===o.Z.MARK_ALL_READ_RESPONSE&&e.current.data&&(e.current.data.countUnreadNotifications=0),e.suggestions=v(e.suggestions,t),e)));function b(e){if(!e.users||!e.users.current)throw Error(`It seems you did not initialize the users model correctly. Could not find "users.current" in state: ${e}`);return{currentUser:e.users.current}}function O(){return(0,u.v9)(b)}function I(){let e=(0,u.v9)(e=>e.users.permissions),{getPermissions:t}=(0,a._)(),{status:r}=e;return(0,c.useEffect)(()=>{[n.Px.PENDING,n.Px.LOADING].includes(r)&&t()},[r,t]),e}}}]);