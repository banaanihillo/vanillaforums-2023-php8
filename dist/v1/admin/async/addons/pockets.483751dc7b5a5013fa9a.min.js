(self.webpackChunkvanillaadmin=self.webpackChunkvanillaadmin||[]).push([[341],{79367:function(e,t){var n,r,a,l;l=function(e,t){"use strict";var n,r,a="function"==typeof Map?new Map:(n=[],r=[],{has:function(e){return n.indexOf(e)>-1},get:function(e){return r[n.indexOf(e)]},set:function(e,t){-1===n.indexOf(e)&&(n.push(e),r.push(t))},delete:function(e){var t=n.indexOf(e);t>-1&&(n.splice(t,1),r.splice(t,1))}}),l=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(o){l=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function i(e){var t=a.get(e);t&&t.destroy()}function s(e){var t=a.get(e);t&&t.update()}var u=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((u=function(e){return e}).destroy=function(e){return e},u.update=function(e){return e}):((u=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return function(e){if(!(!e||!e.nodeName||"TEXTAREA"!==e.nodeName||a.has(e))){var t,n=null,r=null,o=null,i=function(){e.clientWidth!==r&&p()},s=(function(t){window.removeEventListener("resize",i,!1),e.removeEventListener("input",p,!1),e.removeEventListener("keyup",p,!1),e.removeEventListener("autosize:destroy",s,!1),e.removeEventListener("autosize:update",p,!1),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),a.delete(e)}).bind(e,{height:e.style.height,resize:e.style.resize,overflowY:e.style.overflowY,overflowX:e.style.overflowX,wordWrap:e.style.wordWrap});e.addEventListener("autosize:destroy",s,!1),"onpropertychange"in e&&"oninput"in e&&e.addEventListener("keyup",p,!1),window.addEventListener("resize",i,!1),e.addEventListener("input",p,!1),e.addEventListener("autosize:update",p,!1),e.style.overflowX="hidden",e.style.wordWrap="break-word",a.set(e,{destroy:s,update:p}),"vertical"===(t=window.getComputedStyle(e,null)).resize?e.style.resize="none":"both"===t.resize&&(e.style.resize="horizontal"),isNaN(n="content-box"===t.boxSizing?-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)):parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth))&&(n=0),p()}function u(t){var n=e.style.width;e.style.width="0px",e.offsetWidth,e.style.width=n,e.style.overflowY=t}function c(){if(0!==e.scrollHeight){var t=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(e),a=document.documentElement&&document.documentElement.scrollTop;e.style.height="",e.style.height=e.scrollHeight+n+"px",r=e.clientWidth,t.forEach(function(e){e.node.scrollTop=e.scrollTop}),a&&(document.documentElement.scrollTop=a)}}function p(){c();var t=Math.round(parseFloat(e.style.height)),n=window.getComputedStyle(e,null),r="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):e.offsetHeight;if(r<t?"hidden"===n.overflowY&&(u("scroll"),c(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight):"hidden"!==n.overflowY&&(u("hidden"),c(),r="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(e,null).height)):e.offsetHeight),o!==r){o=r;var a=l("autosize:resized");try{e.dispatchEvent(a)}catch(i){}}}}(e,t)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],i),e},u.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],s),e}),t.default=u,e.exports=t.default},r=[e,t],void 0!==(a="function"==typeof(n=l)?n.apply(t,r):n)&&(e.exports=a)},5981(e,t,n){"use strict";n.d(t,{X:()=>o});var r=n(67294),a=n(94184),l=n.n(a);function o(e){return r.createElement("li",null,r.createElement("h2",Object.assign({},e,{className:l()("subheading",e.className)})))}},35731(e,t,n){"use strict";n.d(t,{D:()=>c});var r=n(67294),a=n(84353),l=n(94184),o=n.n(l),i=n(5909),s=n(24324),u=n(81478);let c=e=>{var t,n;let{inputID:l,labelType:c}=(0,a.p)(),p=o()(e.className),d=c===i.C.WIDE?"input-wrap-right":"input-wrap";return r.createElement("div",{className:d},r.createElement(s.Z,{id:null!==(n=null===(t=e.inputProps)||void 0===t?void 0:t.inputID)&&void 0!==n?n:l,inputProps:e.inputProps,multiLineProps:e.multiLineProps,className:o()(e.inputProps?e.inputProps.className:null,p),noMargin:!0}),e.errors&&r.createElement(u.Z,{errors:e.errors}),e.afterInput)}},48654(e,t,n){"use strict";n.d(t,{A:()=>d});var r=n(67294),a=n(84353),l=n(5909),o=n(94184),i=n.n(o),s=n(52239),u=n(81478),c=n(48815),p=n(11590);function d(e){let t=(0,r.useContext)(a.P),n=(0,c.L)(),{inputID:o,labelType:d}=t||{},m=d===l.C.WIDE?"input-wrap-right":"input-wrap";return r.createElement("div",{className:(0,p.cx)(m,e.disabled&&n.disabled)},r.createElement("label",{className:i()("toggle-wrap",{"toggle-wrap-on":e.checked,"toggle-wrap-off":!e.checked})},r.createElement("div",{className:i()({"toggle-wrap-active":e.inProgress})},r.createElement("input",{disabled:e.disabled||e.inProgress,id:o,type:"checkbox",className:i()((0,s.WD)().visuallyHidden,"toggle-input"),checked:e.checked,onChange:t=>e.onChange(!!t.target.checked)}),r.createElement("div",{className:"toggle-well"}),r.createElement("div",{className:"toggle-slider"}))),e.errors&&r.createElement(u.Z,{errors:e.errors}))}},83643(e,t,n){"use strict";n.d(t,{Er:()=>p,ZP:()=>d});var r=n(57298),a=n(75450),l=n(67294),o=n(46458),i=n(47178),s=n(89163),u=n(75741),c=n(73819);function p(e,t,n){let r=(0,u.LO)(a.Z),s=(0,o.v9)(t=>{var n;return null!==(n=t.forum.categories.suggestionsByQuery[e])&&void 0!==n?n:{status:i.Px.PENDING}});return(0,l.useEffect)(()=>{(e||n)&&r.loadCategories(e,t)},[e,t,n]),s}let d=function(e){var t,n,a;let[o,u]=(0,l.useState)(""),[d,m]=(0,l.useState)(!1),f=p(o,e.parentCategoryID,d),h=()=>{m(!0)},{multiple:v}=e,g;if(f.status===i.Px.SUCCESS&&f.data){let y=f.data;e.displayAs&&(y=y.filter(t=>t.displayAs===e.displayAs)),g=y.map(e=>{var t,n,r,a;let l,o=null!==(n=null===(t=e.breadcrumbs)||void 0===t?void 0:t.length)&&void 0!==n?n:0;return o>1&&(l=null===(r=e.breadcrumbs)||void 0===r?void 0:null===(a=r[o-2])||void 0===a?void 0:a.name),{value:e.categoryID,label:e.name,data:{parentLabel:l}}})}let E=f.status===i.Px.LOADING;return v?l.createElement(c.n,Object.assign({onFocus:h},e,{placeholder:(0,r.t)("Search..."),isLoading:E,onInputChange:u,label:null!==(t=e.label)&&void 0!==t?t:(0,r.t)("Community Category"),showIndicator:!0,options:g,maxHeight:e.maxHeight})):l.createElement(s.Z,Object.assign({onFocus:h},e,{placeholder:(0,r.t)("Search..."),onInputChange:u,isLoading:E,onChange(t){e.onChange&&e.onChange([t])},options:g,label:null!==(n=e.label)&&void 0!==n?n:(0,r.t)("Community Category"),value:(null!==(a=e.value)&&void 0!==a?a:[])[0],maxHeight:e.maxHeight}))}},64506(e,t,n){"use strict";n.r(t);var r=n(45607),a=n(67294),l=n(51568),o=n(46458),i=n(47178);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){s(e,t,n[t])})}return e}function c(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function p(){let{getAllRoles:e}=(0,l.Y)(),t=(0,o.v9)(e=>e.roles.rolesByID);return(0,a.useEffect)(()=>{t.status===i.Px.PENDING&&e()},[e,t]),t}var d=n(98769),m=n(73819);function f(e){var t;let n=p(),r=function(){let e=p();return e.data?c(u({},e),{data:Object.values(e.data).map(e=>({value:e.roleID,label:e.name}))}):c(u({},e),{data:void 0})}();return a.createElement(m.n,Object.assign({},e,{value:e.value.map(e=>{var t;let r=null===(t=n.data)||void 0===t?void 0:t[e];return r?{label:r.name,value:r.roleID}:null}).filter(d.Dw),onChange(t){let n=null==t?void 0:t.map(e=>e.value);e.onChange(n)},options:null!==(t=r.data)&&void 0!==t?t:[],isLoading:[i.Px.PENDING,i.Px.LOADING].includes(r.status)}))}var h=n(98178),v=n(52303),g=n(48815),y=n(83643),E=n(23524),b=n(67147),w=n(94184),x=n.n(w),O=n(93588),C=n(75185),N=n(69076),P=n(59898),S=n(5981);function k(e){let{formKey:t,value:n,flatten:r}=e,l=t.replace(".","-dot-");if(null==n)return a.createElement("input",{type:"hidden",value:"",name:l,style:{display:"none"}});if("object"!=typeof n)return a.createElement("input",{type:"hidden",value:n,name:l,style:{display:"none"}});if(r){let o=(0,d.FX)(n,t);return a.createElement(a.Fragment,null,Object.entries(o).map(([e,t])=>a.createElement(k,{key:e,formKey:e,value:t})))}{let i=JSON.stringify(n);return a.createElement("input",{type:"hidden",value:i,name:l,style:{display:"none"}})}}var L=n(84353),j=n(5909),z=n(81478),I=n(67665);let D=e=>{let{inputID:t,labelType:n,labelID:r}=(0,L.p)(),l=n===j.C.WIDE?"input-wrap-right":"input-wrap";return a.createElement("div",{className:x()(l)},a.createElement(I.G,Object.assign({},e,{label:null,labelID:r,inputID:t,inputClassName:x()("form-control",e.inputClassName)})),e.errors&&a.createElement(z.Z,{errors:e.errors}))};var T=n(96282),H=n(57298),R=n(57704);function F(e){return 0===Object.entries(e.schema).length?a.createElement("div",null,(0,H.t)("There are no configuration options for this widget.")):a.createElement(R.I,Object.assign({},e,{autoValidate:!0,FormSection:({title:e,children:t})=>a.createElement(a.Fragment,null,e&&a.createElement(S.X,null,e),t),FormControl:T.c,FormControlGroup:e=>a.createElement(T.k,Object.assign({},e,{sideBySide:!0}))}))}var A=n(52808);let M={searchUrl:"/widgets",singleUrl:"/widgets/%s",valueKey:"widgetID",labelKey:"name",excludeLookups:["raw"],processOptions(e){let t={label:(0,v.t)("Custom HTML"),value:"raw"};return[t,...e]}};(0,r.Tk)("pocket-multi-role-input",function(e){let[t,n]=(0,a.useState)(e.initialValue&&""!==e.initialValue?e.initialValue:[]);return a.createElement(h.r,{label:(0,v.t)("Roles"),tag:"div"},a.createElement("div",{className:"input-wrap"},a.createElement(f,{showIndicator:!0,className:(0,g.L)().tokenInput,label:"",value:null!=t?t:[],onChange(e){n(null!=e?e:[])},menuPlacement:"auto"})),!t||0===t.length&&a.createElement("input",{name:e.fieldName+[],type:"hidden",value:[]}),t&&t.map((t,n)=>a.createElement("input",{key:n,name:e.fieldName+"[]",type:"hidden",value:t})))}),(0,r.Tk)("pocket-category-input",function(e){let[t,n]=(0,a.useState)(e.label&&e.initialValue?{label:e.label,value:e.initialValue}:void 0),[r,l]=(0,a.useState)(e.inheritCategory),o=(0,E.t)();(0,b.N6)().applyInputCSSRules();let i=t&&t.value;return a.createElement(h.r,{label:(0,v.t)("Category"),tag:"div"},a.createElement("div",{className:"input-wrap"},a.createElement("div",{className:o.inputWrap},a.createElement(y.ZP,{placeholder:(0,v.t)("Select..."),label:null,className:(0,g.L)().selectOne,onChange(e){n(e[0])},value:t?[t]:[]})),a.createElement("input",{name:e.fieldName,type:"hidden",value:null!=i?i:""}),a.createElement("div",{className:x()("checkbox",o.checkBoxAfterInput)},a.createElement(C.U7,null,a.createElement(O.S,{checked:!!i&&r,onChange(){l(!r)},label:(0,v.t)("Apply to subcategories"),disabled:!i}))),a.createElement("input",{name:"InheritCategory",type:"hidden",value:`${r?1:0}`})))}),(0,r.Tk)("PocketContentForm",function(e){var t,n;let{initialWidgetParameters:r,initialBody:l}=e,o="widget"===e.format&&e.widgetID?e.widgetID:"raw",[i,s]=(0,a.useState)("raw"===o?{label:(0,v.t)("Custom HTML"),value:"raw"}:null),[u,c]=(0,a.useState)(0),[p,d]=(0,a.useState)(null!==(t=e.initialWidgetParameters)&&void 0!==t?t:{}),[m,f]=(0,a.useState)("");return(0,a.useEffect)(()=>{d(null!=r?r:{}),c(e=>e+1)},[r]),(0,a.useEffect)(()=>{f(null!=l?l:""),c(e=>e+1)},[l]),a.createElement(a.Fragment,null,a.createElement("ul",null,a.createElement(h.r,{label:(0,v.t)("Type"),description:(0,v.t)("Create your own custom Pocket, or configure one of our existing widgets.")},(null==i?void 0:i.value)==="raw"?a.createElement(k,{formKey:"Format",value:i.value}):a.createElement(a.Fragment,null,a.createElement(k,{formKey:"Format",value:"widget"}),a.createElement(k,{formKey:"WidgetID",value:null==i?void 0:i.value})),a.createElement(D,{onChange(e){s(e)},isClearable:!1,onInitialValueLoaded:s,value:null!==(n=null==i?void 0:i.value)&&void 0!==n?n:o,api:M}))),!i||e.forceLoading?a.createElement("ul",null,a.createElement(S.X,null,a.createElement(A.ZM,{height:18,width:"200px"})),a.createElement(P.O,{descriptionLines:2}),a.createElement(P.O,null),a.createElement(P.O,null)):a.createElement("section",null,a.createElement(S.X,null,i.label),"raw"===i.value?a.createElement(h.r,{label:(0,v.t)("Custom HTML"),description:(0,v.t)("Enter the text of the pocket. This will be output exactly as you type it so make sure that you enter valid HTML.")},a.createElement(N.Y.Uncontrolled,{key:u,inputName:"Body",initialValue:m})):a.createElement(a.Fragment,null,a.createElement(F,{key:u,schema:i.data.schema,onChange:d,instance:p}),a.createElement(k,{formKey:"WidgetParameters",value:p}))))},{bypassPortalManager:!0,unmountBeforeRender:!0})},31934(e){var t=function(e,t,n){return((n=window.getComputedStyle)?n(e):e.currentStyle)[t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()})]};e.exports=t},58303(e,t,n){var r=n(31934);e.exports=function(e){var t=r(e,"line-height"),n=parseFloat(t,10);if(t===n+""){var a=e.style.lineHeight;e.style.lineHeight=t+"em",t=r(e,"line-height"),n=parseFloat(t,10),a?e.style.lineHeight=a:delete e.style.lineHeight}if(-1!==t.indexOf("pt")?(n*=4,n/=3):-1!==t.indexOf("mm")?(n*=96,n/=25.4):-1!==t.indexOf("cm")?(n*=96,n/=2.54):-1!==t.indexOf("in")?n*=96:-1!==t.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===t){var l=e.nodeName,o=document.createElement(l);o.innerHTML="&nbsp;","TEXTAREA"===l.toUpperCase()&&o.setAttribute("rows","1");var i=r(e,"font-size");o.style.fontSize=i,o.style.padding="0px",o.style.border="0px";var s=document.body;s.appendChild(o),n=o.offsetHeight,s.removeChild(o)}return n}},4857:function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)0>t.indexOf(r[a])&&(n[r[a]]=e[r[a]]);return n};t.__esModule=!0;var i=n(67294),s=n(45697),u=n(79367),c=n(58303),p="autosize:resized",d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={lineHeight:null},t.textarea=null,t.onResize=function(e){t.props.onResize&&t.props.onResize(e)},t.updateLineHeight=function(){t.textarea&&t.setState({lineHeight:c(t.textarea)})},t.onChange=function(e){var n=t.props.onChange;t.currentValue=e.currentTarget.value,n&&n(e)},t}return a(t,e),t.prototype.componentDidMount=function(){var e=this,t=this.props,n=t.maxRows,r=t.async;"number"==typeof n&&this.updateLineHeight(),"number"==typeof n||r?setTimeout(function(){return e.textarea&&u(e.textarea)}):this.textarea&&u(this.textarea),this.textarea&&this.textarea.addEventListener(p,this.onResize)},t.prototype.componentWillUnmount=function(){this.textarea&&(this.textarea.removeEventListener(p,this.onResize),u.destroy(this.textarea))},t.prototype.render=function(){var e=this,t=this.props,n=(t.onResize,t.maxRows),r=(t.onChange,t.style),a=(t.innerRef,t.children),s=o(t,["onResize","maxRows","onChange","style","innerRef","children"]),u=this.state.lineHeight,c=n&&u?u*n:null;return i.createElement("textarea",l({},s,{onChange:this.onChange,style:c?l({},r,{maxHeight:c}):r,ref:function(t){e.textarea=t,"function"==typeof e.props.innerRef?e.props.innerRef(t):e.props.innerRef&&(e.props.innerRef.current=t)}}),a)},t.prototype.componentDidUpdate=function(){this.textarea&&u.update(this.textarea)},t.defaultProps={rows:1,async:!1},t.propTypes={rows:s.number,maxRows:s.number,onResize:s.func,innerRef:s.any,async:s.bool},t}(i.Component);t.TextareaAutosize=i.forwardRef(function(e,t){return i.createElement(d,l({},e,{innerRef:t}))})}}]);