"use strict";(self.webpackChunkvanillaadmin=self.webpackChunkvanillaadmin||[]).push([[899,410],{93588(e,t,n){n.d(t,{S:()=>o});var a=n(67294),r=n(75185),l=n(70259);function o(e){let{isInline:t}=(0,r.i6)(),{excludeFromICheck:n=!0}=e;return a.createElement(l.Z,Object.assign({},e,{excludeFromICheck:n,onChange:t=>e.onChange&&e.onChange(!!t.target.checked),isHorizontal:t}))}},71933(e,t,n){n.d(t,{w:()=>i});var a=n(67294),r=n(94184),l=n.n(r),o=n(48815);function i(e){let t=(0,o.L)();return a.createElement("ul",{className:l()(t.formList,e.isBlurred&&"foggy"),"aria-hidden":!!e.isBlurred},e.children)}},34060(e,t,n){n.d(t,{U:()=>u});var a=n(67294),r=n(75185),l=n(70162),o=n(24423),i=n(94184),s=n.n(i);function u(e){let{onChange:t,value:n,isInline:i}=(0,r.i6)(),u=void 0!==t?{onChange:()=>t(e.value),checked:n===e.value}:{};return a.createElement(l.Z,Object.assign({},e,u,{isHorizontal:i,className:s()(e.className,(0,o.Q)().isDashboard)}))}},75185(e,t,n){n.d(t,{U7:()=>d,i6:()=>c});var a=n(67294),r=n(84353),l=n(94184),o=n.n(l),i=n(39607),s=n(5909);let u=a.createContext({});function c(){let e=(0,a.useContext)(u),t=(0,i._m)();return null===e&&t(Error("Attempting to use a radio group without specifying a group. Be sure to wrap it in a <DashboardRadioGroup />")),e}function d(e){let{labelID:t,labelType:n}=(0,r.p)(),l=n===s.C.WIDE?"input-wrap-right":"input-wrap",i=e.type||"radiogroup";return a.createElement(u.Provider,{value:e},a.createElement("div",{className:o()(l,{inline:e.isInline},{grid:e.isGrid}),role:i,"aria-labelledby":t},e.children))}},79454(e,t,n){n.d(t,{F:()=>c});var a=n(84353),r=n(5909),l=n(81478),o=n(89163),i=n(94184),s=n.n(i),u=n(67294);let c=e=>{let{inputID:t,labelType:n,labelID:i}=(0,a.p)(),c=n===r.C.WIDE?"input-wrap-right":"input-wrap";return u.createElement("div",{className:s()(c)},u.createElement(o.Z,Object.assign({},e,{label:null,labelID:i,inputID:t,inputClassName:s()("form-control",e.inputClassName)})),e.errors&&u.createElement(l.Z,{errors:e.errors}))}},75450(e,t,n){n.d(t,{Z:()=>c});var a=n(75741),r=n(99308),l=n(47178),o=n(23279),i=n.n(o);function s(e,t,n,a,r,l,o){try{var i=e[l](o),s=i.value}catch(u){n(u);return}i.done?t(s):Promise.resolve(s).then(a,r)}let u=(0,r.ZP)("@@categorySuggestions"),c=class e extends a.ZP{constructor(...t){super(...t),this.internalLoadCategories=(t,n)=>{let{suggestionsByQuery:r}=this.getState().forum.categories,o=null!==(i=r[t])&&void 0!==i?i:{status:l.Px.PENDING};if(o.status===l.Px.LOADING||o.status===l.Px.SUCCESS)return;var i,u,c=this;let d=(0,a.KP)(e.loadCategories,(u=function*(){let e=yield c.api.get("/categories/search",{params:{query:t,parentCategoryID:n,expand:["breadcrumbs"]}});return e.data},function(){var e=this,t=arguments;return new Promise(function(n,a){var r=u.apply(e,t);function l(e){s(r,n,a,l,o,"next",e)}function o(e){s(r,n,a,l,o,"throw",e)}l(void 0)})}))({query:t});return this.dispatch(d)},this.loadCategories=i()(this.internalLoadCategories,100)}};c.loadCategories=u.async("GET")},78816(e,t,n){var a,r;n.d(t,{mf:()=>a}),(r=a||(a={})).CATEGORIES="categories",r.DEFAULT="default",r.DISCUSSIONS="discussions",r.FLAT="flat",r.HEADING="heading"},60464(e,t,n){n.r(t);var a=n(67294),r=n(42977),l=n(66309),o=n(17878),i=n(57298),s=n(21965),u=n(83643),c=n(75185),d=n(34060),m=n(71933),g=n(98178),p=n(93588),v=n(8975),h=n(79454),f=n(89163),b=n(224),y=n(23279),C=n.n(y),E=n(39607),S=n(78816);function w(e,t,n,a,r,l,o){try{var i=e[l](o),s=i.value}catch(u){n(u);return}i.done?t(s):Promise.resolve(s).then(a,r)}function I(e){var t;let{categoryID:n,discussionsCount:r}=e,[l,y]=(0,a.useState)(!0),[I,O]=(0,a.useState)(!0),[P,D]=(0,a.useState)(),[x,j]=(0,a.useState)(),[L,k]=(0,a.useState)(""),A=(0,u.Er)(L,null,!0),[N,T]=(0,E.il)((t=function*(){yield b.ZP.delete(`/categories/${n}`,{params:{newCategoryID:"move"===P?x:void 0,longRunnerMode:"sync"}}),window.location.reload(),y(!1)},function(){var e=this,n=arguments;return new Promise(function(a,r){var l=t.apply(e,n);function o(e){w(l,a,r,o,i,"next",e)}function i(e){w(l,a,r,o,i,"throw",e)}o(void 0)})}),[n,P,x]),U=(0,a.useMemo)(()=>{var e;return null===(e=A.data)||void 0===e?void 0:e.filter(e=>e.categoryID!==n&&e.displayAs===S.mf.DISCUSSIONS)},[A.data,n]),Z=(0,a.useMemo)(()=>(null==U?void 0:U.map(e=>({label:e.name,value:e.categoryID,data:e})))||[],[U]),H="loading"===N.status,G=C()(e=>{k(e)},100);return a.createElement(o.Z,{isVisible:l,onCancel(){H||y(!1)},size:s.Z.LARGE,title:(0,i.t)("Delete Category"),isConfirmDisabled:!("move"==P&&void 0!==x||"delete"===P&&(!r||I)),isConfirmLoading:H,onConfirm(){T()},confirmTitle:(0,i.t)("Delete Category")},a.createElement(m.w,{isBlurred:H},a.createElement(g.r,{label:(0,i.t)("Action")},a.createElement(c.U7,{onChange:e=>D(e),value:P},a.createElement(d.U,{value:"move",label:"Move content from this category to a replacement category."}),a.createElement(d.U,{value:"delete",label:"Permanently delete all content in this category."}))),"move"===P&&a.createElement(g.r,{label:"Replacement Category",description:(0,i.t)("Heads Up! Moving discussions into a replacement category can result in discussions vanishing (or appearing) if the replacement category has different permissions than the category being deleted.")},a.createElement(h.F,{isClearable:!1,options:Z,menuPlacement:f.s.TOP,value:Z.find(e=>e.value===x),onChange(e){j(null==e?void 0:e.value)},onInputChange(e){G(e)},maxHeight:150})),"delete"===P&&void 0!==r&&a.createElement(g.r,{label:(0,i.t)("Delete All"),description:a.createElement("span",{style:{color:"red"},dangerouslySetInnerHTML:{__html:(0,v.sprintf)((0,i.t)(r>1?"<strong>%s</strong> discussion will be deleted. There is no undo and it will not be logged.":"<strong>%s</strong> discussions will be deleted. There is no undo and they will not be logged."),r)}})},a.createElement(c.U7,null,a.createElement(p.S,{checked:I,onChange:O,label:"Yes, permanently delete it all."})))))}var O=n(91328),P=n(20694),D=n(19335),x=n(45607),j=n(73819),L=n(52303);function k(e,t,n,a,r,l,o){try{var i=e[l](o),s=i.value}catch(u){n(u);return}i.done?t(s):Promise.resolve(s).then(a,r)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){A(e,t,n[t])})}return e}function T(){let e=document.getElementById("Form_ImageUpload-dot-Limits-dot-Enabled");if(e){let t="dimensionsDisabled",n=Array.from(document.getElementsByClassName("ImageUploadLimitsDimensions"));e.checked&&n.forEach(e=>{e.classList.remove(t)}),e.addEventListener("click",()=>{e.checked?n.forEach(e=>{e.classList.remove(t)}):n.forEach(e=>{e.classList.add(t)})})}}(0,P.f)(".suggestedTextInput-option",(0,O.h)({forDashboard:!0}).option),(0,x.Tk)("CategoryPicker",D.T,{overwrite:!0}),(0,x.Tk)("CommunityMemberInput",function(e){var t,n,r,l,o;let[i,s]=(0,a.useState)(""),u=function(e,t){let[n,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let t=setTimeout(()=>{r(e)},300);return()=>{clearTimeout(t)}},[e]),n}(i,300),{suggestions:c,isLoading:d}=function(e){var t,n;let[r,l]=(0,a.useState)(!1),[o,i]=(0,a.useState)({}),s=(0,a.useMemo)(()=>Object.keys(o).includes(e),[o,e]),u=(0,a.useCallback)((n=(t=function*(e){l(!0);let t=yield b.ZP.get("/users/by-names",{params:{name:`${e}*`,order:"name",page:1,limit:5}});i(n=>{var a,r;return a=N({},n),r=(r={[e]:t.data},r),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n.push.apply(n,a)}return n})(Object(r)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(r,e))}),a})},function(){var e=this,n=arguments;return new Promise(function(a,r){var l=t.apply(e,n);function o(e){k(l,a,r,o,i,"next",e)}function i(e){k(l,a,r,o,i,"throw",e)}o(void 0)})}),function(e){return n.apply(this,arguments)}),[]),c=(0,a.useMemo)(()=>{if(s){var t,n;return l(!1),null!==(n=null===(t=o[e])||void 0===t?void 0:t.map(e=>({value:e.name,label:e.name,data:N({},e)})))&&void 0!==n?n:[]}e&&e.length>2&&u(e)},[o,e,s]);return{suggestions:c,isLoading:r}}(u),[m,g]=(0,a.useState)(),p=(0,a.useMemo)(()=>(null!=m?m:[]).map(({value:e})=>e).join(","),[m]);return e.multiple?a.createElement("span",null,a.createElement(j.n,Object.assign({},e,{placeholder:null!==(t=e.placeholder)&&void 0!==t?t:(0,L.t)("Search..."),isLoading:d,onInputChange:s,label:null!==(n=e.label)&&void 0!==n?n:"",showIndicator:!0,options:c,maxHeight:e.maxHeight,onChange:e=>g(e)})),a.createElement("input",{value:p,"aria-hidden":!0,type:"hidden",tabIndex:-1,name:e.name,hidden:!0})):a.createElement(f.Z,Object.assign({},e,{placeholder:null!==(r=e.placeholder)&&void 0!==r?r:(0,L.t)("Search..."),onInputChange:s,isLoading:d,onChange(t){e.onChange&&e.onChange([t])},options:c,label:null!==(l=e.label)&&void 0!==l?l:"",value:(null!==(o=e.value)&&void 0!==o?o:[])[0],maxHeight:e.maxHeight}))},{overwrite:!0}),(0,i.Um)(T),(0,i.$V)(T),(0,l.x$)("click",".dropdown-menu-link-delete-delete",(e,t)=>{e.preventDefault();let n=t.getAttribute("data-categoryid"),l=t.getAttribute("data-countDiscussions");null!==n&&(0,r.wx)(a.createElement(I,{categoryID:parseInt(n),discussionsCount:null!==l?parseInt(l):void 0}))})},83643(e,t,n){n.d(t,{Er:()=>d,ZP:()=>m});var a=n(57298),r=n(75450),l=n(67294),o=n(46458),i=n(47178),s=n(89163),u=n(75741),c=n(73819);function d(e,t,n){let a=(0,u.LO)(r.Z),s=(0,o.v9)(t=>{var n;return null!==(n=t.forum.categories.suggestionsByQuery[e])&&void 0!==n?n:{status:i.Px.PENDING}});return(0,l.useEffect)(()=>{(e||n)&&a.loadCategories(e,t)},[e,t,n]),s}let m=function(e){var t,n,r;let[o,u]=(0,l.useState)(""),[m,g]=(0,l.useState)(!1),p=d(o,e.parentCategoryID,m),v=()=>{g(!0)},{multiple:h}=e,f;if(p.status===i.Px.SUCCESS&&p.data){let b=p.data;e.displayAs&&(b=b.filter(t=>t.displayAs===e.displayAs)),f=b.map(e=>{var t,n,a,r;let l,o=null!==(n=null===(t=e.breadcrumbs)||void 0===t?void 0:t.length)&&void 0!==n?n:0;return o>1&&(l=null===(a=e.breadcrumbs)||void 0===a?void 0:null===(r=a[o-2])||void 0===r?void 0:r.name),{value:e.categoryID,label:e.name,data:{parentLabel:l}}})}let y=p.status===i.Px.LOADING;return h?l.createElement(c.n,Object.assign({onFocus:v},e,{placeholder:(0,a.t)("Search..."),isLoading:y,onInputChange:u,label:null!==(t=e.label)&&void 0!==t?t:(0,a.t)("Community Category"),showIndicator:!0,options:f,maxHeight:e.maxHeight})):l.createElement(s.Z,Object.assign({onFocus:v},e,{placeholder:(0,a.t)("Search..."),onInputChange:u,isLoading:y,onChange(t){e.onChange&&e.onChange([t])},options:f,label:null!==(n=e.label)&&void 0!==n?n:(0,a.t)("Community Category"),value:(null!==(r=e.value)&&void 0!==r?r:[])[0],maxHeight:e.maxHeight}))}}}]);