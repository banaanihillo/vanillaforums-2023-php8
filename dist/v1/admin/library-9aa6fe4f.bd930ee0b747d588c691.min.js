"use strict";(self.webpackChunkvanillaadmin=self.webpackChunkvanillaadmin||[]).push([[858],{75799(e,t,r){r.d(t,{F:()=>v});var n=r(67294),s=r(23410),a=r(59736),i=r(83386),o=r(75994),l=r(10141),u=r(11590);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let m=()=>{let e=(0,o.OF)(),t=(0,u.iv)(d(p(d(p({},i.W.font(p({},e.fontSizeAndWeightVars("medium")))),{zIndex:1}),i.W.padding({horizontal:e.gutter.size,vertical:e.gutter.size}),i.W.border(),(0,l.kL)().dropDown()),{background:s.w.colorOut(e.mainColors.bg),width:280,maxHeight:120,overflowX:"hidden",overflowY:"auto","&:not(last-of-type)":{marginTop:(0,a.dd)(e.gutter.size)},p:{margin:0}}),";label:Toast-styles-root;"),r=(0,u.iv)({name:"goseef-Toast-styles-closeButton",styles:"position:absolute;top:16px;right:0;label:Toast-styles-closeButton;"});return{root:t,closeButton:r}};var f=r(34098),y=r(76048),b=r(29368);function v(e){let{children:t,role:r,className:s,visibility:a,autoCloseDuration:i,onVisibilityChange:o,dismissible:l}=e,u=m(),[c,p]=(0,n.useState)(null==a||a);return(0,n.useEffect)(()=>{i&&c&&setTimeout(()=>p(!1),i)},[c,i]),(0,n.useEffect)(()=>{o&&o(c)},[c,o]),(0,n.useEffect)(()=>{p(!!a)},[a]),n.createElement(y.k,{isEntered:c,fromDirection:y.a.LEFT},n.createElement("div",{className:(0,f.cx)(u.root,s),role:null!=r?r:"status","aria-live":"assertive","aria-atomic":!0},l&&n.createElement(b.Z,{className:u.closeButton,onClick:()=>p(!1),compact:!0}),t))}},33691(e,t,r){r.d(t,{VW:()=>b,pm:()=>y});var n=r(75799),s=r(11590),a=r(75994),i=r(83386);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let l=()=>{var e,t;let r=(0,a.OF)(),n=(0,s.iv)((e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}({display:"flex",flexDirection:"column-reverse",position:"fixed",top:0,left:0,height:"100vh",width:"auto",pointerEvents:"none"},i.W.padding({all:r.gutter.size})),t=(t={"& > *":{pointerEvents:"auto"}},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e),";label:ToastContext-styles-area;");return{area:n}};var u=r(98769),c=r(67294);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let f=c.createContext({toasts:null,addToast:()=>"",updateToast(){},removeToast(){}});function y(){return(0,c.useContext)(f)}function b(e){let{children:t}=e,[r,n]=(0,c.useState)(null),s=e=>{let t=(0,u.k$)(),r=m(d({},e),{toastID:t,visibility:!0});return n(e=>e?[...e,r]:[r]),t};window.__LEGACY_ADD_TOAST__=s;let a=(e,t)=>{r&&t&&n(r=>r?r.map(r=>r.toastID===e?m(d({},r,t),{toastID:r.toastID}):r):r)},i=e=>{r&&(n(t=>t?t.map((t,n)=>t.toastID===e?m(d({},r[n]),{visibility:!1}):t):t),setTimeout(()=>{n(t=>t?t.filter(t=>t.toastID!==e):t)},2e3))};return c.createElement(f.Provider,{value:{toasts:r,addToast:s,updateToast:a,removeToast:i}},c.createElement(v,null),t)}function v(){let e=l(),{toasts:t}=(0,c.useContext)(f);return c.createElement(c.Fragment,null,t&&t.length>0&&c.createElement("section",{className:e.area},c.createElement(c.Fragment,null,t.filter(e=>e.persistent).map(e=>{var t;return c.createElement(n.F,{key:e.toastID,visibility:null===(t=e.visibility)||void 0===t||t,autoCloseDuration:e.autoDismiss?3e3:void 0,dismissible:e.dismissible,className:e.className},e.body)}),t.filter(e=>!e.persistent).map(e=>{var t;return c.createElement(n.F,{key:e.toastID,visibility:null===(t=e.visibility)||void 0===t||t,autoCloseDuration:e.autoDismiss?3e3:void 0,dismissible:e.dismissible,className:e.className},e.body)}))))}},31600(e,t,r){r.d(t,{N:()=>C});var n=r(67294),s=r(33188),a=r(57298),i=r(24027),o=r(38918),l=r(47178),u=r(81478),c=r(52303),p=r(30731),d=r(10914),m=r(11590),f=r(34937),y=r(75994),b=r(83386),v=r(97923),g=r(59736);function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){O(e,t,r[t])})}return e}let E=()=>{var e,t;let r=(0,y.OF)(),n=(0,m.iv)((e=h({minHeight:(0,f._)().sizing.minHeight},(0,v.Mh)().middleLeft()),t=(t={"& button":h({margin:(0,g.dd)("3px")},b.W.font(h({},r.fontSizeAndWeightVars("medium"))))},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e),";label:ThemePreviewToast-style-toastActions;");return{toastActions:n}};var P=r(33691);function S(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function I(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){S(a,n,s,i,o,"next",e)}function o(e){S(a,n,s,i,o,"throw",e)}i(void 0)})}}function C(){var e,t,r;let{applyStatus:m,cancelStatus:f}=(0,o.n)(),[y,b]=(0,n.useState)((0,a.xZ)("themePreview",null)),{putCurrentTheme:v,putPreviewTheme:g,patchThemeWithRevisionID:O}=(0,i.ib)(),[h,S]=(0,n.useState)(!1),[C,D]=(0,n.useState)(!1),w=null!==(e=null==y?void 0:y.revisionID)&&void 0!==e&&e,j=E(),{addToast:A,updateToast:U}=(0,P.pm)(),N=(t=I(function*(){if(y){if(w){S(!0);let e=yield O({themeID:y.themeID,revisionID:y.revisionID});e&&(S(!1),D(!0)),g({themeID:"",revisionID:void 0,type:i.N5.APPLY})}else v(y.themeID),g({themeID:"",type:i.N5.APPLY})}}),function(){return t.apply(this,arguments)}),R=(r=I(function*(){g({themeID:"",type:i.N5.CANCEL})}),function(){return r.apply(this,arguments)}),x=(0,n.useMemo)(()=>f.status===l.Px.LOADING||f.status===l.Px.SUCCESS,[f]),L=(0,n.useMemo)(()=>m.status===l.Px.LOADING||m.status===l.Px.SUCCESS||h,[m,h]),T=(0,n.useMemo)(()=>w?(0,c.t)("Restore"):(0,c.t)("Apply"),[w]);(0,n.useEffect)(()=>{y&&(y.name&&m.status===l.Px.SUCCESS||f.status===l.Px.SUCCESS||C)&&(window.location.href=w?`/appearance/style-guides/${y.themeID}/revisions`:y.redirect)});let[_,Z]=(0,n.useState)(),k=(0,n.useMemo)(()=>y?n.createElement(n.Fragment,null,"You are previewing the ",n.createElement("b",null,y&&y.name)," theme.",m.error&&n.createElement(u.Z,{errors:[m.error]}),n.createElement("div",{className:j.toastActions},n.createElement(p.Z,{onClick:N,buttonType:s.q.TEXT},L?n.createElement(d.Z,{buttonType:s.q.TEXT}):n.createElement(n.Fragment,null,T)),n.createElement(p.Z,{onClick:R,buttonType:s.q.TEXT_PRIMARY},x?n.createElement(d.Z,{buttonType:s.q.TEXT_PRIMARY}):(0,c.t)("Cancel")))):null,[T,m.error,L,x,y]);return(0,n.useEffect)(()=>{if(k&&!_){let e=A({persistent:!0,body:k});Z(e)}k&&_&&U(_,{body:k})},[k]),null}},38918(e,t,r){r.d(t,{Z:()=>u,n:()=>c});var n=r(47178),s=r(87219),a=r(76983),i=r(24027),o=r(46458);let l={applyStatus:{status:n.Px.PENDING},cancelStatus:{status:n.Px.PENDING}},u=(0,s.Uy)((0,a.reducerWithInitialState)(l).case(i.ZP.putCurrentThemeACs.started,(e,t)=>(e.applyStatus.status=n.Px.LOADING,e.applyStatus.data={themeID:t.themeID},e)).case(i.ZP.putCurrentThemeACs.done,(e,t)=>(e.applyStatus.status=n.Px.SUCCESS,e.applyStatus.error=void 0,e)).case(i.ZP.putCurrentThemeACs.failed,(e,t)=>(e.applyStatus.status=n.Px.ERROR,e.applyStatus.error=t.error,e)).case(i.ZP.putPreviewThemeACs.started,(e,t)=>(t.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.LOADING),e.cancelStatus.data={themeID:t.themeID},e)).case(i.ZP.putPreviewThemeACs.done,(e,t)=>(t.params.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.SUCCESS),e.cancelStatus.error=void 0,e)).case(i.ZP.putPreviewThemeACs.failed,(e,t)=>(e.cancelStatus.status=n.Px.ERROR,e.cancelStatus.error=t.error,e)));function c(){return(0,o.v9)(e=>e.themePreviewToaster)}},90432(e,t,r){r.d(t,{HW:()=>V});var n=r(11590);r(47178);var s=r(44765),a=r(4483);r(92234);var i=r(72588);r(62425),r(21965);var o=r(67294),l=r(92111),u=r(94982),c=r(75994),p=r(83386),d=r(52239),m=r(59736),f=r(28236),y=r(23410),b=r(75864),v=r(85938);function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){g(e,t,r[t])})}return e}let h=(0,f.yI)(e=>{var t,r;let n=(0,b.Cg)("userCard",e),s=(0,c.OF)(),a=n("container",{spacing:s.gutter.size}),i=n("button",{minWidth:120,mobile:{minWidth:0}}),o=n("name",{font:v.L.font(O({},s.fontSizeAndWeightVars("large","bold"))),margin:v.L.spacing({top:9})}),l=n("label",{border:v.L.border({color:s.mainColors.primary,radius:3}),padding:v.L.spacing({horizontal:10}),margin:v.L.spacing({top:12}),font:v.L.font({color:s.mainColors.primary,size:10,lineHeight:1.5,transform:"uppercase"})}),u=n("containerWithBorder",{color:y.w.colorOut(s.border.color)}),p=n("message",{font:v.L.font({size:s.fonts.size.small}),margin:v.L.spacing({top:12})}),d=n("headerLink",{color:y.w.colorOut(s.mainColors.fg),font:v.L.font((t=O({},s.fontSizeAndWeightVars("small")),r=(r={align:"center"},r),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),margin:v.L.spacing({top:8}),minHeight:(0,m.dd)(24)});return{container:a,button:i,name:o,label:l,containerWithBorder:u,message:p,headerLink:d}});var E=r(85819);function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){P(e,t,r[t])})}return e}function I(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let C=(0,f.yI)((e={})=>{var t;let r=h(),s=(0,u.J)().mediaQueries(),a=(0,c.OF)();(0,n.hi)({"[data-reach-popover]":{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:1050}},";label:UserCard-styles-userCardClasses;");let i=(0,n.iv)(I(S({display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"center"},p.W.padding({all:r.container.spacing})),{flexWrap:"wrap"}),";label:UserCard-styles-container;"),o=(0,n.cx)(i,(0,n.iv)({borderTop:`1px solid ${r.containerWithBorder.color}`},";label:UserCard-styles-containerWithBorder;")),f=(0,n.iv)({name:"14zkbwb-UserCard-styles-row",styles:"display:flex;width:100%;justify-content:center;label:UserCard-styles-row;"}),y=(0,n.iv)(S({maxWidth:(0,E.aQ)(100)},{"&&":{minWidth:(0,m.dd)(r.button.minWidth)}},s.oneColumnDown(S({},{"&&":{width:(0,E.aQ)(100),minWidth:(0,m.dd)(r.button.mobile.minWidth)}}))),";label:UserCard-styles-button;"),b=(0,n.iv)(I(S({},p.W.padding({horizontal:r.container.spacing/2})),{flexWrap:"wrap"}),";label:UserCard-styles-buttonsContainer;"),v=(0,n.iv)(S({maxWidth:(0,E.aQ)(100)},p.W.padding({top:0,bottom:r.container.spacing,horizontal:r.container.spacing/2}),s.oneColumnDown({"&&":{flexGrow:1,flexBasis:(0,E.aQ)(50)}})),";label:UserCard-styles-buttonContainer;"),g=(0,n.iv)(I(S({},p.W.margin(r.name.margin),p.W.font(r.name.font)),{width:(0,E.aQ)(100),textAlign:"center"}),s.oneColumnDown({fontSize:1.25*r.name.font.size}),";label:UserCard-styles-name;"),O=(0,n.iv)(S({},p.W.padding(r.label.padding),p.W.font(r.label.font),p.W.border(r.label.border),p.W.margin(r.label.margin)),";label:UserCard-styles-label;"),P=(0,n.iv)(S({borderRight:(0,d.$N)({})},p.W.padding({right:a.spacer.size/2,left:a.spacer.size})),";label:UserCard-styles-statLeft;"),C=(0,n.iv)(S({},p.W.padding({right:a.spacer.size,left:a.spacer.size/2})),";label:UserCard-styles-statRight;"),D=(0,n.iv)({name:"bezbfl-UserCard-styles-header",styles:"position:relative;label:UserCard-styles-header;"}),w=p.W.clickable.itemState({default:r.headerLink.color}),j=(0,n.iv)(I(S({},w),{"&&":S({minHeight:r.headerLink.minHeight,display:"inline-flex",alignItems:"center"},p.W.font(r.headerLink.font),p.W.margin(r.headerLink.margin))}),";label:UserCard-styles-headerLink;"),A=(0,n.iv)({name:"m7jc2-UserCard-styles-metas",styles:"&&{text-align:center;};label:UserCard-styles-metas;"}),U=(0,n.iv)(S({},p.W.margin({vertical:0})),";label:UserCard-styles-metaItem;"),N=(0,l.Gv)(),R=(0,n.iv)(S({},{"&&&":S(I(S({},p.W.absolute.topRight()),{width:(0,m.dd)(N.sizing.height),height:(0,m.dd)(N.sizing.height)}),s.oneColumnDown({height:(0,m.dd)(N.sizing.height)}))}),";label:UserCard-styles-close;"),x=(0,n.iv)(I(S({},p.W.margin({top:r.container.spacing})),{display:"block"}),";label:UserCard-styles-userPhoto;"),L=(0,n.iv)(S({},p.W.font(r.message.font),p.W.margin(r.message.margin)),";label:UserCard-styles-message;");return{container:i,containerWithBorder:o,buttonsContainer:b,button:y,buttonContainer:v,name:g,label:O,header:D,headerLink:j,statLeft:P,statRight:C,close:R,userPhoto:x,row:f,metas:A,metaItem:U,message:L}});var D=r(30731),w=r(33188),j=r(28590),A=r(81612),U=r(24821),N=r(91589);r(70563);var R=r(92097),x=r(88791),L=r(57298);r(52808);var T=r(21663),_=r(39607);let Z="This user has been banned.",k="Banned";function B(e){var t,r;let{zIndex:l}=(0,_.DE)(),u=C({zIndex:l}),{user:c}=e,p=(0,i.Fy)(),d=p===i.uv.MOBILE||p===i.uv.XS,m=d?j.pz.XLARGE:j.pz.LARGE,f=(0,L.xZ)("context.conversationsEnabled",!1),y=(0,a.Fk)(),b=c.userID===y,v=null!==(t=null==c?void 0:c.private)&&void 0!==t&&t,g=(0,s.Fs)("personalInfo.view"),O=null!==(r=null==c?void 0:c.banned)&&void 0!==r?r:0,h=1===O,E=(0,L.xZ)("ui.bannedPrivateProfile","0");E=""===E?"0":"1";let P="0"!==E,S=(0,o.useMemo)(()=>{let{label:e,title:t}=c;return h?o.createElement("div",{className:u.label},(0,L.t)(k)):t?o.createElement("div",{className:u.label},t):!t&&e?o.createElement("div",{className:u.label,dangerouslySetInnerHTML:{__html:e}}):null},[h,c]);return(v||h&&P)&&!g&&!b?o.createElement(G,{user:c,onClose:e.onClose}):o.createElement(o.Fragment,null,o.createElement("div",{className:u.header},d&&o.createElement(D.Z,{className:u.close,onClick:e.onClose,buttonType:w.q.ICON},o.createElement(o.Fragment,null,o.createElement(A.e9,null),o.createElement(U.Z,null,(0,L.t)("Close"))))),o.createElement(z,null,o.createElement("div",{className:u.row},o.createElement(j.cy,{userInfo:c,size:m,className:u.userPhoto})),o.createElement("div",{className:u.row},o.createElement("div",{className:u.name},c.name)),S&&o.createElement("div",{className:u.row},S),c.email&&o.createElement(s.ZP,{permission:"personalInfo.view"},o.createElement("div",{className:u.row},o.createElement("a",{className:u.headerLink,href:`mailto:${c.email}`},c.email))),B.extraLinks.map((e,t)=>o.createElement(e.component,{key:t,userID:c.userID})),h&&o.createElement("div",{className:(0,n.cx)(u.row,u.message)},o.createElement("div",null,(0,L.t)(Z)))),o.createElement("div",{className:(0,n.cx)(u.row,u.buttonsContainer)},o.createElement(W,{to:(0,L.tI)(c.name)},(0,L.t)("View Profile")),o.createElement(s.ZP,{permission:"conversations.add"},f&&!O&&o.createElement(W,{to:`/messages/add/${c.name}`},(0,L.t)("Message"))),B.extraButtons.map((e,t)=>o.createElement(e.component,{key:t,userID:c.userID}))),o.createElement(z,{borderTop:!0},o.createElement(R.k,{to:(0,L.nQ)(c.name),value:c.countDiscussions,label:(0,L.t)("Discussions"),classNames:u.statLeft}),o.createElement(R.k,{to:(0,L._F)(c.name),value:c.countComments,label:(0,L.t)("Comments"),classNames:u.statRight})),B.extraContent.map((e,t)=>o.createElement(z,{key:t,borderTop:!0},o.createElement(e.component,{userID:c.userID}))),o.createElement(z,{borderTop:!0},o.createElement(N.HX,{className:u.metas},o.createElement(N.y1,{className:u.metaItem},(0,L.t)("Joined"),": ",o.createElement(T.Z,{timestamp:c.dateInserted})),c.dateLastActive&&o.createElement(N.y1,{className:u.metaItem},(0,L.t)("Last Active"),": ",o.createElement(T.Z,{timestamp:c.dateLastActive})))))}function G(e){var t,r,s;let{user:a,userFragment:l}=e,u=C(),c=(0,i.Fy)(),p=c===i.uv.MOBILE||c===i.uv.XS,d=p?j.pz.XLARGE:j.pz.LARGE,m=1===(null!==(r=null!==(t=null==a?void 0:a.banned)&&void 0!==t?t:null==l?void 0:l.banned)&&void 0!==r?r:0),f=m?(0,L.t)(k):(0,L.t)("Private"),y=m?(0,L.t)(Z):(0,L.t)("This user's profile is private."),b=null!==(s=null==a?void 0:a.name)&&void 0!==s?s:null==l?void 0:l.name;return o.createElement(o.Fragment,null,o.createElement("div",{className:u.header}),o.createElement(z,null,o.createElement("div",{className:u.row},o.createElement(j.cy,{userInfo:null!=a?a:l,size:d,className:u.userPhoto})),o.createElement("div",{className:u.row},o.createElement("div",{className:u.name},b)),o.createElement("div",{className:u.row},o.createElement("div",{className:u.label},f)),o.createElement("div",{className:(0,n.cx)(u.row,u.message)},o.createElement("div",null,y))))}function W(e){var t;let{zIndex:r}=(0,_.DE)(),n=C({zIndex:r});return o.createElement("div",{className:n.buttonContainer},o.createElement(x.Z,{disabled:e.disabled,to:null!==(t=e.to)&&void 0!==t?t:"",buttonType:w.q.STANDARD,className:n.button,target:e.target},e.children))}function z(e){let{borderTop:t}=e,{zIndex:r}=(0,_.DE)(),n=C({zIndex:r});return o.createElement("div",{className:t?n.containerWithBorder:n.container},e.children)}B.extraContent=[],B.registerContent=function(e){B.extraContent.find(t=>t.key===e.key)||B.extraContent.push(e)},B.extraButtons=[],B.registerButtons=function(e){B.extraButtons.find(t=>t.key===e.key)||B.extraButtons.push(e)},B.extraLinks=[],B.registerLinks=function(e){B.extraLinks.find(t=>t.key===e.key)||B.extraLinks.push(e)},r(79089);var F=r(77039);function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e,t){var r,n,s,a,i;let o=(0,F.MN)(e,t),l=(null!==(r=null==t?void 0:t.width)&&void 0!==r?r:0)/2,u=(null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0)/2,c=(null!==(s=null==e?void 0:e.left)&&void 0!==s?s:0)+u+window.pageXOffset-l;return c<16||c+2*l>window.innerWidth-16?o:(a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){M(e,t,r[t])})}return e}({},o),i=(i={left:c},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a)}r(52303)},90226(e,t,r){r.d(t,{Z:()=>m});var n=r(67294),s=r(57298),a=r(47178),i=r(74367),o=r(95774),l=r(224),u=r(46458),c=r(73819);class p extends n.Component{render(){let{suggestions:e,label:t}=this.props,r;return e.status===a.Px.SUCCESS&&e.data&&(r=e.data.map(e=>({value:e.userID,label:e.name}))),n.createElement(c.n,{label:t?(0,s.t)(t):(0,s.t)("Author"),placeholder:(0,s.t)("Select..."),options:r,isLoading:e.status===a.Px.LOADING||e.status===a.Px.PENDING,onChange:this.props.onChange,value:this.props.value,onInputChange:this.onInputChange,className:this.props.className,maxHeight:this.props.maxHeight})}constructor(...e){super(...e),this.onInputChange=e=>{(e=e.trim())&&this.props.suggestionActions.loadUsers(e)}}}let d=(0,u.$j)(o.Z.mapStateToProps,e=>({suggestionActions:new i.Z(e,l.ZP)})),m=d(p)},44765(e,t,r){r.d(t,{Fs:()=>c,R9:()=>n,ZP:()=>u});var n,s,a=r(47178),i=r(7837),o=r(67294),l=r(18626);function u(e){var t,r;if((0,l.TE)(),!e.permission)return o.createElement(o.Fragment,null,e.children);let s=c(e.permission,{mode:null!==(t=e.mode)&&void 0!==t?t:null!=e.resourceID?n.RESOURCE_IF_JUNCTION:n.GLOBAL_OR_RESOURCE,resourceType:e.resourceType,resourceID:e.resourceID})?e.children:null!==(r=e.fallback)&&void 0!==r?r:null;return o.createElement(o.Fragment,null,s)}function c(e,t){let{permissions:r}=(0,i.ZP)().getState().users,s=e;if(Array.isArray(s)||(s=[s]),!r.data||r.status!==a.Px.SUCCESS)return!1;if(r.data.isAdmin)return!0;t||(t={mode:n.GLOBAL_OR_RESOURCE});let{resourceID:o,resourceType:l}=t;l||(l="global",o=null);let u=!1;if(null!=o&&null!=l){var c,p,d,m,f;let y=null===(c=r.data.junctionAliases)||void 0===c?void 0:c[l];y&&(o=null!==(m=null!==(d=y[o])&&void 0!==d?d:y[o.toString()])&&void 0!==m?m:o);let b=null!==(f=null===(p=r.data.junctions)||void 0===p?void 0:p[l])&&void 0!==f?f:null;b&&(u=b.includes(o))}let v=r.data.permissions.filter(e=>{let r="global"===e.type,s=e.type===l&&e.id===o;switch(t.mode){case n.RESOURCE_IF_JUNCTION:return u?s:r;case n.GLOBAL:return r;case n.GLOBAL_OR_RESOURCE:return!0;case n.RESOURCE:return s}}),g=!1;return v.forEach(e=>{for(let[t,r]of Object.entries(e.permissions))s.includes(t)&&r&&(g=!0)}),g}(s=n||(n={})).GLOBAL="global",s.RESOURCE="resource",s.GLOBAL_OR_RESOURCE="globalOrResource",s.RESOURCE_IF_JUNCTION="resourceIfJunction"},45835(e,t,r){r.d(t,{Z:()=>d,_:()=>m});var n=r(47178),s=r(75741),a=r(99308),i=r(57557),o=r.n(i);function l(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){l(a,n,s,i,o,"next",e)}function o(e){l(a,n,s,i,o,"throw",e)}i(void 0)})}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let p=(0,a.Jy)("@@users"),d=class e extends s.ZP{constructor(...t){super(...t),this.getMe=()=>{let t=this.getState().users.current;if(t.status===n.Px.LOADING)return;var r=this;let a=(0,s.KP)(e.getMeACs,u(function*(){let e=yield r.api.get("/users/me");return null==e?void 0:e.data}))();return this.dispatch(a)},this.getPermissions=()=>{let t=this.getState().users.permissions;if(t.status!==n.Px.PENDING)return;var r=this;let a=(0,s.KP)(e.getPermissionsACs,u(function*(){let e=yield r.api.get("/users/$me/permissions?expand=junctions");return null==e?void 0:e.data}))();return this.dispatch(a)},this.checkCountData=()=>{let t=new Date().getTime(),{lastRequested:r}=this.getState().users.countInformation;if(null!==r&&t<r+60)return;var n=this;let a=(0,s.KP)(e.getCountsACs,u(function*(){let e=yield n.api.get("/users/me-counts");return e.data}))();return this.dispatch(a)},this.getUserByID=t=>{let{userID:r}=t;var n=this;let a=(0,s.KP)(e.getUserACs,u(function*(){let e=yield n.api.get(`/users/${r}/?expand[]=all`);return e.data}))({userID:r});return this.dispatch(a)},this.postUser=t=>{var r=this;let n=(0,s.KP)(e.postUserACs,u(function*(){let e=yield r.api.post("/users",t);return e.data}))(t);return this.dispatch(n)},this.clearInviteUsers=this.bindDispatch(e.clearInviteUsersAC),this.inviteUsersByGroupID=t=>{let{groupID:r,userIDs:n,emails:a}=t,i={userIDs:n,emails:a};var o=this;let l=(0,s.KP)(e.inviteUsersACs,u(function*(){let e=yield o.api.post(`/groups/${r}/invitations`,i);return e.data}))(t);return this.dispatch(l)},this.updateIDs=({userID:t,IDs:r})=>{this.dispatch(e.updateInviteeIDsAC({userID:t,IDs:r}))},this.updateEmails=({userID:t,emails:r})=>{this.dispatch(e.updateInviteeEmailsAC({userID:t,emails:r}))},this.updateEmailsString=({userID:t,emailsString:r})=>{this.dispatch(e.updateInviteeEmailsStringAC({userID:t,emailsString:r}))},this.updateInvitees=({userID:t,invitees:r})=>{this.dispatch(e.updateInviteesAC({userID:t,invitees:r}))},this.patchUser=t=>{let{userID:r}=t,n=`${r}-${t.patchID}`;var a,i,l=this;let p=(0,s.KP)(e.patchUserAC,u(function*(){let e=yield l.api.patch(`/users/${r}`,o()(t,"patchID"));return e.data}))((a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},t),i=(i={patchID:n},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a));return this.dispatch(p)}}};function m(){return(0,s.LO)(d)}d.getMeACs=p.async("GET_ME"),d.getPermissionsACs=p.async("GET_PERMISSIONS"),d.getCountsACs=p.async("GET_ME_COUNTS"),d.getUserACs=p.async("GET_USER"),d.postUserACs=p.async("POST_USER"),d.clearInviteUsersAC=p("CLEAR_INVITE_USER"),d.inviteUsersACs=p.async("INVITE_USERS"),d.updateInviteeIDsAC=p("UPDATE_INVITEE_IDS"),d.updateInviteeEmailsAC=p("UPDATE_INVITEE_EMAIlS"),d.updateInviteeEmailsStringAC=p("UPDATE_INVITEE_EMAIlS_STRING"),d.updateInviteesAC=p("UPDATE_INVITEES"),d.patchUserAC=p.async("PATCH_USER")},74367(e,t,r){r.d(t,{Z:()=>c});var n=r(98769),s=r(47178),a=r(75741),i=r(95774),o=r(224),l=r(23279),u=r.n(l);let c=class e extends a.ZP{static setActiveAC(t,r){return a.ZP.createAction(e.SET_ACTIVE_SUGGESTION,{suggestionID:t,suggestionIndex:r})}static filterSuggestions(e,t){let r=Intl.Collator("en",{usage:"search",sensitivity:"base",ignorePunctuation:!0,numeric:!0});return e.filter(e=>{if(e.name.length<t.length)return!1;let n=e.name.substring(0,t.length);return 0===r.compare(n,t)})}constructor(...t){super(...t),this.setActive=this.bindDispatch(e.setActiveAC),this.interalLoadUsers=t=>this.dispatch((r,a)=>{let l=i.Z.selectSuggestionsTrie(a()),u=l.getValue(t);if(null!=u)switch(u.status){case s.Px.SUCCESS:if(u.data)return r(e.loadUsersACs.response({data:u.data,status:200},{username:t}));break;case s.Px.LOADING:return;case s.Px.ERROR:if(u.error)return r(e.loadUsersACs.error(u.error,{username:t}))}let c=l.getValueFromPartialsOfWord(t);if(null!=c)switch(c.status){case s.Px.SUCCESS:if(c.data&&c.data.length<e.USER_LIMIT)return r(e.loadUsersACs.response({data:e.filterSuggestions(c.data,t),status:200},{username:t}));case s.Px.ERROR:case s.Px.PENDING:}r(e.loadUsersACs.request({username:t}));let p={name:t+"*",order:"mention",limit:e.USER_LIMIT};return o.ZP.get("/users/by-names/",{params:p}).then(n=>{if(n.status>=500)throw Error(n.data);n.data=n.data.map(e=>(e.domID="mentionSuggestion"+e.userID,e)),r(e.loadUsersACs.response(n,{username:t}))}).catch(s=>{(0,n.H)(s),r(e.loadUsersACs.error(s,{username:t}))})}),this.loadUsers=u()(this.interalLoadUsers,50)}};c.SET_ACTIVE_SUGGESTION="@@mentions/SET_ACTIVE_SUGGESTION",c.LOAD_USERS_REQUEST="@@mentions/GET_USERS_REQUEST",c.LOAD_USERS_RESPONSE="@@mentions/LOAD_USERS_RESPONSE",c.LOAD_USERS_ERROR="@@mentions/LOAD_USERS_ERROR",c.USER_LIMIT=50,c.loadUsersACs=a.ZP.generateApiActionCreators(c.LOAD_USERS_REQUEST,c.LOAD_USERS_RESPONSE,c.LOAD_USERS_ERROR,{},{})},95774(e,t,r){r.d(t,{Z:()=>c});var n=r(47178);let s=class{insert(e,t){let r=this.root;for(let n=0;n<e.length;n++){let s=e[n];if(r.children||(r.children={}),!(s in r.children)){let a=n!==e.length-1?{}:{children:{}};r.children[s]=a}r=r.children[s]}r.value=t}getNode(e){let t=this.root;if(void 0===e)return t;for(let r=0;r<e.length;r++){let n=e.charAt(r);if(!t.children||!t.children[n])return null;t=t.children[n]}return t}getValue(e){let t=this.getNode(e);return t&&t.value||null}getValueFromPartialsOfWord(e){let t=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,e.length);for(let r=t;r>0;r--){let n=e.substring(0,r),s=this.getValue(n);if(null!=s)return s}return null}constructor(){this.MAX_PARTIAL_LOOKUP_ITERATIONS=10,this.root={}}};var a=r(74367),i=r(34068);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let c=class e{static mapStateToProps(t){let r=l({},e.stateSlice(t)),{trie:s}=r,a=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(r,["trie"]),i=r.lastSuccessfulUsername&&s.getValue(r.lastSuccessfulUsername)||e.defaultSuggestions,o=r.currentUsername&&s.getValue(r.currentUsername),c=!!o&&o.status===n.Px.LOADING;return u(l({},a),{suggestions:i,isLoading:c})}static selectSuggestionsTrie(t){return e.stateSlice(t).trie}static stateSlice(e){if(!e.users||!e.users.suggestions)throw Error(`Could not find users.suggestions in state ${e}. Be sure to initialize the usersReducer()`);return e.users.suggestions}static sortSuggestions(e,t,r=new Date){let n=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0}),s=[],a=[],o=(0,i.mM)(r,90);for(let l of e){if(!l.dateLastActive){a.push(l);continue}let u=l.dateLastActive?new Date(l.dateLastActive):new Date;(0,i.LY)(u,o)?s.push(l):a.push(l)}let c=(e,r)=>{let s=t.toLocaleLowerCase(),a=e.name.toLocaleLowerCase(),i=r.name.toLocaleLowerCase();return a.startsWith(s)&&!i.startsWith(s)?-1:i.startsWith(s)&&!a.startsWith(s)?1:n.compare(e.name.toLocaleLowerCase(),r.name.toLocaleLowerCase())},p=(e,r)=>{let n=t.toLocaleLowerCase(),s=e.name.toLocaleLowerCase();return s===n?-1:0};s.sort(c),a.sort(c);let d=[...s,...a];return d.sort(p),d}constructor(){this.initialState={lastSuccessfulUsername:null,currentUsername:null,trie:new s,activeSuggestionID:"",activeSuggestionIndex:0},this.reducer=(t=this.initialState,r)=>{switch(r.type){case a.Z.LOAD_USERS_REQUEST:{let{username:s}=r.meta;t.trie.insert(s,{status:n.Px.LOADING});let i=!1,o=t.lastSuccessfulUsername;if(null!=o&&s.length>=o.length){let c=s.substring(0,o.length);c===o&&(i=!0)}return u(l({},t),{currentUsername:s,lastSuccessfulUsername:i?t.lastSuccessfulUsername:null})}case a.Z.LOAD_USERS_ERROR:{let p=r.payload,{username:d}=r.meta;return t.trie.insert(d,{status:n.Px.ERROR,data:void 0,error:p}),t}case a.Z.LOAD_USERS_RESPONSE:{let m=r.payload.data,{username:f}=r.meta;t.trie.insert(f,{status:n.Px.SUCCESS,data:e.sortSuggestions(m,f)});let y=m.length>0?m[0].domID:"";return u(l({},t),{activeSuggestionID:y,activeSuggestionIndex:0,lastSuccessfulUsername:f,currentUsername:f})}case a.Z.SET_ACTIVE_SUGGESTION:{let{suggestionID:b,suggestionIndex:v}=r.payload;return u(l({},t),{activeSuggestionID:b,activeSuggestionIndex:v})}default:return t}}}};c.defaultSuggestions={status:n.Px.PENDING}},4483(e,t,r){r.d(t,{Fk:()=>p,aF:()=>d,og:()=>f,ts:()=>m});var n=r(46458),s=r(45835),a=r(67294),i=r(47178);r(18626);var o=r(79089);function l(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){l(a,n,s,i,o,"next",e)}function o(e){l(a,n,s,i,o,"throw",e)}i(void 0)})}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(){return(0,n.v9)(e=>{var t;return null===(t=e.users.current.data)||void 0===t?void 0:t.userID})}function d(e){let t=(0,s._)(),{userID:r}=e,o=(0,n.v9)(e=>{var t;let n={status:i.Px.PENDING};return null==r?n:null!==(t=e.users.usersByID[r])&&void 0!==t?t:n}),{status:l}=o;return(0,a.useEffect)(()=>{null!=r&&i.Px.PENDING.includes(l)&&t.getUserByID({userID:r})},[l,t,r]),(0,a.useDebugValue)(o),o}function m(){let e=(0,s._)();function t(){return(t=u(function*(t){yield e.postUser(t)})).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}function f(e){var t;let r=(0,s._)(),l=(0,o.hu)("userPatch"),p=(0,n.v9)(t=>{var r,n;return null!==(n=null===(r=t.users.patchStatusByPatchID[`${e}-${l}`])||void 0===r?void 0:r.status)&&void 0!==n?n:i.Px.PENDING}),d=(0,n.v9)(t=>{var r;return null===(r=t.users.patchStatusByPatchID[`${e}-${l}`])||void 0===r?void 0:r.error}),m=(0,a.useCallback)((t=u(function*(e){var t,n;return yield r.patchUser((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},e),n=(n={patchID:l},n),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}),t))}),function(e){return t.apply(this,arguments)}),[r,l]);return{patchUser:m,patchErrors:d,patchStatus:p}}},18626(e,t,r){r.d(t,{$m:()=>g,TE:()=>P,cA:()=>O,eu:()=>E});var n=r(47178),s=r(95774),a=r(45835),i=r(87219),o=r(76983),l=r(33198),u=r(46458),c=r(67294),p=r(66678),d=r.n(p);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function y(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let b=new s.Z().reducer,v={current:{status:n.Px.PENDING},permissions:{status:n.Px.PENDING},countInformation:{counts:[],lastRequested:null},suggestions:b(void 0,""),usersByID:{},usersInvitationsByID:{},postFormSubmit:{status:n.Px.PENDING},patchStatusByUserID:{},patchStatusByPatchID:{}};function g(e){return e&&0===e.userID}let O=(0,i.ZP)((0,o.reducerWithInitialState)(d()(v)).case(a.Z.getMeACs.started,e=>(e.current.status=n.Px.LOADING,e)).case(a.Z.getMeACs.done,(e,t)=>(e.current.data=t.result,e.current.status=n.Px.SUCCESS,e)).case(a.Z.getMeACs.failed,(e,t)=>(e.current.status=n.Px.ERROR,e.current.error=t.error,e)).case(a.Z.getPermissionsACs.started,e=>(e.permissions.status=n.Px.LOADING,e)).case(a.Z.getPermissionsACs.done,(e,t)=>(e.permissions.data=t.result,e.permissions.status=n.Px.SUCCESS,e)).case(a.Z.getPermissionsACs.failed,(e,t)=>(e.permissions.status=n.Px.ERROR,e.permissions.error=t.error,e)).case(a.Z.getCountsACs.started,e=>(e.countInformation.lastRequested=new Date().getTime(),e)).case(a.Z.getCountsACs.done,(e,t)=>(e.countInformation.counts=t.result.counts,e)).case(a.Z.getUserACs.started,(e,t)=>{let{userID:r}=t;return e.usersByID[r]={status:n.Px.LOADING},e}).case(a.Z.getUserACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.getUserACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={status:n.Px.ERROR,error:t.error},e}).case(a.Z.postUserACs.started,(e,t)=>(e.postFormSubmit.status=n.Px.LOADING,e)).case(a.Z.postUserACs.failed,(e,t)=>(e.postFormSubmit.status=n.Px.ERROR,e.postFormSubmit.error=t.error,e)).case(a.Z.postUserACs.done,(e,t)=>{let r=t.result.userID;return e.postFormSubmit.status=n.Px.SUCCESS,e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.inviteUsersACs.started,(e,t)=>{let{userID:r}=t;return e.usersInvitationsByID[r].results={status:n.Px.LOADING},e}).case(a.Z.inviteUsersACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.SUCCESS,data:t.result},e.usersInvitationsByID[r].emailsString="",e.usersInvitationsByID[r].invitees=[],e}).case(a.Z.clearInviteUsersAC,(e,t)=>{let{userID:r}=t;return delete e.usersInvitationsByID[r],e}).case(a.Z.inviteUsersACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.ERROR,error:t.error},e}).case(a.Z.updateInviteeIDsAC,(e,t)=>{var r,n;let{userID:s,IDs:a}=t;return e.usersInvitationsByID[s]=y(f({},e.usersInvitationsByID[s]),{userIDs:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.userIDs)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteesAC,(e,t)=>{let{userID:r,invitees:n}=t;return e.usersInvitationsByID[r]=y(f({},e.usersInvitationsByID[r]),{invitees:n}),e}).case(a.Z.updateInviteeEmailsAC,(e,t)=>{var r,n;let{userID:s,emails:a}=t;return e.usersInvitationsByID[s]=y(f({},e.usersInvitationsByID[s]),{emails:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.emails)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteeEmailsStringAC,(e,t)=>{let{userID:r,emailsString:n}=t;return e.usersInvitationsByID[r]=y(f({},e.usersInvitationsByID[r]),{emailsString:n}),e}).case(a.Z.patchUserAC.started,(e,t)=>{var r;let{patchID:s}=t;return e.patchStatusByPatchID[s]=y(f({},null!==(r=e.patchStatusByPatchID[s])&&void 0!==r?r:{}),{status:n.Px.LOADING}),e}).case(a.Z.patchUserAC.done,(e,t)=>{var r,s;let{userID:a,patchID:i}=t.params;return(null===(r=e.usersByID[a])||void 0===r?void 0:r.data)&&(e.usersByID[a].data=f({},null===(s=e.usersByID[a])||void 0===s?void 0:s.data,t.result)),e.patchStatusByPatchID[i]={status:n.Px.SUCCESS},e}).case(a.Z.patchUserAC.failed,(e,t)=>{let{patchID:r}=t.params;return e.patchStatusByPatchID[r]={status:n.Px.ERROR,error:t.error},e}).default((e,t)=>(t.type===l.Z.MARK_ALL_READ_RESPONSE&&e.current.data&&(e.current.data.countUnreadNotifications=0),e.suggestions=b(e.suggestions,t),e)));function h(e){if(!e.users||!e.users.current)throw Error(`It seems you did not initialize the users model correctly. Could not find "users.current" in state: ${e}`);return{currentUser:e.users.current}}function E(){return(0,u.v9)(h)}function P(){let e=(0,u.v9)(e=>e.users.permissions),{getPermissions:t}=(0,a._)(),{status:r}=e;return(0,c.useEffect)(()=>{[n.Px.PENDING,n.Px.LOADING].includes(r)&&t()},[r,t]),e}}}]);