"use strict";(self.webpackChunkvanillalayouts=self.webpackChunkvanillalayouts||[]).push([[1479],{37786(e,t,r){r.d(t,{Z:()=>y,o:()=>m});var n=r(45194),o=r(81612),l=r(10855),a=r(46452),u=r(85131),c=r(52303),i=r(88895),s=r(67294);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t,r;let p=`There was a problem loading "${null!==(t=e.componentName)&&void 0!==t?t:(0,c.t)("Invalid component name")}"`;return s.createElement(l.W2,null,s.createElement("div",{style:{width:"100%",height:"100%",padding:"16px"}},s.createElement(a.Z,{type:"error",icon:s.createElement(o.Pz,null),title:e.message?p:void 0,stringContents:null!==(r=e.message)&&void 0!==r?r:p,contents:e.message&&(0,i.fF)()&&s.createElement(s.Fragment,null,e.message,s.createElement(n.L,{bgColor:(0,u.v)().colors.error.bg,maxHeight:100},s.createElement("br",null),e.trace))})))}let y=class extends s.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){if((0,i.H)({error:e,errorInfo:t}),null==t?void 0:t.componentStack){var r,n;this.setState((r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}({},this.state),n=(n={trace:t.componentStack},n),Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(n)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(n,e))}),r))}}render(){if(null!==this.state.error){var e,t;return s.createElement(m,{componentName:null!==(e=this.props.componentName)&&void 0!==e?e:"Unknown Component",message:this.state.error.message,trace:null!==(t=this.state.trace)&&void 0!==t?t:this.state.error.stack})}return this.props.children}constructor(e){super(e),this.state={error:null}}}},63848(e,t,r){r.r(t),r.d(t,{lookupLayout:()=>c});var n,o,l=r(224),a=r(23675);function u(e,t,r,n,o,l,a){try{var u=e[l](a),c=u.value}catch(i){r(i);return}u.done?t(c):Promise.resolve(c).then(n,o)}let c=(0,a.hg)("@@layouts/lookup",(o=(n=function*(e){let t=yield l.ZP.get("/layouts/lookup-hydrate",{params:e});return t.data},function(){var e=this,t=arguments;return new Promise(function(r,o){var l=n.apply(e,t);function a(e){u(l,r,o,a,c,"next",e)}function c(e){u(l,r,o,a,c,"throw",e)}a(void 0)})}),function(e){return o.apply(this,arguments)}))},7398(e,t,r){r.d(t,{m:()=>u});var n=r(47178),o=r(63848),l=r(23675),a=r(88895);let u=(0,l.oM)({name:"layoutPage",initialState:{layoutsByHash:{}},reducers:{},extraReducers:e=>e.addCase(o.lookupLayout.pending,(e,t)=>{var r;let o=(0,a.Q6)(null!==(r=t.meta.arg)&&void 0!==r?r:{});return e.layoutsByHash[o]={status:n.Px.LOADING},e}).addCase(o.lookupLayout.fulfilled,(e,t)=>{var r;let o=(0,a.Q6)(null!==(r=t.meta.arg)&&void 0!==r?r:{});return e.layoutsByHash[o]={status:n.Px.SUCCESS,data:t.payload},e}).addCase(o.lookupLayout.rejected,(e,t)=>{var r;let o=(0,a.Q6)(null!==(r=t.meta.arg)&&void 0!==r?r:{});return e.layoutsByHash[o]={status:n.Px.ERROR,error:t.error},e})})},74332(e,t,r){r.d(t,{Hz:()=>g,jQ:()=>O});var n=r(67294),o=r(47313),l=r(32825),a=r(46458),u=r(63848),c=r(23828),i=r(88895),s=r(47178),p=r(46302),m=r(24504),y=r(94412),d=r(59245);function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){var t,r;let p=function(e){let t=function(){let e=(0,a.I0)(),t=(0,n.useMemo)(()=>(0,c.DE)(u,e),[e]);return t}(),r=(0,i.Q6)(null!=e?e:{}),o=(0,a.v9)(e=>{var t;return null!==(t=e.layoutPage.layoutsByHash[r])&&void 0!==t?t:{status:s.Px.PENDING}});return(0,n.useEffect)(()=>{o.status===s.Px.PENDING&&t.lookupLayout(e)},[t,o,e]),o}({layoutViewType:e.layoutQuery.layoutViewType,recordID:null!==(t=e.layoutQuery.recordID)&&void 0!==t?t:-1,recordType:null!==(r=e.layoutQuery.recordType)&&void 0!==r?r:"global",params:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}({},e.layoutQuery.params)});return p.error?n.createElement(o.m,{error:p.error}):p.data?n.createElement(y.j,null,n.createElement(l.t,{layout:p.data.layout})):n.createElement(d.n,null)}let b=[];function O(e,t){b=Array.isArray(e)?[...b,...e]:[...b,e],p.F.addRoutes([n.createElement(m.AW,{key:[e].flat().join("-"),path:e,exact:!0,render(e){let r=t(e);return n.createElement(n.Suspense,{fallback:n.createElement(d.n,null)},n.createElement(v,{layoutQuery:r}))}})])}function g(e){return!!(0,m.LX)(e,b)}},32825(e,t,r){r.d(t,{t:()=>b}),(n=o||(o={})).MOBILE="mobile",n.DESKTOP="desktop",n.ALL="all";var n,o,l=r(37786),a=r(72588),u=r(77786),c=r(94412),i=r(45607),s=r(88895),p=r(67294);function m(e){return!!e&&"object"==typeof e&&!!e&&e.hasOwnProperty("$reactComponent")&&e.hasOwnProperty("$reactProps")}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){y(e,t,r[t])})}return e}function f(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let v=p.createContext({componentFetcher:i.Xr});function b(e){var t;let r=(0,p.useContext)(u.N),n=(0,p.useContext)(v),o=p.createElement("div",{ref:e.layoutRef},p.createElement(O,Object.assign({},n,e)));return(null===(t=e.applyContexts)||void 0===t||t)&&(o=p.createElement(u.N.Provider,{value:f(d({},r),{autoWrap:!0,useMinHeight:!1})},p.createElement(c.j,null,o))),p.createElement(l.Z,{componentName:"Layout"},o)}function O(e){var t;let{layout:r}=e,n=(0,a.Fy)(),u=[a.uv.XS,a.uv.MOBILE].includes(n)?o.MOBILE:o.DESKTOP,c={device:u,componentFetcher:e.componentFetcher,fallbackWidget:e.fallbackWidget,componentWrapper:e.componentWrapper,allowInternalProps:null!==(t=e.allowInternalProps)&&void 0!==t&&t};return p.createElement(p.Fragment,null,r.map((e,t)=>{let n=`${t}-${r.length}`;return p.createElement(p.Fragment,{key:n},function e(t,r,n){var a,u,c,y,v,b,O,g;if(null===t)return null;r.allowInternalProps||(t=f(d({},t),{$reactProps:function(e){let t={};for(let[r,n]of Object.entries(e))!r.startsWith("$")&&(t[r]=n);return t}(t.$reactProps)}));let h=null!==(c=r.componentFetcher)&&void 0!==c?c:i.Xr,P=null!==(v=h(null!==(y=null==t?void 0:t.$reactComponent)&&void 0!==y?y:""))&&void 0!==v?v:null;P||(0,s.o7)(`"${null!==(b=t&&(null==t?void 0:t.$reactComponent))&&void 0!==b?b:t}" cannot be found in the component registry`);let E=null!=n?n:"unknownkey",j=null==t?void 0:null===(a=t.$middleware)||void 0===a?void 0:null===(u=a.visibility)||void 0===u?void 0:u.device;if(j&&j!==o.ALL&&j!==r.device)return p.createElement(p.Fragment,null);let w=null;return w=P?p.createElement(l.Z,{key:E,componentName:null==t?void 0:t.$reactComponent},[p.createElement(P.Component,f(d({},function t(r,n,o){if(null!==r&&"object"==typeof r){if(!Array.isArray(r)&&!m(r))return Object.fromEntries(Object.keys(r).map((e,o)=>[e,t(r[e],n,o)]));if(Array.isArray(r))return r.map((e,o)=>t(e,n,`${o}-${r.length}`));if(m(r)){var a;return null!==(a=e(r,n,o))&&void 0!==a?a:p.createElement(l.o,{componentName:r.$reactComponent,key:o})}}return r}(t.$reactProps,r)),{key:E}))]):r.fallbackWidget?p.createElement(r.fallbackWidget,f(d({},null!=t?t:{},null!==(O=t.$reactProps)&&void 0!==O?O:{}),{key:E}),[]):p.createElement(l.o,{componentName:null==t?void 0:t.$reactComponent,key:E}),r.componentWrapper&&(w=p.createElement(r.componentWrapper,f(d({},null!=t?t:{},null!==(g=t.$reactProps)&&void 0!==g?g:{}),{key:E}),[w])),w}(e,c,n))}))}}}]);