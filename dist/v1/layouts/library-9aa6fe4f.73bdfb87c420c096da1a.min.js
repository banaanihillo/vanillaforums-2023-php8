"use strict";(self.webpackChunkvanillalayouts=self.webpackChunkvanillalayouts||[]).push([[858],{75799(e,t,r){r.d(t,{F:()=>b});var n=r(67294),s=r(23410),a=r(59736),i=r(83386),o=r(75994),l=r(10141),u=r(11590);function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let p=()=>{let e=(0,o.OF)(),t=(0,u.iv)(d(m(d(m({},i.W.font(m({},e.fontSizeAndWeightVars("medium")))),{zIndex:1}),i.W.padding({horizontal:e.gutter.size,vertical:e.gutter.size}),i.W.border(),(0,l.kL)().dropDown()),{background:s.w.colorOut(e.mainColors.bg),width:280,maxHeight:120,overflowX:"hidden",overflowY:"auto","&:not(last-of-type)":{marginTop:(0,a.dd)(e.gutter.size)},p:{margin:0}}),";label:Toast-styles-root;"),r=(0,u.iv)({name:"goseef-Toast-styles-closeButton",styles:"position:absolute;top:16px;right:0;label:Toast-styles-closeButton;"});return{root:t,closeButton:r}};var f=r(34098),v=r(76048),g=r(29368);function b(e){let{children:t,role:r,className:s,visibility:a,autoCloseDuration:i,onVisibilityChange:o,dismissible:l}=e,u=p(),[c,m]=(0,n.useState)(null==a||a);return(0,n.useEffect)(()=>{i&&c&&setTimeout(()=>m(!1),i)},[c,i]),(0,n.useEffect)(()=>{o&&o(c)},[c,o]),(0,n.useEffect)(()=>{m(!!a)},[a]),n.createElement(v.k,{isEntered:c,fromDirection:v.a.LEFT},n.createElement("div",{className:(0,f.cx)(u.root,s),role:null!=r?r:"status","aria-live":"assertive","aria-atomic":!0},l&&n.createElement(g.Z,{className:u.closeButton,onClick:()=>m(!1),compact:!0}),t))}},33691(e,t,r){r.d(t,{VW:()=>g,pm:()=>v});var n=r(75799),s=r(11590),a=r(75994),i=r(83386);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let l=()=>{var e,t;let r=(0,a.OF)(),n=(0,s.iv)((e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}({display:"flex",flexDirection:"column-reverse",position:"fixed",top:0,left:0,height:"100vh",width:"auto",pointerEvents:"none"},i.W.padding({all:r.gutter.size})),t=(t={"& > *":{pointerEvents:"auto"}},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e),";label:ToastContext-styles-area;");return{area:n}};var u=r(88895),c=r(67294);function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){m(e,t,r[t])})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let f=c.createContext({toasts:null,addToast:()=>"",updateToast(){},removeToast(){}});function v(){return(0,c.useContext)(f)}function g(e){let{children:t}=e,[r,n]=(0,c.useState)(null),s=e=>{let t=(0,u.k$)(),r=p(d({},e),{toastID:t,visibility:!0});return n(e=>e?[...e,r]:[r]),t};window.__LEGACY_ADD_TOAST__=s;let a=(e,t)=>{r&&t&&n(r=>r?r.map(r=>r.toastID===e?p(d({},r,t),{toastID:r.toastID}):r):r)},i=e=>{r&&(n(t=>t?t.map((t,n)=>t.toastID===e?p(d({},r[n]),{visibility:!1}):t):t),setTimeout(()=>{n(t=>t?t.filter(t=>t.toastID!==e):t)},2e3))};return c.createElement(f.Provider,{value:{toasts:r,addToast:s,updateToast:a,removeToast:i}},c.createElement(b,null),t)}function b(){let e=l(),{toasts:t}=(0,c.useContext)(f);return c.createElement(c.Fragment,null,t&&t.length>0&&c.createElement("section",{className:e.area},c.createElement(c.Fragment,null,t.filter(e=>e.persistent).map(e=>{var t;return c.createElement(n.F,{key:e.toastID,visibility:null===(t=e.visibility)||void 0===t||t,autoCloseDuration:e.autoDismiss?3e3:void 0,dismissible:e.dismissible,className:e.className},e.body)}),t.filter(e=>!e.persistent).map(e=>{var t;return c.createElement(n.F,{key:e.toastID,visibility:null===(t=e.visibility)||void 0===t||t,autoCloseDuration:e.autoDismiss?3e3:void 0,dismissible:e.dismissible,className:e.className},e.body)}))))}},31600(e,t,r){r.d(t,{N:()=>C});var n=r(67294),s=r(33188),a=r(57298),i=r(24027),o=r(38918),l=r(47178),u=r(81478),c=r(52303),m=r(30731),d=r(10914),p=r(11590),f=r(34937),v=r(75994),g=r(83386),b=r(97923),y=r(59736);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){E(e,t,r[t])})}return e}let h=()=>{var e,t;let r=(0,v.OF)(),n=(0,p.iv)((e=O({minHeight:(0,f._)().sizing.minHeight},(0,b.Mh)().middleLeft()),t=(t={"& button":O({margin:(0,y.dd)("3px")},g.W.font(O({},r.fontSizeAndWeightVars("medium"))))},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e),";label:ThemePreviewToast-style-toastActions;");return{toastActions:n}};var P=r(33691);function I(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function S(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){I(a,n,s,i,o,"next",e)}function o(e){I(a,n,s,i,o,"throw",e)}i(void 0)})}}function C(){var e,t,r;let{applyStatus:p,cancelStatus:f}=(0,o.n)(),[v,g]=(0,n.useState)((0,a.xZ)("themePreview",null)),{putCurrentTheme:b,putPreviewTheme:y,patchThemeWithRevisionID:E}=(0,i.ib)(),[O,I]=(0,n.useState)(!1),[C,D]=(0,n.useState)(!1),w=null!==(e=null==v?void 0:v.revisionID)&&void 0!==e&&e,A=h(),{addToast:j,updateToast:R}=(0,P.pm)(),N=(t=S(function*(){if(v){if(w){I(!0);let e=yield E({themeID:v.themeID,revisionID:v.revisionID});e&&(I(!1),D(!0)),y({themeID:"",revisionID:void 0,type:i.N5.APPLY})}else b(v.themeID),y({themeID:"",type:i.N5.APPLY})}}),function(){return t.apply(this,arguments)}),U=(r=S(function*(){y({themeID:"",type:i.N5.CANCEL})}),function(){return r.apply(this,arguments)}),x=(0,n.useMemo)(()=>f.status===l.Px.LOADING||f.status===l.Px.SUCCESS,[f]),L=(0,n.useMemo)(()=>p.status===l.Px.LOADING||p.status===l.Px.SUCCESS||O,[p,O]),T=(0,n.useMemo)(()=>w?(0,c.t)("Restore"):(0,c.t)("Apply"),[w]);(0,n.useEffect)(()=>{v&&(v.name&&p.status===l.Px.SUCCESS||f.status===l.Px.SUCCESS||C)&&(window.location.href=w?`/appearance/style-guides/${v.themeID}/revisions`:v.redirect)});let[_,k]=(0,n.useState)(),Z=(0,n.useMemo)(()=>v?n.createElement(n.Fragment,null,"You are previewing the ",n.createElement("b",null,v&&v.name)," theme.",p.error&&n.createElement(u.Z,{errors:[p.error]}),n.createElement("div",{className:A.toastActions},n.createElement(m.Z,{onClick:N,buttonType:s.q.TEXT},L?n.createElement(d.Z,{buttonType:s.q.TEXT}):n.createElement(n.Fragment,null,T)),n.createElement(m.Z,{onClick:U,buttonType:s.q.TEXT_PRIMARY},x?n.createElement(d.Z,{buttonType:s.q.TEXT_PRIMARY}):(0,c.t)("Cancel")))):null,[T,p.error,L,x,v]);return(0,n.useEffect)(()=>{if(Z&&!_){let e=j({persistent:!0,body:Z});k(e)}Z&&_&&R(_,{body:Z})},[Z]),null}},38918(e,t,r){r.d(t,{Z:()=>u,n:()=>c});var n=r(47178),s=r(87219),a=r(76983),i=r(24027),o=r(46458);let l={applyStatus:{status:n.Px.PENDING},cancelStatus:{status:n.Px.PENDING}},u=(0,s.Uy)((0,a.reducerWithInitialState)(l).case(i.ZP.putCurrentThemeACs.started,(e,t)=>(e.applyStatus.status=n.Px.LOADING,e.applyStatus.data={themeID:t.themeID},e)).case(i.ZP.putCurrentThemeACs.done,(e,t)=>(e.applyStatus.status=n.Px.SUCCESS,e.applyStatus.error=void 0,e)).case(i.ZP.putCurrentThemeACs.failed,(e,t)=>(e.applyStatus.status=n.Px.ERROR,e.applyStatus.error=t.error,e)).case(i.ZP.putPreviewThemeACs.started,(e,t)=>(t.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.LOADING),e.cancelStatus.data={themeID:t.themeID},e)).case(i.ZP.putPreviewThemeACs.done,(e,t)=>(t.params.type===i.N5.CANCEL&&(e.cancelStatus.status=n.Px.SUCCESS),e.cancelStatus.error=void 0,e)).case(i.ZP.putPreviewThemeACs.failed,(e,t)=>(e.cancelStatus.status=n.Px.ERROR,e.cancelStatus.error=t.error,e)));function c(){return(0,o.v9)(e=>e.themePreviewToaster)}},90432(e,t,r){r.d(t,{TR:()=>ei,HW:()=>el,Hx:()=>eo});var n=r(11590),s=r(47178),a=r(44765);function i(){return(0,a.Fs)(["profiles.view","users.add","users.edit","users.delete"])}var o=r(4483),l=r(92234),u=r(72588),c=r(62425),m=r(21965),d=r(67294);let p=d.createContext({isOpen:!1,setIsOpen(){},triggerRef:{current:null},contentRef:{current:null},contents:null,contentID:"",triggerID:""});function f(){return(0,d.useContext)(p)}var v=r(92111),g=r(94982),b=r(75994),y=r(83386),E=r(52239),O=r(59736),h=r(28236),P=r(23410),I=r(75864),S=r(85938);function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){C(e,t,r[t])})}return e}let w=(0,h.yI)(e=>{var t,r;let n=(0,I.Cg)("userCard",e),s=(0,b.OF)(),a=n("container",{spacing:s.gutter.size}),i=n("button",{minWidth:120,mobile:{minWidth:0}}),o=n("name",{font:S.L.font(D({},s.fontSizeAndWeightVars("large","bold"))),margin:S.L.spacing({top:9})}),l=n("label",{border:S.L.border({color:s.mainColors.primary,radius:3}),padding:S.L.spacing({horizontal:10}),margin:S.L.spacing({top:12}),font:S.L.font({color:s.mainColors.primary,size:10,lineHeight:1.5,transform:"uppercase"})}),u=n("containerWithBorder",{color:P.w.colorOut(s.border.color)}),c=n("message",{font:S.L.font({size:s.fonts.size.small}),margin:S.L.spacing({top:12})}),m=n("headerLink",{color:P.w.colorOut(s.mainColors.fg),font:S.L.font((t=D({},s.fontSizeAndWeightVars("small")),r=(r={align:"center"},r),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)),margin:S.L.spacing({top:8}),minHeight:(0,O.dd)(24)});return{container:a,button:i,name:o,label:l,containerWithBorder:u,message:c,headerLink:m}});var A=r(85819);function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){j(e,t,r[t])})}return e}function N(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let U=(0,h.yI)((e={})=>{var t;let r=w(),s=(0,g.J)().mediaQueries(),a=(0,b.OF)();(0,n.hi)({"[data-reach-popover]":{zIndex:null!==(t=e.zIndex)&&void 0!==t?t:1050}},";label:UserCard-styles-userCardClasses;");let i=(0,n.iv)(N(R({display:"flex",flexDirection:"row",alignItems:"stretch",justifyContent:"center"},y.W.padding({all:r.container.spacing})),{flexWrap:"wrap"}),";label:UserCard-styles-container;"),o=(0,n.cx)(i,(0,n.iv)({borderTop:`1px solid ${r.containerWithBorder.color}`},";label:UserCard-styles-containerWithBorder;")),l=(0,n.iv)({name:"14zkbwb-UserCard-styles-row",styles:"display:flex;width:100%;justify-content:center;label:UserCard-styles-row;"}),u=(0,n.iv)(R({maxWidth:(0,A.aQ)(100)},{"&&":{minWidth:(0,O.dd)(r.button.minWidth)}},s.oneColumnDown(R({},{"&&":{width:(0,A.aQ)(100),minWidth:(0,O.dd)(r.button.mobile.minWidth)}}))),";label:UserCard-styles-button;"),c=(0,n.iv)(N(R({},y.W.padding({horizontal:r.container.spacing/2})),{flexWrap:"wrap"}),";label:UserCard-styles-buttonsContainer;"),m=(0,n.iv)(R({maxWidth:(0,A.aQ)(100)},y.W.padding({top:0,bottom:r.container.spacing,horizontal:r.container.spacing/2}),s.oneColumnDown({"&&":{flexGrow:1,flexBasis:(0,A.aQ)(50)}})),";label:UserCard-styles-buttonContainer;"),d=(0,n.iv)(N(R({},y.W.margin(r.name.margin),y.W.font(r.name.font)),{width:(0,A.aQ)(100),textAlign:"center"}),s.oneColumnDown({fontSize:1.25*r.name.font.size}),";label:UserCard-styles-name;"),p=(0,n.iv)(R({},y.W.padding(r.label.padding),y.W.font(r.label.font),y.W.border(r.label.border),y.W.margin(r.label.margin)),";label:UserCard-styles-label;"),f=(0,n.iv)(R({borderRight:(0,E.$N)({})},y.W.padding({right:a.spacer.size/2,left:a.spacer.size})),";label:UserCard-styles-statLeft;"),h=(0,n.iv)(R({},y.W.padding({right:a.spacer.size,left:a.spacer.size/2})),";label:UserCard-styles-statRight;"),P=(0,n.iv)({name:"bezbfl-UserCard-styles-header",styles:"position:relative;label:UserCard-styles-header;"}),I=y.W.clickable.itemState({default:r.headerLink.color}),S=(0,n.iv)(N(R({},I),{"&&":R({minHeight:r.headerLink.minHeight,display:"inline-flex",alignItems:"center"},y.W.font(r.headerLink.font),y.W.margin(r.headerLink.margin))}),";label:UserCard-styles-headerLink;"),C=(0,n.iv)({name:"m7jc2-UserCard-styles-metas",styles:"&&{text-align:center;};label:UserCard-styles-metas;"}),D=(0,n.iv)(R({},y.W.margin({vertical:0})),";label:UserCard-styles-metaItem;"),j=(0,v.Gv)(),U=(0,n.iv)(R({},{"&&&":R(N(R({},y.W.absolute.topRight()),{width:(0,O.dd)(j.sizing.height),height:(0,O.dd)(j.sizing.height)}),s.oneColumnDown({height:(0,O.dd)(j.sizing.height)}))}),";label:UserCard-styles-close;"),x=(0,n.iv)(N(R({},y.W.margin({top:r.container.spacing})),{display:"block"}),";label:UserCard-styles-userPhoto;"),L=(0,n.iv)(R({},y.W.font(r.message.font),y.W.margin(r.message.margin)),";label:UserCard-styles-message;");return{container:i,containerWithBorder:o,buttonsContainer:c,button:u,buttonContainer:m,name:d,label:p,header:P,headerLink:S,statLeft:f,statRight:h,close:U,userPhoto:x,row:l,metas:C,metaItem:D,message:L}});var x=r(30731),L=r(33188),T=r(28590),_=r(81612),k=r(24821),Z=r(91589),B=r(70563),G=r(92097),F=r(88791),W=r(57298),z=r(52808),M=r(21663),V=r(39607);let X="This user has been banned.",H="Banned";function $(e){var t,r;let{zIndex:s}=(0,V.DE)(),i=U({zIndex:s}),{user:l}=e,c=(0,u.Fy)(),m=c===u.uv.MOBILE||c===u.uv.XS,p=m?T.pz.XLARGE:T.pz.LARGE,f=(0,W.xZ)("context.conversationsEnabled",!1),v=(0,o.Fk)(),g=l.userID===v,b=null!==(t=null==l?void 0:l.private)&&void 0!==t&&t,y=(0,a.Fs)("personalInfo.view"),E=null!==(r=null==l?void 0:l.banned)&&void 0!==r?r:0,O=1===E,h=(0,W.xZ)("ui.bannedPrivateProfile","0");h=""===h?"0":"1";let P="0"!==h,I=(0,d.useMemo)(()=>{let{label:e,title:t}=l;return O?d.createElement("div",{className:i.label},(0,W.t)(H)):t?d.createElement("div",{className:i.label},t):!t&&e?d.createElement("div",{className:i.label,dangerouslySetInnerHTML:{__html:e}}):null},[O,l]);return(b||O&&P)&&!y&&!g?d.createElement(Q,{user:l,onClose:e.onClose}):d.createElement(d.Fragment,null,d.createElement("div",{className:i.header},m&&d.createElement(x.Z,{className:i.close,onClick:e.onClose,buttonType:L.q.ICON},d.createElement(d.Fragment,null,d.createElement(_.e9,null),d.createElement(k.Z,null,(0,W.t)("Close"))))),d.createElement(ee,null,d.createElement("div",{className:i.row},d.createElement(T.cy,{userInfo:l,size:p,className:i.userPhoto})),d.createElement("div",{className:i.row},d.createElement("div",{className:i.name},l.name)),I&&d.createElement("div",{className:i.row},I),l.email&&d.createElement(a.ZP,{permission:"personalInfo.view"},d.createElement("div",{className:i.row},d.createElement("a",{className:i.headerLink,href:`mailto:${l.email}`},l.email))),$.extraLinks.map((e,t)=>d.createElement(e.component,{key:t,userID:l.userID})),O&&d.createElement("div",{className:(0,n.cx)(i.row,i.message)},d.createElement("div",null,(0,W.t)(X)))),d.createElement("div",{className:(0,n.cx)(i.row,i.buttonsContainer)},d.createElement(q,{to:(0,W.tI)(l.name)},(0,W.t)("View Profile")),d.createElement(a.ZP,{permission:"conversations.add"},f&&!E&&d.createElement(q,{to:`/messages/add/${l.name}`},(0,W.t)("Message"))),$.extraButtons.map((e,t)=>d.createElement(e.component,{key:t,userID:l.userID}))),d.createElement(ee,{borderTop:!0},d.createElement(G.k,{to:(0,W.nQ)(l.name),value:l.countDiscussions,label:(0,W.t)("Discussions"),classNames:i.statLeft}),d.createElement(G.k,{to:(0,W._F)(l.name),value:l.countComments,label:(0,W.t)("Comments"),classNames:i.statRight})),$.extraContent.map((e,t)=>d.createElement(ee,{key:t,borderTop:!0},d.createElement(e.component,{userID:l.userID}))),d.createElement(ee,{borderTop:!0},d.createElement(Z.HX,{className:i.metas},d.createElement(Z.y1,{className:i.metaItem},(0,W.t)("Joined"),": ",d.createElement(M.Z,{timestamp:l.dateInserted})),l.dateLastActive&&d.createElement(Z.y1,{className:i.metaItem},(0,W.t)("Last Active"),": ",d.createElement(M.Z,{timestamp:l.dateLastActive})))))}function K(e){var t;let{userFragment:r}=e,s=(0,u.Fy)(),i=s===u.uv.MOBILE||s===u.uv.XS,o=i?T.pz.XLARGE:T.pz.LARGE,l=(0,W.xZ)("context.conversationsEnabled",!1),c=U();return d.createElement(d.Fragment,null,d.createElement("div",{className:c.header},i&&d.createElement(x.Z,{className:c.close,onClick:e.onClose,buttonType:L.q.ICON},d.createElement(d.Fragment,null,d.createElement(_.e9,null),d.createElement(k.Z,null,(0,W.t)("Close"))))),d.createElement(ee,null,d.createElement("div",{className:c.row},(null==r?void 0:r.photoUrl)?d.createElement(T.cy,{userInfo:r,size:o,className:c.userPhoto}):d.createElement(T.fP,{size:o,className:c.userPhoto})),d.createElement("div",{className:c.row},d.createElement("div",{className:c.name},null!==(t=null==r?void 0:r.name)&&void 0!==t?t:d.createElement(z.ZM,{inline:!0,height:12,width:60}))),d.createElement(a.ZP,{permission:"personalInfo.view",mode:a.R9.GLOBAL},d.createElement("div",{className:c.row},d.createElement("span",{className:c.headerLink},d.createElement(z.ZM,{inline:!0,height:12,width:120})))),!!(null==r?void 0:r.userID)&&$.extraLinks.map((e,t)=>d.createElement(d.Fragment,{key:t},e.skeleton?d.createElement(e.skeleton,{userID:r.userID}):d.createElement(z.ZM,{inline:!0,height:12,width:120})))),d.createElement("div",{className:(0,n.cx)(c.row,c.buttonsContainer)},d.createElement(q,{disabled:!(null==r?void 0:r.name),to:(null==r?void 0:r.name)?(0,W.tI)(null==r?void 0:r.name):""},(0,W.t)("View Profile")),d.createElement(a.ZP,{permission:"conversations.add"},l&&d.createElement(q,{disabled:!(null==r?void 0:r.name),to:`/messages/add/${null==r?void 0:r.name}`},(0,W.t)("Message"))),!!(null==r?void 0:r.userID)&&$.extraButtons.map((e,t)=>d.createElement(d.Fragment,null,e.skeleton?d.createElement(e.skeleton,{key:t,userID:r.userID}):d.createElement(z.ZM,{inline:!0,height:"2em",width:120})))),d.createElement(ee,{borderTop:!0},d.createElement(Y,{text:(0,W.t)("Discussions"),position:"left"}),d.createElement(Y,{text:(0,W.t)("Comments"),position:"right"})),!!(null==r?void 0:r.userID)&&$.extraContent.map((e,t)=>d.createElement(ee,{key:t,borderTop:!0},e.skeleton?d.createElement(e.skeleton,{userID:r.userID}):d.createElement(z.ZM,{inline:!0,height:"2em",width:120}))),d.createElement(ee,{borderTop:!0},d.createElement(Z.HX,{className:c.metas},d.createElement(Z.y1,{className:c.metaItem},(0,W.t)("Joined"),": ",d.createElement(z.ZM,{inline:!0,height:8,width:60})),d.createElement(Z.y1,{className:c.metaItem},(0,W.t)("Last Active"),": ",d.createElement(z.ZM,{inline:!0,height:8,width:60})))))}function Q(e){var t,r,s;let{user:a,userFragment:i}=e,o=U(),l=(0,u.Fy)(),c=l===u.uv.MOBILE||l===u.uv.XS,m=c?T.pz.XLARGE:T.pz.LARGE,p=1===(null!==(r=null!==(t=null==a?void 0:a.banned)&&void 0!==t?t:null==i?void 0:i.banned)&&void 0!==r?r:0),f=p?(0,W.t)(H):(0,W.t)("Private"),v=p?(0,W.t)(X):(0,W.t)("This user's profile is private."),g=null!==(s=null==a?void 0:a.name)&&void 0!==s?s:null==i?void 0:i.name;return d.createElement(d.Fragment,null,d.createElement("div",{className:o.header}),d.createElement(ee,null,d.createElement("div",{className:o.row},d.createElement(T.cy,{userInfo:null!=a?a:i,size:m,className:o.userPhoto})),d.createElement("div",{className:o.row},d.createElement("div",{className:o.name},g)),d.createElement("div",{className:o.row},d.createElement("div",{className:o.label},f)),d.createElement("div",{className:(0,n.cx)(o.row,o.message)},d.createElement("div",null,v))))}function J(e){let t=U(),r=(0,u.Fy)(),s=r===u.uv.MOBILE||r===u.uv.XS,a=s?T.pz.XLARGE:T.pz.LARGE,i={photoUrl:(0,W.CN)("/applications/dashboard/design/images/banned.png",!0)},o=e.error?e.error:"This user has been deleted.",l=e.error?(0,W.t)("ERROR"):(0,W.t)("DELETED");return d.createElement(d.Fragment,null,d.createElement("div",{className:t.header}),d.createElement(ee,null,d.createElement("div",{className:t.row},d.createElement(T.cy,{userInfo:i,size:a,className:t.userPhoto})),d.createElement("div",{className:t.row},d.createElement("div",{className:t.label},l)),d.createElement("div",{className:(0,n.cx)(t.row,t.message)},d.createElement("div",null,o))))}function q(e){var t;let{zIndex:r}=(0,V.DE)(),n=U({zIndex:r});return d.createElement("div",{className:n.buttonContainer},d.createElement(F.Z,{disabled:e.disabled,to:null!==(t=e.to)&&void 0!==t?t:"",buttonType:L.q.STANDARD,className:n.button,target:e.target},e.children))}function Y(e){let{zIndex:t}=(0,V.DE)(),r=(0,B.u)(),s=U({zIndex:t}),{text:a,position:i}=e;return d.createElement("div",{className:(0,n.cx)(r.statItem,{[s.statLeft]:"left"===i},{[s.statRight]:"right"===i})},d.createElement("div",{className:r.statData},d.createElement(z.ZM,{height:35,width:48})),d.createElement("div",{className:r.statLabel},a))}function ee(e){let{borderTop:t}=e,{zIndex:r}=(0,V.DE)(),n=U({zIndex:r});return d.createElement("div",{className:t?n.containerWithBorder:n.container},e.children)}$.extraContent=[],$.registerContent=function(e){$.extraContent.find(t=>t.key===e.key)||$.extraContent.push(e)},$.extraButtons=[],$.registerButtons=function(e){$.extraButtons.find(t=>t.key===e.key)||$.extraButtons.push(e)},$.extraLinks=[],$.registerLinks=function(e){$.extraLinks.find(t=>t.key===e.key)||$.extraLinks.push(e)};var et=r(79089),er=r(77039),en=r(52303);function es(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ea(e){return i()?e.user?d.createElement($,{user:e.user,onClose:e.onClose}):d.createElement(ec,Object.assign({},e)):d.createElement(d.Fragment,null)}function ei(e){var t;let[r,n]=(0,d.useState)(!1),s=null!==(t=e.forceOpen)&&void 0!==t?t:r;function a(e){n(e),e&&window.closeAllFlyouts&&window.closeAllFlyouts()}let o=(0,et.hu)("popupTrigger"),l=(0,d.useRef)(null),f=(0,d.useRef)(null),v=(0,u.Fy)(),g=v===u.uv.MOBILE||v===u.uv.XS;return i()?d.createElement(V.Yh,null,d.createElement(p.Provider,{value:{isOpen:s,setIsOpen:a,triggerRef:l,contentRef:f,triggerID:o,contentID:o+"-content",contents:d.createElement(d.Fragment,null,!g&&s&&d.createElement(er.ZP,{targetRef:l,position:el},d.createElement(eu,Object.assign({},e,{onClose(){a(!1)}}))),g&&d.createElement(c.Z,{isVisible:s,size:m.Z.SMALL,exitHandler(){a(!1)}},d.createElement(ea,Object.assign({},e,{onClose(){a(!1)}}))))}},e.children)):d.createElement(d.Fragment,null,e.children)}function eo(){let e=f(),t=(0,d.useCallback)((t,r)=>{var n;t||r===e.contentRef.current||(null===(n=e.contentRef.current)||void 0===n?void 0:n.contains(r))||e.setIsOpen(!1)},[e.setIsOpen,e.contentRef]);return(0,V.LJ)(e.triggerRef,t),{props:i()?{"aria-controls":e.contentID,"aria-expanded":e.isOpen,"aria-haspopup":e.isOpen,role:"button",onClick(t){t.preventDefault(),e.setIsOpen(!e.isOpen)},onKeyPress(t){if((" "===t.key||"Enter"===t.key)&&(t.preventDefault(),e.setIsOpen(!e.isOpen)),"Escape"===t.key){var r;t.preventDefault(),e.setIsOpen(!1),null===(r=e.triggerRef.current)||void 0===r||r.focus()}}}:{},triggerRef:e.triggerRef,isOpen:e.isOpen,contents:e.contents}}function el(e,t){var r,n,s,a,i;let o=(0,er.MN)(e,t),l=(null!==(r=null==t?void 0:t.width)&&void 0!==r?r:0)/2,u=(null!==(n=null==e?void 0:e.width)&&void 0!==n?n:0)/2,c=(null!==(s=null==e?void 0:e.left)&&void 0!==s?s:0)+u+window.pageXOffset-l;return c<16||c+2*l>window.innerWidth-16?o:(a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){es(e,t,r[t])})}return e}({},o),i=(i={left:c},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a)}function eu(e){let t=f(),r=(0,d.useCallback)((e,r)=>{r&&!e&&r!==t.triggerRef.current&&t.setIsOpen(!1)},[t.setIsOpen,t.triggerRef]);return(0,V.LJ)(t.contentRef,r),d.createElement("div",{ref:t.contentRef,className:(0,n.cx)((0,l.IJ)().contentsBox,"isMedium"),onKeyDown(e){if("Escape"===e.key){var r;e.preventDefault(),t.setIsOpen(!1),null===(r=t.triggerRef.current)||void 0===r||r.focus()}},onClick(e){e.stopPropagation(),e.nativeEvent.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}},d.createElement(ea,Object.assign({},e)))}function ec(e){var t,r;let{userFragment:n,forceSkeleton:i=!1}=e,l=(0,o.aF)({userID:e.userID}),u=(0,o.Fk)(),c=(null==n?void 0:n.userID)===u,m=(0,a.Fs)("personalInfo.view"),p=(0,W.xZ)("ui.bannedPrivateProfile","0");p=""===p?"0":"1";let f="0"!==p,v=null!==(r=null==n?void 0:n.banned)&&void 0!==r?r:0;return((null==n?void 0:n.private)||f&&1===v)&&!m&&!c?d.createElement(Q,{userFragment:n,onClose:e.onClose}):i||l.status===s.Px.PENDING||l.status===s.Px.LOADING?d.createElement(K,{userFragment:n,onClose:e.onClose}):l.error&&(null==l?void 0:null===(t=l.error)||void 0===t?void 0:t.response.status)===404?d.createElement(J,{onClose:e.onClose}):l.data&&l.status!==s.Px.ERROR?d.createElement($,{user:l.data,onClose:e.onClose}):d.createElement(J,{error:(0,en.t)("Failed to load user"),onClose:e.onClose})}},90226(e,t,r){r.d(t,{Z:()=>p});var n=r(67294),s=r(57298),a=r(47178),i=r(74367),o=r(95774),l=r(224),u=r(46458),c=r(73819);class m extends n.Component{render(){let{suggestions:e,label:t}=this.props,r;return e.status===a.Px.SUCCESS&&e.data&&(r=e.data.map(e=>({value:e.userID,label:e.name}))),n.createElement(c.n,{label:t?(0,s.t)(t):(0,s.t)("Author"),placeholder:(0,s.t)("Select..."),options:r,isLoading:e.status===a.Px.LOADING||e.status===a.Px.PENDING,onChange:this.props.onChange,value:this.props.value,onInputChange:this.onInputChange,className:this.props.className,maxHeight:this.props.maxHeight})}constructor(...e){super(...e),this.onInputChange=e=>{(e=e.trim())&&this.props.suggestionActions.loadUsers(e)}}}let d=(0,u.$j)(o.Z.mapStateToProps,e=>({suggestionActions:new i.Z(e,l.ZP)})),p=d(m)},44765(e,t,r){r.d(t,{Fs:()=>c,R9:()=>n,ZP:()=>u});var n,s,a=r(47178),i=r(7837),o=r(67294),l=r(18626);function u(e){var t,r;if((0,l.TE)(),!e.permission)return o.createElement(o.Fragment,null,e.children);let s=c(e.permission,{mode:null!==(t=e.mode)&&void 0!==t?t:null!=e.resourceID?n.RESOURCE_IF_JUNCTION:n.GLOBAL_OR_RESOURCE,resourceType:e.resourceType,resourceID:e.resourceID})?e.children:null!==(r=e.fallback)&&void 0!==r?r:null;return o.createElement(o.Fragment,null,s)}function c(e,t){let{permissions:r}=(0,i.ZP)().getState().users,s=e;if(Array.isArray(s)||(s=[s]),!r.data||r.status!==a.Px.SUCCESS)return!1;if(r.data.isAdmin)return!0;t||(t={mode:n.GLOBAL_OR_RESOURCE});let{resourceID:o,resourceType:l}=t;l||(l="global",o=null);let u=!1;if(null!=o&&null!=l){var c,m,d,p,f;let v=null===(c=r.data.junctionAliases)||void 0===c?void 0:c[l];v&&(o=null!==(p=null!==(d=v[o])&&void 0!==d?d:v[o.toString()])&&void 0!==p?p:o);let g=null!==(f=null===(m=r.data.junctions)||void 0===m?void 0:m[l])&&void 0!==f?f:null;g&&(u=g.includes(o))}let b=r.data.permissions.filter(e=>{let r="global"===e.type,s=e.type===l&&e.id===o;switch(t.mode){case n.RESOURCE_IF_JUNCTION:return u?s:r;case n.GLOBAL:return r;case n.GLOBAL_OR_RESOURCE:return!0;case n.RESOURCE:return s}}),y=!1;return b.forEach(e=>{for(let[t,r]of Object.entries(e.permissions))s.includes(t)&&r&&(y=!0)}),y}(s=n||(n={})).GLOBAL="global",s.RESOURCE="resource",s.GLOBAL_OR_RESOURCE="globalOrResource",s.RESOURCE_IF_JUNCTION="resourceIfJunction"},45835(e,t,r){r.d(t,{Z:()=>d,_:()=>p});var n=r(47178),s=r(75741),a=r(99308),i=r(57557),o=r.n(i);function l(e,t,r,n,s,a,i){try{var o=e[a](i),l=o.value}catch(u){r(u);return}o.done?t(l):Promise.resolve(l).then(n,s)}function u(e){return function(){var t=this,r=arguments;return new Promise(function(n,s){var a=e.apply(t,r);function i(e){l(a,n,s,i,o,"next",e)}function o(e){l(a,n,s,i,o,"throw",e)}i(void 0)})}}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let m=(0,a.Jy)("@@users"),d=class e extends s.ZP{constructor(...t){super(...t),this.getMe=()=>{let t=this.getState().users.current;if(t.status===n.Px.LOADING)return;var r=this;let a=(0,s.KP)(e.getMeACs,u(function*(){let e=yield r.api.get("/users/me");return null==e?void 0:e.data}))();return this.dispatch(a)},this.getPermissions=()=>{let t=this.getState().users.permissions;if(t.status!==n.Px.PENDING)return;var r=this;let a=(0,s.KP)(e.getPermissionsACs,u(function*(){let e=yield r.api.get("/users/$me/permissions?expand=junctions");return null==e?void 0:e.data}))();return this.dispatch(a)},this.checkCountData=()=>{let t=new Date().getTime(),{lastRequested:r}=this.getState().users.countInformation;if(null!==r&&t<r+60)return;var n=this;let a=(0,s.KP)(e.getCountsACs,u(function*(){let e=yield n.api.get("/users/me-counts");return e.data}))();return this.dispatch(a)},this.getUserByID=t=>{let{userID:r}=t;var n=this;let a=(0,s.KP)(e.getUserACs,u(function*(){let e=yield n.api.get(`/users/${r}/?expand[]=all`);return e.data}))({userID:r});return this.dispatch(a)},this.postUser=t=>{var r=this;let n=(0,s.KP)(e.postUserACs,u(function*(){let e=yield r.api.post("/users",t);return e.data}))(t);return this.dispatch(n)},this.clearInviteUsers=this.bindDispatch(e.clearInviteUsersAC),this.inviteUsersByGroupID=t=>{let{groupID:r,userIDs:n,emails:a}=t,i={userIDs:n,emails:a};var o=this;let l=(0,s.KP)(e.inviteUsersACs,u(function*(){let e=yield o.api.post(`/groups/${r}/invitations`,i);return e.data}))(t);return this.dispatch(l)},this.updateIDs=({userID:t,IDs:r})=>{this.dispatch(e.updateInviteeIDsAC({userID:t,IDs:r}))},this.updateEmails=({userID:t,emails:r})=>{this.dispatch(e.updateInviteeEmailsAC({userID:t,emails:r}))},this.updateEmailsString=({userID:t,emailsString:r})=>{this.dispatch(e.updateInviteeEmailsStringAC({userID:t,emailsString:r}))},this.updateInvitees=({userID:t,invitees:r})=>{this.dispatch(e.updateInviteesAC({userID:t,invitees:r}))},this.patchUser=t=>{let{userID:r}=t,n=`${r}-${t.patchID}`;var a,i,l=this;let m=(0,s.KP)(e.patchUserAC,u(function*(){let e=yield l.api.patch(`/users/${r}`,o()(t,"patchID"));return e.data}))((a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){c(e,t,r[t])})}return e}({},t),i=(i={patchID:n},i),Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(i)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(i,e))}),a));return this.dispatch(m)}}};function p(){return(0,s.LO)(d)}d.getMeACs=m.async("GET_ME"),d.getPermissionsACs=m.async("GET_PERMISSIONS"),d.getCountsACs=m.async("GET_ME_COUNTS"),d.getUserACs=m.async("GET_USER"),d.postUserACs=m.async("POST_USER"),d.clearInviteUsersAC=m("CLEAR_INVITE_USER"),d.inviteUsersACs=m.async("INVITE_USERS"),d.updateInviteeIDsAC=m("UPDATE_INVITEE_IDS"),d.updateInviteeEmailsAC=m("UPDATE_INVITEE_EMAIlS"),d.updateInviteeEmailsStringAC=m("UPDATE_INVITEE_EMAIlS_STRING"),d.updateInviteesAC=m("UPDATE_INVITEES"),d.patchUserAC=m.async("PATCH_USER")},74367(e,t,r){r.d(t,{Z:()=>c});var n=r(88895),s=r(47178),a=r(75741),i=r(95774),o=r(224),l=r(23279),u=r.n(l);let c=class e extends a.ZP{static setActiveAC(t,r){return a.ZP.createAction(e.SET_ACTIVE_SUGGESTION,{suggestionID:t,suggestionIndex:r})}static filterSuggestions(e,t){let r=Intl.Collator("en",{usage:"search",sensitivity:"base",ignorePunctuation:!0,numeric:!0});return e.filter(e=>{if(e.name.length<t.length)return!1;let n=e.name.substring(0,t.length);return 0===r.compare(n,t)})}constructor(...t){super(...t),this.setActive=this.bindDispatch(e.setActiveAC),this.interalLoadUsers=t=>this.dispatch((r,a)=>{let l=i.Z.selectSuggestionsTrie(a()),u=l.getValue(t);if(null!=u)switch(u.status){case s.Px.SUCCESS:if(u.data)return r(e.loadUsersACs.response({data:u.data,status:200},{username:t}));break;case s.Px.LOADING:return;case s.Px.ERROR:if(u.error)return r(e.loadUsersACs.error(u.error,{username:t}))}let c=l.getValueFromPartialsOfWord(t);if(null!=c)switch(c.status){case s.Px.SUCCESS:if(c.data&&c.data.length<e.USER_LIMIT)return r(e.loadUsersACs.response({data:e.filterSuggestions(c.data,t),status:200},{username:t}));case s.Px.ERROR:case s.Px.PENDING:}r(e.loadUsersACs.request({username:t}));let m={name:t+"*",order:"mention",limit:e.USER_LIMIT};return o.ZP.get("/users/by-names/",{params:m}).then(n=>{if(n.status>=500)throw Error(n.data);n.data=n.data.map(e=>(e.domID="mentionSuggestion"+e.userID,e)),r(e.loadUsersACs.response(n,{username:t}))}).catch(s=>{(0,n.H)(s),r(e.loadUsersACs.error(s,{username:t}))})}),this.loadUsers=u()(this.interalLoadUsers,50)}};c.SET_ACTIVE_SUGGESTION="@@mentions/SET_ACTIVE_SUGGESTION",c.LOAD_USERS_REQUEST="@@mentions/GET_USERS_REQUEST",c.LOAD_USERS_RESPONSE="@@mentions/LOAD_USERS_RESPONSE",c.LOAD_USERS_ERROR="@@mentions/LOAD_USERS_ERROR",c.USER_LIMIT=50,c.loadUsersACs=a.ZP.generateApiActionCreators(c.LOAD_USERS_REQUEST,c.LOAD_USERS_RESPONSE,c.LOAD_USERS_ERROR,{},{})},95774(e,t,r){r.d(t,{Z:()=>c});var n=r(47178);let s=class{insert(e,t){let r=this.root;for(let n=0;n<e.length;n++){let s=e[n];if(r.children||(r.children={}),!(s in r.children)){let a=n!==e.length-1?{}:{children:{}};r.children[s]=a}r=r.children[s]}r.value=t}getNode(e){let t=this.root;if(void 0===e)return t;for(let r=0;r<e.length;r++){let n=e.charAt(r);if(!t.children||!t.children[n])return null;t=t.children[n]}return t}getValue(e){let t=this.getNode(e);return t&&t.value||null}getValueFromPartialsOfWord(e){let t=Math.min(this.MAX_PARTIAL_LOOKUP_ITERATIONS,e.length);for(let r=t;r>0;r--){let n=e.substring(0,r),s=this.getValue(n);if(null!=s)return s}return null}constructor(){this.MAX_PARTIAL_LOOKUP_ITERATIONS=10,this.root={}}};var a=r(74367),i=r(34068);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){o(e,t,r[t])})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let c=class e{static mapStateToProps(t){let r=l({},e.stateSlice(t)),{trie:s}=r,a=function(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(r,["trie"]),i=r.lastSuccessfulUsername&&s.getValue(r.lastSuccessfulUsername)||e.defaultSuggestions,o=r.currentUsername&&s.getValue(r.currentUsername),c=!!o&&o.status===n.Px.LOADING;return u(l({},a),{suggestions:i,isLoading:c})}static selectSuggestionsTrie(t){return e.stateSlice(t).trie}static stateSlice(e){if(!e.users||!e.users.suggestions)throw Error(`Could not find users.suggestions in state ${e}. Be sure to initialize the usersReducer()`);return e.users.suggestions}static sortSuggestions(e,t,r=new Date){let n=Intl.Collator("en",{usage:"sort",sensitivity:"variant",ignorePunctuation:!0,numeric:!0}),s=[],a=[],o=(0,i.mM)(r,90);for(let l of e){if(!l.dateLastActive){a.push(l);continue}let u=l.dateLastActive?new Date(l.dateLastActive):new Date;(0,i.LY)(u,o)?s.push(l):a.push(l)}let c=(e,r)=>{let s=t.toLocaleLowerCase(),a=e.name.toLocaleLowerCase(),i=r.name.toLocaleLowerCase();return a.startsWith(s)&&!i.startsWith(s)?-1:i.startsWith(s)&&!a.startsWith(s)?1:n.compare(e.name.toLocaleLowerCase(),r.name.toLocaleLowerCase())},m=(e,r)=>{let n=t.toLocaleLowerCase(),s=e.name.toLocaleLowerCase();return s===n?-1:0};s.sort(c),a.sort(c);let d=[...s,...a];return d.sort(m),d}constructor(){this.initialState={lastSuccessfulUsername:null,currentUsername:null,trie:new s,activeSuggestionID:"",activeSuggestionIndex:0},this.reducer=(t=this.initialState,r)=>{switch(r.type){case a.Z.LOAD_USERS_REQUEST:{let{username:s}=r.meta;t.trie.insert(s,{status:n.Px.LOADING});let i=!1,o=t.lastSuccessfulUsername;if(null!=o&&s.length>=o.length){let c=s.substring(0,o.length);c===o&&(i=!0)}return u(l({},t),{currentUsername:s,lastSuccessfulUsername:i?t.lastSuccessfulUsername:null})}case a.Z.LOAD_USERS_ERROR:{let m=r.payload,{username:d}=r.meta;return t.trie.insert(d,{status:n.Px.ERROR,data:void 0,error:m}),t}case a.Z.LOAD_USERS_RESPONSE:{let p=r.payload.data,{username:f}=r.meta;t.trie.insert(f,{status:n.Px.SUCCESS,data:e.sortSuggestions(p,f)});let v=p.length>0?p[0].domID:"";return u(l({},t),{activeSuggestionID:v,activeSuggestionIndex:0,lastSuccessfulUsername:f,currentUsername:f})}case a.Z.SET_ACTIVE_SUGGESTION:{let{suggestionID:g,suggestionIndex:b}=r.payload;return u(l({},t),{activeSuggestionID:g,activeSuggestionIndex:b})}default:return t}}}};c.defaultSuggestions={status:n.Px.PENDING}},4483(e,t,r){r.d(t,{Fk:()=>l,aF:()=>c,tF:()=>u});var n=r(46458),s=r(45835),a=r(67294),i=r(47178),o=r(18626);function l(){return(0,n.v9)(e=>{var t;return null===(t=e.users.current.data)||void 0===t?void 0:t.userID})}function u(){return(0,n.v9)(e=>!!(e.users.current.data&&e.users.current.data.userID!==o._i))}function c(e){let t=(0,s._)(),{userID:r}=e,o=(0,n.v9)(e=>{var t;let n={status:i.Px.PENDING};return null==r?n:null!==(t=e.users.usersByID[r])&&void 0!==t?t:n}),{status:l}=o;return(0,a.useEffect)(()=>{null!=r&&i.Px.PENDING.includes(l)&&t.getUserByID({userID:r})},[l,t,r]),(0,a.useDebugValue)(o),o}r(79089)},18626(e,t,r){r.d(t,{$m:()=>E,KQ:()=>h,TE:()=>I,_i:()=>y,cA:()=>O,eu:()=>P});var n=r(47178),s=r(95774),a=r(45835),i=r(87219),o=r(76983),l=r(33198),u=r(46458),c=r(67294),m=r(66678),d=r.n(m);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){p(e,t,r[t])})}return e}function v(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let g=new s.Z().reducer,b={current:{status:n.Px.PENDING},permissions:{status:n.Px.PENDING},countInformation:{counts:[],lastRequested:null},suggestions:g(void 0,""),usersByID:{},usersInvitationsByID:{},postFormSubmit:{status:n.Px.PENDING},patchStatusByUserID:{},patchStatusByPatchID:{}},y=0;function E(e){return e&&e.userID===y}let O=(0,i.ZP)((0,o.reducerWithInitialState)(d()(b)).case(a.Z.getMeACs.started,e=>(e.current.status=n.Px.LOADING,e)).case(a.Z.getMeACs.done,(e,t)=>(e.current.data=t.result,e.current.status=n.Px.SUCCESS,e)).case(a.Z.getMeACs.failed,(e,t)=>(e.current.status=n.Px.ERROR,e.current.error=t.error,e)).case(a.Z.getPermissionsACs.started,e=>(e.permissions.status=n.Px.LOADING,e)).case(a.Z.getPermissionsACs.done,(e,t)=>(e.permissions.data=t.result,e.permissions.status=n.Px.SUCCESS,e)).case(a.Z.getPermissionsACs.failed,(e,t)=>(e.permissions.status=n.Px.ERROR,e.permissions.error=t.error,e)).case(a.Z.getCountsACs.started,e=>(e.countInformation.lastRequested=new Date().getTime(),e)).case(a.Z.getCountsACs.done,(e,t)=>(e.countInformation.counts=t.result.counts,e)).case(a.Z.getUserACs.started,(e,t)=>{let{userID:r}=t;return e.usersByID[r]={status:n.Px.LOADING},e}).case(a.Z.getUserACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.getUserACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersByID[r]={status:n.Px.ERROR,error:t.error},e}).case(a.Z.postUserACs.started,(e,t)=>(e.postFormSubmit.status=n.Px.LOADING,e)).case(a.Z.postUserACs.failed,(e,t)=>(e.postFormSubmit.status=n.Px.ERROR,e.postFormSubmit.error=t.error,e)).case(a.Z.postUserACs.done,(e,t)=>{let r=t.result.userID;return e.postFormSubmit.status=n.Px.SUCCESS,e.usersByID[r]={data:t.result,status:n.Px.SUCCESS},e}).case(a.Z.inviteUsersACs.started,(e,t)=>{let{userID:r}=t;return e.usersInvitationsByID[r].results={status:n.Px.LOADING},e}).case(a.Z.inviteUsersACs.done,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.SUCCESS,data:t.result},e.usersInvitationsByID[r].emailsString="",e.usersInvitationsByID[r].invitees=[],e}).case(a.Z.clearInviteUsersAC,(e,t)=>{let{userID:r}=t;return delete e.usersInvitationsByID[r],e}).case(a.Z.inviteUsersACs.failed,(e,t)=>{let{userID:r}=t.params;return e.usersInvitationsByID[r].results={status:n.Px.ERROR,error:t.error},e}).case(a.Z.updateInviteeIDsAC,(e,t)=>{var r,n;let{userID:s,IDs:a}=t;return e.usersInvitationsByID[s]=v(f({},e.usersInvitationsByID[s]),{userIDs:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.userIDs)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteesAC,(e,t)=>{let{userID:r,invitees:n}=t;return e.usersInvitationsByID[r]=v(f({},e.usersInvitationsByID[r]),{invitees:n}),e}).case(a.Z.updateInviteeEmailsAC,(e,t)=>{var r,n;let{userID:s,emails:a}=t;return e.usersInvitationsByID[s]=v(f({},e.usersInvitationsByID[s]),{emails:[...null!==(n=null===(r=e.usersInvitationsByID[s])||void 0===r?void 0:r.emails)&&void 0!==n?n:[],...a]}),e}).case(a.Z.updateInviteeEmailsStringAC,(e,t)=>{let{userID:r,emailsString:n}=t;return e.usersInvitationsByID[r]=v(f({},e.usersInvitationsByID[r]),{emailsString:n}),e}).case(a.Z.patchUserAC.started,(e,t)=>{var r;let{patchID:s}=t;return e.patchStatusByPatchID[s]=v(f({},null!==(r=e.patchStatusByPatchID[s])&&void 0!==r?r:{}),{status:n.Px.LOADING}),e}).case(a.Z.patchUserAC.done,(e,t)=>{var r,s;let{userID:a,patchID:i}=t.params;return(null===(r=e.usersByID[a])||void 0===r?void 0:r.data)&&(e.usersByID[a].data=f({},null===(s=e.usersByID[a])||void 0===s?void 0:s.data,t.result)),e.patchStatusByPatchID[i]={status:n.Px.SUCCESS},e}).case(a.Z.patchUserAC.failed,(e,t)=>{let{patchID:r}=t.params;return e.patchStatusByPatchID[r]={status:n.Px.ERROR,error:t.error},e}).default((e,t)=>(t.type===l.Z.MARK_ALL_READ_RESPONSE&&e.current.data&&(e.current.data.countUnreadNotifications=0),e.suggestions=g(e.suggestions,t),e)));function h(e){if(!e.users||!e.users.current)throw Error(`It seems you did not initialize the users model correctly. Could not find "users.current" in state: ${e}`);return{currentUser:e.users.current}}function P(){return(0,u.v9)(h)}function I(){let e=(0,u.v9)(e=>e.users.permissions),{getPermissions:t}=(0,a._)(),{status:r}=e;return(0,c.useEffect)(()=>{[n.Px.PENDING,n.Px.LOADING].includes(r)&&t()},[r,t]),e}}}]);