"use strict";(self.webpackChunkvanillaadmin_new=self.webpackChunkvanillaadmin_new||[]).push([[5852],{3592(e,t,s){s.d(t,{Z:()=>a});var n=s(75741);let i=class e extends n.ZP{constructor(...t){super(...t),this.getConversations=(t={})=>this.dispatchApi("get","/conversations",e.getConversationsACs,t)}};i.GET_CONVERSATIONS_REQUEST="@@conversations/GET_CONVERSATIONS_REQUEST",i.GET_CONVERSATIONS_RESPONSE="@@conversations/GET_CONVERSATIONS_RESPONSE",i.GET_CONVERSATIONS_ERROR="@@conversations/GET_CONVERSATIONS_ERROR",i.getConversationsACs=n.ZP.generateApiActionCreators(i.GET_CONVERSATIONS_REQUEST,i.GET_CONVERSATIONS_RESPONSE,i.GET_CONVERSATIONS_ERROR,{},{});var o=s(87219),r=s(47178);let a=class{constructor(){this.initialState={conversationsByID:{data:{},status:r.Px.PENDING}},this.reducer=(e=this.initialState,t)=>(0,o.ZP)(e,e=>{switch(t.type){case i.GET_CONVERSATIONS_REQUEST:e.conversationsByID.status=r.Px.LOADING;break;case i.GET_CONVERSATIONS_RESPONSE:{e.conversationsByID.status=r.Px.SUCCESS,e.conversationsByID.data={};let s=t.payload.data;s.forEach(t=>{e.conversationsByID.data[t.conversationID]=t});break}case i.GET_CONVERSATIONS_ERROR:e.conversationsByID.status=r.Px.ERROR,e.conversationsByID.error=t.payload}})}}},70886(e,t,s){s.d(t,{G:()=>O,Z:()=>h});var n=s(75741),i=s(99308),o=s(25325),r=s.n(o),a=s(88719);function c(e,t,s,n,i,o,r){try{var a=e[o](r),c=a.value}catch(l){s(l);return}a.done?t(c):Promise.resolve(c).then(n,i)}function l(e){return function(){var t=this,s=arguments;return new Promise(function(n,i){var o=e.apply(t,s);function r(e){c(o,n,i,r,a,"next",e)}function a(e){c(o,n,i,r,a,"throw",e)}r(void 0)})}}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){u(e,t,s[t])})}return e}function p(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s.push.apply(s,n)}return s})(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}),e}let y=(0,i.Jy)("@@discussions"),h=class e extends n.ZP{constructor(...t){super(...t),this.getDiscussionList=t=>{var s=this;let i=(0,n.KP)(e.getDiscussionListACs,l(function*(){let e=["insertUser","breadcrumbs"],n=yield s.api.get("/discussions",{params:p(d({},t),{expand:t.expand&&t.expand.length?[...e,...t.expand]:e})}),i=a.Z.parseHeaders(n.headers);return{data:n.data,pagination:i}}))(t);return this.dispatch(i)},this.getDiscussionByID=t=>{let{discussionID:s}=t;var i=this;let o=(0,n.KP)(e.getDiscussionByIDACs,l(function*(){let e=yield i.api.get(`/discussions/${s}`,{params:{expand:["insertUser","breadcrumbs"]}});return e.data}))({discussionID:s});return this.dispatch(o)},this.patchDiscussion=t=>{let{discussionID:s,patchStatusID:i}=t,o=function(e,t){if(null==e)return{};var s,n,i=function(e,t){if(null==e)return{};var s,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)s=o[n],t.indexOf(s)>=0||(i[s]=e[s]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)s=o[n],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(i[s]=e[s])}return i}(t,["discussionID","patchStatusID"]),r={params:{expand:["category"]}};var a=this;let c=(0,n.KP)(e.patchDiscussionACs,l(function*(){let e=yield a.api.patch(`/discussions/${s}`,o,r);return e.data}))(t);return this.dispatch(c)},this.putDiscussionType=t=>{let{discussionID:s,type:i}=t;var o=this;let r=(0,n.KP)(e.putDiscussionTypeACs,l(function*(){let e=yield o.api.put(`/discussions/${s}/type`,{type:i});return e.data}))({discussionID:s,type:i});return this.dispatch(r)},this.putDiscussionBookmarked=t=>{let{discussionID:s,bookmarked:i}=t;var o=this;let r=(0,n.KP)(e.putDiscussionBookmarkedACs,l(function*(){let e=yield o.api.put(`/discussions/${s}/bookmark`,{bookmarked:i});return e.data}))({discussionID:s,bookmarked:i});return this.dispatch(r)},this.postDiscussionReaction=t=>{let{discussionID:s,reaction:i}=t;var o=this;let r=(0,n.KP)(e.postDiscussionReactionACs,l(function*(){let e=yield o.api.post(`/discussions/${s}/reactions`,{reactionType:i.urlcode});return e.data}))(t);return this.dispatch(r)},this.deleteDiscussionReaction=t=>{let{discussionID:s}=t;var i=this;let o=(0,n.KP)(e.deleteDiscussionReactionACs,l(function*(){let e=yield i.api.delete(`/discussions/${s}/reactions`);return e.data}))(t);return this.dispatch(o)},this.deleteDiscussion=t=>{let{discussionID:s}=t;var i,o=this;let r=(i=l(function*(){let e=yield o.api.delete(`/discussions/${s}`);return e.data}),function(){return i.apply(this,arguments)}),a=(0,n.KP)(e.deleteDiscussionACs,r)({discussionID:s});return this.dispatch(a)},this.bulkDeleteDiscussion=t=>{let{discussionIDs:s}=t;var i,o=this;let r=(i=l(function*(){let e=yield o.api.delete("/discussions/list",{params:{longRunnerMode:"sync"},data:{discussionIDs:s}});return e.data}),function(){return i.apply(this,arguments)}),a=(0,n.KP)(e.bulkDeleteDiscussionsACs,r)({discussionIDs:s});return this.dispatch(a)},this.putDiscussionTags=t=>{let{discussionID:s,tagIDs:i}=t;var o=this;let r=(0,n.KP)(e.putDiscussionTagsACs,l(function*(){let e=yield o.api.put(`/discussions/${s}/tags`,{tagIDs:i});return e.data}))({discussionID:s,tagIDs:i});return this.dispatch(r)},this.getDiscussionByIDs=(t,s=!1)=>{let{discussionIDs:i}=t;if(t.limit||(t.limit=t.discussionIDs.length),s){let o=Object.keys(this.getState().discussions.discussionsByID).map(e=>parseInt(e));i=r()(i,o)}if(0===i.length)return Promise.resolve([]);var a=this;let c=(0,n.KP)(e.getDiscussionsByIDsAC,l(function*(){let e=yield a.api.get("/discussions",{params:p(d({},t),{discussionID:t.discussionIDs})});return e.data}))(t);return this.dispatch(c)},this.bulkMoveDiscussions=t=>{let{discussionIDs:s,categoryID:i,addRedirects:o,category:r}=t;var a,c=this;let u=(a=l(function*(){let e=yield c.api.patch("discussions/move",{discussionIDs:s,categoryID:i,addRedirects:o},{params:{longRunnerMode:"sync"}});return e.data}),function(){return a.apply(this,arguments)}),d=(0,n.KP)(e.bulkMoveDiscussionsACs,u)({discussionIDs:s,categoryID:i,addRedirects:o,category:r});return this.dispatch(d)},this.bulkCloseDiscussions=t=>{let{discussionIDs:s,closed:i}=t;var o,r=this;let a=(o=l(function*(){let e=yield r.api.patch("discussions/close",{discussionIDs:s,closed:i},{params:{longRunnerMode:"sync"}});return e.data}),function(){return o.apply(this,arguments)}),c=(0,n.KP)(e.bulkCloseDiscussionsACs,a)({discussionIDs:s,closed:i});return this.dispatch(c)},this.getCategoryByID=t=>{let{categoryID:s}=t;var i=this;let o=(0,n.KP)(e.getCategoryByIDACs,l(function*(){let e=yield i.api.get(`/categories/${s}`);return e.data}))({categoryID:s});return this.dispatch(o)}}};function O(){return(0,n.LO)(h)}h.getDiscussionListACs=y.async("GET_DISCUSSION_LIST"),h.getDiscussionByIDACs=y.async("GET_DISCUSSION"),h.patchDiscussionACs=y.async("PATCH_DISCUSSION"),h.putDiscussionTypeACs=y.async("PUT_DISCUSSION_TYPE"),h.putDiscussionBookmarkedACs=y.async("PUT_DISCUSSION_BOOKMARKED"),h.postDiscussionReactionACs=y.async("POST_DISCUSSION_REACTION"),h.deleteDiscussionReactionACs=y.async("DELETE_DISCUSSION_REACTION"),h.deleteDiscussionACs=y.async("DELETE_DISCUSSION"),h.bulkDeleteDiscussionsACs=y.async("BULK_DELETE_DISCUSSIONS"),h.putDiscussionTagsACs=y.async("PUT_DISCUSSION_TAGS"),h.getDiscussionsByIDsAC=y.async("GET_DISCUSSIONS_BY_ID"),h.bulkMoveDiscussionsACs=y.async("BULK_MOVE_DISCUSSIONS"),h.bulkCloseDiscussionsACs=y.async("BULK_CLOSE_DISCUSSIONS"),h.getCategoryByIDACs=y.async("GET_CATEGORY")},8590(e,t,s){s.d(t,{Z:()=>c});var n=s(67294),i=s(24716),o=s(16760);function r(e,t,s,n,i,o,r){try{var a=e[o](r),c=a.value}catch(l){s(l);return}a.done?t(c):Promise.resolve(c).then(n,i)}let a=({discussion:e})=>{let{toggleDiscussionBookmarked:t,isBookmarked:s}=(0,i.yj)(e.discussionID);function a(){var e;return(a=(e=function*(){t(!s)},function(){var t=this,s=arguments;return new Promise(function(n,i){var o=e.apply(t,s);function a(e){r(o,n,i,a,c,"next",e)}function c(e){r(o,n,i,a,c,"throw",e)}a(void 0)})})).apply(this,arguments)}return n.createElement(o.Z,{bookmarked:!!s,onToggleBookmarked:function(){return a.apply(this,arguments)}})},c=a},64415(e,t,s){s.d(t,{o:()=>k,f:()=>A});var n,i=s(67294),o=s(39607),r=s(33691),a=s(17903),c=s(24716),l=s(24778),u=s(44765),d=s(30731),p=s(33188),y=s(38443),h=s(26458),O=s(57298);function m(e){let{selectedIDs:t,handleSelectionClear:s,handleBulkDelete:n,handleBulkMove:o,handleBulkMerge:r,handleBulkClose:m}=e,E=(0,l.E)(),v=(0,i.useMemo)(()=>t.map(e=>Number(e)),[t]),D=v.length,b=(0,c.oJ)(null!=v?v:[]),f=(e,t)=>t?Object.values(t).map(t=>(0,u.Fs)(e,{resourceType:"category",mode:u.R9.RESOURCE_IF_JUNCTION,resourceID:t.categoryID})?null:t.name).filter(e=>e):[],S=(0,i.useMemo)(()=>{if(b){let e=Object.values(b).filter(({closed:e})=>!e);return 0===e.length}return!1},[b]),g=(0,i.useMemo)(()=>f("discussions.manage",b),[b]);return i.createElement(i.Fragment,null,i.createElement("span",{className:E.bulkActionsText},i.createElement(a.Z,{source:"You have selected <0/> discussions.",c0:t.length})),i.createElement("div",{className:E.bulkActionsButtons},i.createElement(d.Z,{onClick:s,buttonType:p.q.TEXT},(0,O.t)("Cancel")),i.createElement(y.Z,{condition:g.length>0,component:h.e,componentProps:{label:`${(0,O.t)("You don’t have the edit permission on the following discussions:")} ${g.join(", ")}`}},i.createElement("span",null,i.createElement(d.Z,{onClick:o,buttonType:p.q.TEXT,disabled:g.length>0},(0,O.t)("Move")))),i.createElement(y.Z,{condition:g.length>0||D<2,component:h.e,componentProps:{label:D<2?(0,O.t)("You must select at least 2 discussions to merge."):`${(0,O.t)("You don’t have the edit permission on the following discussions:")} ${g.join(", ")}`}},i.createElement("span",null,i.createElement(d.Z,{onClick:r,buttonType:p.q.TEXT,disabled:g.length>0||D<2},(0,O.t)("Merge")))),i.createElement(y.Z,{condition:g.length>0,component:h.e,componentProps:{label:`${(0,O.t)("You don't have the close permission on the following discussions:")} ${g.join(", ")}`}},i.createElement("span",null,i.createElement(d.Z,{onClick:m,buttonType:p.q.TEXT,disabled:g.length>0||S},(0,O.t)("Close")))),i.createElement(y.Z,{condition:g.length>0,component:h.e,componentProps:{label:`${(0,O.t)("You don’t have the delete permission on the following discussions:")} ${g.join(", ")}`}},i.createElement("span",null,i.createElement(d.Z,{onClick:n,buttonType:p.q.TEXT,disabled:g.length>0},(0,O.t)("Delete"))))))}var E,v=s(16929),D=s(61175),b=s(36503),f=s(6201),S=s(62425),g=s(21965);function C(e){let{visibility:t,onVisibilityChange:s,bulkActionType:n}=e,o=(0,i.useMemo)(()=>{if(n){var e;return null!==(e=({delete:v.Z,move:b.Z,merge:D.x,close:f.Z})[n])&&void 0!==e?e:null}return null},[n]),r=()=>s(!1);return i.createElement(S.Z,{isVisible:t,size:g.Z.MEDIUM,exitHandler:r},o&&i.createElement(o,{onCancel:r}))}function I(e){let{action:t,setAction:s}=e;return i.createElement(C,{visibility:!!t,onVisibilityChange(e){!1===e&&s(null)},bulkActionType:t})}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}(E=n||(n={})).DELETE="delete",E.MERGE="merge",E.MOVE="move",E.CLOSE="close";let T=i.createContext({checkedDiscussionIDs:[],pendingActionIDs:[],addCheckedDiscussionsByIDs(){},removeCheckedDiscussionsByIDs(){},addPendingDiscussionByIDs(){},removePendingDiscussionByIDs(){}});function A(){return(0,i.useContext)(T)}function k(e){let{children:t}=e,s=(0,l.E)(),{addToast:a,updateToast:c,removeToast:u}=(0,r.pm)(),[d,p]=(0,o.Xs)("checkedDiscussionsIDs",[]),[y,h]=(0,o.Xs)("pendingDiscussionIDs",[]),[O,E]=(0,i.useState)({}),[v,D]=(0,i.useState)(null),b=e=>Array.isArray(e)?e:[e],f=e=>{p([...new Set([...d,...b(e)])])},S=e=>{p(t=>t.filter(t=>!b(e).includes(t)))},g=e=>{h([...new Set([...y,...b(e)])])},C=e=>{S(e),h(t=>t.filter(t=>!b(e).includes(t)))},A=()=>{p([])},k=(0,i.useMemo)(()=>d.length>0?i.createElement(m,{selectedIDs:d,handleSelectionClear:A,handleBulkDelete:()=>D(n.DELETE),handleBulkMove:()=>D(n.MOVE),handleBulkMerge:()=>D(n.MERGE),handleBulkClose:()=>D(n.CLOSE)}):null,[d]);return(0,i.useEffect)(()=>{let e=O.action;k&&!e?E({action:a({persistent:!0,body:k,className:s.bulkActionsToast})}):c(e,{body:k}),!k&&e&&(u(e),E(e=>{var t,s;return t=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){P(e,t,s[t])})}return e}({},e),s=(s={action:null},s),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):(function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s.push.apply(s,n)}return s})(Object(s)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}),t}))},[k]),i.createElement(T.Provider,{value:{checkedDiscussionIDs:d,pendingActionIDs:y,addCheckedDiscussionsByIDs:f,removeCheckedDiscussionsByIDs:S,addPendingDiscussionByIDs:g,removePendingDiscussionByIDs:C}},i.createElement(I,{action:v,setAction:D}),t)}},58318(e,t,s){s.d(t,{Z:()=>l});var n=s(47178),i=s(17476),o=s(62884),r=s(24716),a=s(37703),c=s(67294);function l(e){var t;let s=(0,r.kc)(e.apiParams,e.discussions);return s.status===n.Px.LOADING||s.status===n.Px.PENDING?c.createElement(a.Z,null):(null===(t=s.data)||void 0===t?void 0:t.discussionList)&&s.status!==n.Px.ERROR&&!s.error?c.createElement(o.P,Object.assign({discussions:s.data.discussionList},e)):c.createElement(i.ed,{apiError:s.error})}},62884(e,t,s){s.d(t,{P:()=>d});var n=s(82832),i=s(17102),o=s(33879),r=s(32353),a=s(67294);function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},n=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),n.forEach(function(t){c(e,t,s[t])})}return e}function u(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);s.push.apply(s,n)}return s})(Object(t)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(t,s))}),e}function d(e){var t,s,c,d,p,y,h,O,m,E,v;let{discussions:D,discussionOptions:b,disableButtonsInItems:f,containerOptions:S,title:g,subtitle:C,description:I}=e,P=(0,o.b5)(S),T=0;D&&D.length<(null!==(E=null==S?void 0:S.maxColumnCount)&&void 0!==E?E:3)&&(T=(null!==(v=null==S?void 0:S.maxColumnCount)&&void 0!==v?v:3)-D.length);let A=u(l({},b),{metas:u(l({},null==b?void 0:b.metas),{asIcons:!0,display:u(l({},null==b?void 0:null===(t=b.metas)||void 0===t?void 0:t.display),{category:!1,startedByUser:!1,lastUser:null==b?void 0:null===(s=b.metas)||void 0===s?void 0:null===(c=s.display)||void 0===c?void 0:c.lastUser,lastCommentDate:!1,viewCount:null==b?void 0:null===(d=b.metas)||void 0===d?void 0:null===(p=d.display)||void 0===p?void 0:p.viewCount,commentCount:null==b?void 0:null===(y=b.metas)||void 0===y?void 0:null===(h=y.display)||void 0===h?void 0:h.commentCount,score:null==b?void 0:null===(O=b.metas)||void 0===O?void 0:null===(m=O.display)||void 0===m?void 0:m.score,userTags:!1,unreadCount:!1})})});return a.createElement(i.h,{title:g,subtitle:C,description:I,options:l({},S),extraHeader:e.assetHeader},D&&D.map(t=>a.createElement(n.Z,{noCheckboxes:e.noCheckboxes,discussion:t,key:t.discussionID,className:(0,r.nv)().root,discussionOptions:A,asTile:!0,disableButtonsInItems:f})),[...Array(T)].map((e,t)=>a.createElement("div",{key:"spacer-"+t,className:P.gridItemSpacer})))}}}]);