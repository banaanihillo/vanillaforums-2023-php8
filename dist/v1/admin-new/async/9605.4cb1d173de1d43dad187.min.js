"use strict";(self.webpackChunkvanillaadmin_new=self.webpackChunkvanillaadmin_new||[]).push([[9605],{40927(e,t,n){n.d(t,{OK:()=>f,td:()=>m,x4:()=>g,nP:()=>b,mQ:()=>p});var o=n(67294);function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("--")}function i(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.useMemo)(function(){return t.every(function(e){return null==e})?null:function(e){t.forEach(function(t){!function(e,t){if(null!=e){if("function"==typeof e)e(t);else try{e.current=t}catch(n){throw Error('Cannot assign value "'+t+'" to ref "'+e+'"')}}}(t,e)})}},t)}n(45697),n(42473);var a=!1,l=0,s=function(){return++l},c=function(e){var t=e||(a?s():null),n=(0,o.useState)(t),r=n[0],i=n[1];return(0,o.useLayoutEffect)(function(){null===r&&i(s())},[]),(0,o.useEffect)(function(){!1===a&&(a=!0)},[]),r};function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}var p=(0,o.forwardRef)(function(e,t){var n=e.children,r=e.as,i=e.onChange,a=e.index,l=void 0===a?void 0:a,s=e.readOnly,p=void 0!==s&&s,m=e.defaultIndex,f=d(e,["children","as","onChange","index","readOnly","defaultIndex"]),b=(0,o.useRef)(null!=l).current,g=c(f.id),y=(0,o.useRef)(!1),v=(0,o.useRef)(null),O=(0,o.useState)(m||0),E=O[0],w=O[1],x=o.Children.map(n,function(e){return h(e)?e:(0,o.cloneElement)(e,{selectedIndex:b?l:E,_id:g,_userInteractedRef:y,_selectedPanelRef:v,_onFocusPanel:function(){return v.current&&v.current.focus()},_onSelectTab:p?function(){}:function(e){y.current=!0,i&&i(e),b||w(e)}})});return o.createElement(void 0===r?"div":r,u({"data-reach-tabs":"",ref:t},f,{children:x}))});p.displayName="Tabs";var m=(0,o.forwardRef)(function(e,t){var n,i,a=e.children,l=e.as,s=e.onKeyDown,c=d(e,["children","as","onKeyDown"]),p=c.selectedIndex,m=c._onSelectTab,f=c._userInteractedRef,b=c._onFocusPanel,g=(c._selectedPanelRef,c._id),y=d(c,["selectedIndex","_onSelectTab","_userInteractedRef","_onFocusPanel","_selectedPanelRef","_id"]),v=o.Children.map(a,function(e,t){return h(e)?e:(0,o.cloneElement)(e,{isSelected:t===p,_id:r(g,t),_userInteractedRef:f,_onSelect:function(){return m(t)}})}),O=(n=s,i=function(e){var t=o.Children.map(a,function(e,t){return!0===e.props.disabled?null:t}).filter(function(e){return null!=e}),n=t.indexOf(p);switch(e.key){case"ArrowRight":m(t[(n+1)%t.length]);break;case"ArrowLeft":var r=t.length;m(t[(n-1+r)%r]);break;case"ArrowDown":e.preventDefault(),b();break;case"Home":m(0);break;case"End":m(o.Children.count(a)-1)}},function(e){if(n&&n(e),!e.defaultPrevented)return i(e)});return o.createElement(void 0===l?"div":l,u({"data-reach-tab-list":"",ref:t,role:"tablist",onKeyDown:O,children:v},y))});m.displayName="TabList";var f=(0,o.forwardRef)(function(e,t){var n,a,l,s=e.children,c=e.as,p=void 0===c?"button":c,m=d(e,["children","as"]),f=m.isSelected,b=m._userInteractedRef,g=m._onSelect,h=m._id,y=d(m,["isSelected","_userInteractedRef","_onSelect","_id"]),v="button"===p&&null==y.type?"button":void 0,O=(0,o.useRef)(null),E=i(t,O);return n=function(){f&&O.current&&b.current&&(b.current=!1,O.current.focus())},a=[f],l=(0,o.useRef)(!1),(0,o.useEffect)(function(){l.current?n():l.current=!0},a),o.createElement(p,u({"data-reach-tab":"",ref:E,role:"tab",id:r("tab",h),tabIndex:f?0:-1,"aria-selected":f,"aria-controls":r("panel",h),"data-selected":f?"":void 0,onClick:g,children:s,type:v},y))});f.displayName="Tab";var b=(0,o.forwardRef)(function(e,t){var n=e.children,i=e.as,a=d(e,["children","as"]),l=a.selectedIndex,s=a._selectedPanelRef,c=(a._userInteractedRef,a._onFocusPanel,a._onSelectTab,a._id),p=d(a,["selectedIndex","_selectedPanelRef","_userInteractedRef","_onFocusPanel","_onSelectTab","_id"]),m=o.Children.map(n,function(e,t){return h(e)?e:(0,o.cloneElement)(e,{isSelected:t===l,_selectedPanelRef:s,_id:r(c,t)})});return o.createElement(void 0===i?"div":i,u({"data-reach-tab-panels":"",ref:t},p,{children:m}))});b.displayName="TabPanels";var g=(0,o.forwardRef)(function(e,t){var n=e.children,a=e.as,l=d(e,["children","as"]),s=l.isSelected,c=l._selectedPanelRef,p=l._id,m=d(l,["isSelected","_selectedPanelRef","_id"]),f=i(t,s?c:null);return o.createElement(void 0===a?"div":a,u({"data-reach-tab-panel":"",ref:f,role:"tabpanel",tabIndex:-1,"aria-labelledby":r("tab",p),hidden:!s,id:r("panel",p),children:n},m))});function h(e){return!e||"string"==typeof e.type}g.displayName="TabPanel"},42965(e,t,n){n.d(t,{u:()=>i});var o=n(62140),r=n(52303);class i{static assetsPerLayoutViewType(e){switch(e){case"home":case"categoryList":default:return[];case"discussionList":return["react.asset.discussionList"]}}static validateAssets(e){let t=this.assetsPerLayoutViewType(e.layoutViewType),n=!0;return t.forEach(t=>{let r=!1;e.layout.forEach(e=>{let n=!r&&o.u[e.$hydrate].regionNames.some(n=>e[n]&&e[n].some(e=>e.$hydrate&&e.$hydrate===t));n&&(r=!0)}),n=r}),{isValid:n,message:n?null:(0,r.t)("Missing required widget")}}static discussionList(){return{$hydrate:"react.section.1-column",children:[{$hydrate:"react.asset.discussionList",apiParams:{includeChildCategories:!0,sort:"-dateInserted",slotType:"a"},discussionOptions:{excerpt:{display:!0},metas:{display:{category:!0,commentCount:!0,lastCommentDate:!0,lastUser:!0,score:!0,startedByUser:!0,unreadCount:!0,userTags:!0,viewCount:!0}}},title:"Recent Discussions"}]}}}},66727(e,t,n){n.d(t,{Vz:()=>f,xM:()=>p});var o=n(42965),r=n(62140),i=n(10923),a=n(87219),l=n(57557),s=n.n(l);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){c(e,t,n[t])})}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}class p{hydrateInternal(e){let t=e.layout.map((e,t)=>this.hydrateNode(e,{sectionIndex:t}));return d(u({},e),{layout:t})}constructor(e,t,n){this.editSpec=e,this.catalog=t,this.onModify=n,this.insertSection=(e,t)=>{let n=this.editSpec.layout.length;if(e>n)throw new m(`Cannot insert section at index '${e}'. Maximum valid index is '${n}'`);let o=this.modifyLayout(n=>i.BB.insertAt(n,t,e));return o},this.deleteSection=e=>{let t=this.modifyLayout(t=>{if(!t[e])throw new m(`Cannot delete section at index '${e}' because that index does not exist.`);return i.BB.removeAt(t,e)});return t},this.moveSection=(e,t)=>{let n=e.sectionIndex,o=t.sectionIndex,r=this.modifyLayout(e=>{if(!e[n])throw new m(`Cannot move section from index '${n}' because that index does not exist.`);if(!e[o])throw new m(`Cannot move section to index '${o}' because that index does not exist.`);return i.BB.move(e,n,o)});return r},this.deleteWidget=e=>this.modifyLayout(t=>{var n,o;let r=t[e.sectionIndex];if(!r)throw new m(`Cannot delete from section at index '${e.sectionIndex}' because that index does not exist.`);let a=null!==(n=r[e.sectionRegion])&&void 0!==n?n:[],l=a.length,s=null!==(o=e.sectionRegionIndex)&&void 0!==o?o:0;if(s>l)throw new m(`Cannot delete widget from region ${e.sectionRegion} at index '${s}'. Maximum valid index is '${l}'`);return r[e.sectionRegion]=i.BB.removeAt(a,s),t}),this.insertWidget=(e,t)=>this.modifyLayout(n=>{var o,r;f.assertDestinationPath(e);let a=n[e.sectionIndex];if(!a)throw new m(`Cannot insert into section at index '${e.sectionIndex}' because that index does not exist.`);let l=null!==(o=a[e.sectionRegion])&&void 0!==o?o:[],s=l.length,c=null!==(r=e.sectionRegionIndex)&&void 0!==r?r:s;if(c>s)throw new m(`Cannot insert widget into region ${e.sectionRegion} at index '${c}'. Maximum valid index is '${s}'`);return a[e.sectionRegion]=i.BB.insertAt(l,t,c),n}),this.modifyWidget=(e,t)=>this.modifyLayout(n=>{var o,r;f.assertDestinationPath(e);let i=n[e.sectionIndex],a=null!==(o=i[e.sectionRegion])&&void 0!==o?o:[];return a[null!==(r=e.sectionRegionIndex)&&void 0!==r?r:a.length]=t,i[e.sectionRegion]=a,n}),this.moveWidget=(e,t)=>this.modifyLayout(n=>{var o,r;f.assertWidgetPath(e),f.assertWidgetPath(t);let a=null!==(o=n[e.sectionIndex][e.sectionRegion])&&void 0!==o?o:null;if(!a)throw new m(`Cannot move from widgetPath ${e.sectionIndex}.${e.sectionRegion} because it doesn't exist.`);let l=null!==(r=n[t.sectionIndex][t.sectionRegion])&&void 0!==r?r:[];if(a===l)n[e.sectionIndex][e.sectionRegion]=i.BB.move(a,e.sectionRegionIndex,t.sectionRegionIndex);else{let s=a[e.sectionRegionIndex];if(null==s)throw new m(`Cannot move from widgetPath ${e.sectionIndex}.${e.sectionRegion}.${e.sectionRegionIndex} because it doesn't exist.`);n[e.sectionIndex][e.sectionRegion]=i.BB.removeAt(a,e.sectionRegionIndex),n[t.sectionIndex][t.sectionRegion]=i.BB.insertAt(l,s,t.sectionRegionIndex)}return n}),this.modifySection=(e,t)=>this.modifyLayout(n=>(n[e]=t,n)),this.modifyLayout=e=>{var t,n;let o=(0,a.ZP)(this.editSpec.layout,e),r=new p(d(u({},this.editSpec),{layout:o}),this.catalog,this.onModify);return null===(n=(t=this).onModify)||void 0===n||n.call(t,r),r},this.validate=()=>o.u.validateAssets({layout:this.editSpec.layout,layoutViewType:this.editSpec.layoutViewType}),this.getEditSpec=()=>this.editSpec,this.getLayout=()=>this.editSpec.layout,this.getSectionCount=()=>this.getLayout().length,this.getSection=e=>{var t;return null!==(t=this.getLayout()[e.sectionIndex])&&void 0!==t?t:null},this.isSectionFullWidth=e=>{let t=this.getSection(e);return(null==t?void 0:t.$hydrate)==="react.section.full-width"},this.getRegion=e=>{var t;return e.sectionRegion&&null!==(t=this.getLayout()[e.sectionIndex][e.sectionRegion])&&void 0!==t?t:null},this.getWidget=e=>{var t;if(!f.isWidgetPath(e))return null;let n=this.getRegion(e);return null!==(t=null==n?void 0:n[e.sectionRegionIndex])&&void 0!==t?t:null},this.getMaxRegionIndex=e=>{var t;let n=this.getSectionInfo(e),o=null!==(t=this.getRegion(e))&&void 0!==t?t:[],r=o.length-1;return(null==n?void 0:n.oneWidgetPerRegion)&&!(r<0)||(r+=1),r},this.getSectionInfo=e=>{var t;let n=this.getSection(e);if(null===n)return null;let o=null!==(t=r.u[n.$hydrate])&&void 0!==t?t:null;return o&&n.isInverted?d(u({},o),{regionNames:o.invertedRegionNames}):o},this.getValidPath=(e,t,n)=>{let o=e.sectionRegion;if(t.regionNames.includes(o))return e;if(1===t.regionNames.length)return d(u({},e),{sectionRegion:t.regionNames[0]});if(["children","mainBottom","middleBottom"].includes(o)){if(t.regionNames.includes("mainBottom"))return d(u({},e),{sectionRegion:"mainBottom"});if(t.regionNames.includes("middleBottom"))return d(u({},e),{sectionRegion:"middleBottom"})}let r=this.getSectionInfo(n),i=r?r.regionNames.indexOf(o):-1;return r&&i>-1&&i>=r.regionNames.length-1?d(u({},e),{sectionRegion:t.regionNames[t.regionNames.length-1]}):d(u({},e),{sectionRegion:t.regionNames[0]})},this.hydrate=()=>this.hydrateInternal(this.editSpec),this.hydrateNode=(e,t)=>{var n;if(null==e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map((e,n)=>this.hydrateNode(e,d(u({},t),{sectionRegionIndex:n})));if(!function(e){if("object"!=typeof e||null==e||!("$hydrate"in e))return!1;let t=e.$hydrate;return!!("string"==typeof t&&t.startsWith("react"))}(e))return e;let o=null===(n=this.widgetCatalog[e.$hydrate])||void 0===n?void 0:n.$reactComponent;null==o&&(o=e.$hydrate);let r=Object.fromEntries(Object.keys(s()(e,"$hydrate","$middleware")).map(n=>[n,this.hydrateNode(e[n],d(u({},t),{sectionRegion:n}))])),i={$componentName:o,$editorPath:t,$hydrate:e.$hydrate};return{$reactComponent:o,$reactProps:u({},r,i)}},Object.freeze(e),this.widgetCatalog=u({},this.catalog.widgets,this.catalog.sections,this.catalog.assets)}}class m extends Error{}class f{static section(e){return{sectionIndex:e}}static destination(e,t){return{sectionIndex:e,sectionRegion:t}}static widget(e,t,n){return{sectionIndex:e,sectionRegion:t,sectionRegionIndex:n}}static isWidgetPath(e){return null!=e.sectionRegion&&null!=e.sectionIndex}static assertWidgetPath(e){if(!this.isWidgetPath(e))throw new m("Expected a full editor path.")}static isDestinationPath(e){return null!=e.sectionRegion}static assertDestinationPath(e){if(!this.isWidgetPath(e))throw new m("Expected a full editor path.")}static areSectionPathsEqual(e,t){return!!e&&!!t&&e.sectionIndex===t.sectionIndex}static areWidgetPathsEqual(e,t){return!!e&&!!t&&this.isWidgetPath(e)&&this.isWidgetPath(t)&&e.sectionIndex===t.sectionIndex&&e.sectionRegion===t.sectionRegion&&e.sectionRegionIndex===t.sectionRegionIndex}}},62140(e,t,n){n.d(t,{u:()=>o});let o={"react.section.3-columns":{regionNames:["leftBottom","middleBottom","rightBottom"],oneWidgetPerRegion:!1,allowColumnInvert:!1},"react.section.2-columns":{regionNames:["mainBottom","secondaryBottom"],oneWidgetPerRegion:!1,allowColumnInvert:!0,invertedRegionNames:["secondaryBottom","mainBottom"]},"react.section.1-column":{regionNames:["children"],oneWidgetPerRegion:!1,allowColumnInvert:!1},"react.section.full-width":{regionNames:["children"],oneWidgetPerRegion:!0,allowColumnInvert:!1}}},99369(e,t,n){n.d(t,{fy:()=>j,jx:()=>I,jJ:()=>C,pX:()=>S});var o=n(66727),r=n(20058),i=n(11590),a=n(75994),l=n(83386),s=n(33091),c=n(59736),u=n(28236),d=n(85938);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let m=(0,u.yI)(()=>{var e,t;let n=(0,i.iv)((e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){p(e,t,n[t])})}return e}({position:"relative",display:"flex",flexDirection:"column"},l.W.box(d.L.box({borderType:s.Tv.SHADOW}))),t=(t={minHeight:(0,c.dd)(80)},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e),";label:LayoutOverview-classes-fauxWidget;"),o=(0,i.iv)({position:"relative",display:"flex",flexDirection:"column",minHeight:(0,c.dd)(200),background:"#f5f5f5"},";label:LayoutOverview-classes-fauxWidgetFullWidth;"),r=(0,i.iv)({display:"flex",width:"100%",height:"100%",flex:1,alignItems:"center",justifyContent:"space-around",userSelect:"none","& p":{fontWeight:"bold",width:"100%",textAlign:"center",fontFamily:(0,a.OF)().fonts.families.monospace}},";label:LayoutOverview-classes-fauxWidgetContent;");return{fauxWidget:n,fauxWidgetFullWidth:o,fauxWidgetContent:r}});var f=n(59245),b=n(47178),g=n(77289),h=n(10855),y=n(72588),v=n(77786),O=n(32812),E=n(36780),w=n(67294),x=n(24504);let P={};function S(e){for(let[t,n]of Object.entries(e))P[t.toLowerCase()]={Component:n}}let C=e=>{var t;return null!==(t=P[e.toLowerCase()])&&void 0!==t?t:null},j=e=>{let t=m();return w.createElement(O.$,{withContainer:e.isFullWidth,tabIndex:-1,className:e.isFullWidth?t.fauxWidgetFullWidth:t.fauxWidget},w.createElement("div",{className:t.fauxWidgetContent},w.createElement("p",null,e.$reactComponent)))};function I(e){let{layoutID:t}=e,n=(0,r.gF)(t),i=(0,r.GP)(t),a=(0,w.useMemo)(()=>i&&n.data?new o.xM(n.data,i):null,[i,n]);return n.status!==b.Px.LOADING&&a?w.createElement(y.Yk,null,w.createElement(h.t6,null,w.createElement(v.N.Provider,{value:{isSticky:!0,autoWrap:!0,useMinHeight:!1}},w.createElement(x.VA,null,w.createElement(E.FU.Provider,{value:{linkContexts:[""],isDynamicNavigation:()=>!0,pushSmartLocation(){},makeHref:()=>"",areLinksDisabled:!1}},w.createElement(g.I.Provider,{value:{fallbackWidget:j,componentFetcher:C}},w.createElement(g.t,{layout:a.hydrate().layout}))))))):w.createElement(f.n,null)}},8104(e,t,n){n.r(t),n.d(t,{default:()=>nP});var o,r,i=n(53157),a=n(77027),l=n(11590),s=n(23410),c=n(75994),u=n(83386),d=n(52239),p=n(28236);function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){m(e,t,n[t])})}return e}function b(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let g=(0,p.yI)(()=>{let e=(0,c.OF)(),t={size:28,circle:{color:{bg:e.elementaryColors.white,fg:e.mainColors.primary,border:"#1B6496"},active:{bg:e.mainColors.primary,fg:e.elementaryColors.white,border:"#0055C0"}},line:{size:4,color:e.mainColors.primary}},n={height:80,topHeight:50,color:{bg:"#ECF5FA"},border:{color:"#555A62",active:e.elementaryColors.primary}},o=`0 0 0 2px ${s.w.colorOut(e.mainColors.primary)}`,r=(0,l.iv)({flex:"1 0 auto",position:"relative",display:"flex",flexDirection:"column","&:focus":{outline:"none",boxShadow:o}},";label:LayoutEditor-classes-root;"),i=(0,l.iv)({name:"1h48npr-LayoutEditor-classes-sectionToolbar",styles:"display:flex;align-items:center;label:LayoutEditor-classes-sectionToolbar;"}),a=(0,p.yI)(e=>(0,l.iv)({position:"absolute",flexDirection:"column",left:e,top:"50%",transform:"translateY(-50%)",right:"initial",bottom:"initial"},";label:LayoutEditor-classes-toolbarOffset;")),m=(0,l.iv)({name:"33odmm-LayoutEditor-classes-screen",styles:"position:relative;text-align:initial;label:LayoutEditor-classes-screen;"}),g=(0,l.iv)({name:"4ix5j4-LayoutEditor-classes-oneColumn",styles:";label:LayoutEditor-classes-oneColumn;"}),h=(0,l.iv)({name:"1mc5et1-LayoutEditor-classes-fullWidth",styles:"position:relative;label:LayoutEditor-classes-fullWidth;"}),y=(0,l.iv)({minHeight:n.height,borderRadius:4,border:"1px solid",borderColor:(0,d.Dx)(n.border.color),display:"flex",justifyContent:"center",alignItems:"center",width:(0,d.dd)("100%"),position:"relative",":hover, :focus, :active":{outline:"none",cursor:"pointer",backgroundColor:(0,d.Dx)(n.color.bg),borderColor:(0,d.Dx)(n.border.active)},"&:focus-visible, &.focus-visible":{boxShadow:o,borderWidth:0},"& .buttonCircle":{color:(0,d.Dx)(n.border.color),borderColor:(0,d.Dx)(n.border.color)},":hover .buttonCircle, :focus .buttonCircle, :focus-within .buttonCircle, :active .buttonCircle":{color:(0,d.Dx)(t.circle.active.fg),backgroundColor:(0,d.Dx)(t.circle.active.bg),borderColor:(0,d.Dx)(t.circle.active.border)}},";label:LayoutEditor-classes-addWidget;"),v=(0,l.iv)({name:"12iq86o-LayoutEditor-classes-addSectionContextualStatic",styles:"position:static;bottom:100%;left:0;right:0;label:LayoutEditor-classes-addSectionContextualStatic;"}),O=(0,l.iv)({name:"1x06vf7-LayoutEditor-classes-addSectionContextualBefore",styles:"position:absolute;bottom:100%;left:0;right:0;label:LayoutEditor-classes-addSectionContextualBefore;"}),E=(0,l.iv)({name:"nj0kjw-LayoutEditor-classes-addSectionContextualAfter",styles:"position:absolute;top:100%;left:0;right:0;label:LayoutEditor-classes-addSectionContextualAfter;"}),w=(0,l.iv)(f(b(f({position:"relative"},u.W.margin({vertical:10,horizontal:"auto"})),{width:"100%",padding:0,height:t.size,overflow:"initial","&:focus .buttonCircle, &:focus-within .buttonCircle, &:active .buttonCircle":{color:(0,d.Dx)(t.circle.active.fg),backgroundColor:(0,d.Dx)(t.circle.active.bg),borderColor:(0,d.Dx)(t.circle.active.border)},"&:focus":{outline:"none"},"&.focus-visible:after":{content:"''",position:"absolute",top:0,bottom:0,left:-12,right:-12,boxShadow:o,borderRadius:2}}),{opacity:0,"&:hover, &:focus, &:active, &:focus-within, &.focus-visible, &.isSelected":{opacity:1}}),";label:LayoutEditor-classes-addSection;"),x=(0,l.iv)({position:"relative",height:t.line.size,borderRadius:t.line.size,border:"2px solid",backgroundColor:(0,d.Dx)(t.line.color),borderColor:(0,d.Dx)(t.line.color),display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},";label:LayoutEditor-classes-buttonLine;"),P=(0,l.iv)(b(f({borderRadius:"50%",color:(0,d.Dx)(t.circle.color.fg),backgroundColor:(0,d.Dx)(t.circle.color.bg),borderColor:(0,d.Dx)(t.circle.color.border),border:"1px solid",padding:0,width:t.size,height:t.size,lineHeight:t.size,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute"},u.W.margin({horizontal:"auto"})),{zIndex:100}),";label:LayoutEditor-classes-buttonCircle;"),S=(0,p.yI)((e="initial")=>(0,l.iv)({"&:focus":{outline:"none"},"&:before":{pointerEvents:"none",content:"''",position:"absolute",top:0,bottom:0,left:3,right:3,borderRadius:2,zIndex:e},"&.isFullWidth:before":{top:0,left:2,right:2,bottom:0},"&.isActive:before":{border:"1px dashed #555A62"},"&.isActive:focus":{"&:before":{boxShadow:o,border:"none"}}},";label:LayoutEditor-classes-section;")),C=(0,l.iv)({name:"yuuavc-LayoutEditor-classes-widget",styles:"position:relative;user-select:none;label:LayoutEditor-classes-widget;"}),j=(0,l.iv)({pointerEvents:"none",content:"''",position:"absolute",top:0,bottom:0,left:0,right:0,boxShadow:o,borderRadius:2,".isFullWidth &":{top:6,right:8,left:8,bottom:6}},";label:LayoutEditor-classes-widgetBorder;"),I=(0,l.iv)({name:"yrlx4-LayoutEditor-classes-initialSectionForm",styles:"flex:1 0 auto;padding-top:100px;label:LayoutEditor-classes-initialSectionForm;"}),D=(0,l.iv)({name:"wo8r3c-LayoutEditor-classes-toolbarMenu",styles:"&& button{margin-left:2px;margin-right:2px;};label:LayoutEditor-classes-toolbarMenu;"});return{root:r,screen:m,fullWidth:h,oneColumn:g,buttonLine:x,sectionToolbar:i,toolbarOffset:a,buttonCircle:P,addWidget:y,addSection:w,addSectionContextualStatic:v,addSectionContextualBefore:O,addSectionContextualAfter:E,section:S,widget:C,widgetBorder:j,initialSectionForm:I,toolbarMenu:D}});var h,y,v=n(66727),O=n(74691),E=n.n(O);(h=o||(o={}))[h.LEFT=0]="LEFT",h[h.RIGHT=1]="RIGHT",h[h.UP=2]="UP",h[h.DOWN=3]="DOWN",(y=r||(r={})).SECTION="section",y.SECTION_ADD="section_add",y.WIDGET="widget",y.NONE="none";class w{getPath(){return this.path}getMode(){return this.mode}setPath(e){var t,n;let o=new w(e,this.mode,this.onUpdate);return null===(n=(t=this).onUpdate)||void 0===n||n.call(t,o),o}setMode(e){var t,n;let o=new w(this.path,e,this.onUpdate);return null===(n=(t=this).onUpdate)||void 0===n||n.call(t,o),o}withContents(e){let t=new x(e,this);return t.backedUpState=this.backedUpState,t}stashState(){var e,t;let n=new w(v.Vz.section(0),r.NONE,this.onUpdate);return n.backedUpState=this,null===(t=(e=this).onUpdate)||void 0===t||t.call(e,n),n}restoreState(){var e,t;if(!this.backedUpState)return this;let n=new w(this.backedUpState.path,this.backedUpState.mode,this.onUpdate);return null===(t=(e=this).onUpdate)||void 0===t||t.call(e,n),n}constructor(e=v.Vz.section(0),t=r.NONE,n){this.path=e,this.mode=t,this.onUpdate=n,this.backedUpState=null}}class x extends w{moveSelectionInDirection(e){switch(this.getMode()){case r.SECTION:case r.SECTION_ADD:return this.moveSectionSelectionInDirection(e);case r.WIDGET:return this.moveWidgetSelectionInDirection(e)}return this.state}moveSelectionTo(e,t){let n=this.setPath(e).setMode(t);if(t===r.WIDGET&&!v.Vz.isWidgetPath(e)){let o=this.contents.getSectionInfo(e);if(!o)return n;n=n.setPath(v.Vz.widget(e.sectionIndex,o.regionNames[0],0))}return n}getWidgetPathInDirection(e,t,n=!1){let{contents:r}=this;switch(t){case o.DOWN:{let i=v.Vz.widget(e.sectionIndex,e.sectionRegion,e.sectionRegionIndex+1),a=n?r.getMaxRegionIndex(i):r.getRegion(i).length-1;if(i.sectionRegionIndex>a){i.sectionIndex+=1;let l=r.getSection(i),s=r.getSectionInfo(i);if(!l||!s)return null;(i=r.getValidPath(i,s,e)).sectionRegionIndex=0}return i}case o.UP:{let c=v.Vz.widget(e.sectionIndex,e.sectionRegion,e.sectionRegionIndex-1);if(c.sectionRegionIndex<0){var u;c.sectionIndex=c.sectionIndex-1;let d=r.getSection(c),p=r.getSectionInfo(c);if(!d||!p)return null;c=r.getValidPath(c,p,e);let m=n?r.getMaxRegionIndex(c):(null!==(u=r.getRegion(c))&&void 0!==u?u:[]).length;c.sectionRegionIndex=m}return c}case o.RIGHT:{let f=v.Vz.widget(e.sectionIndex,e.sectionRegion,e.sectionRegionIndex),b=r.getSectionInfo(f);if(!b)return null;let g=b.regionNames.indexOf(f.sectionRegion),h=b.regionNames[g+1];if(!h)return null;f.sectionRegion=h;let y=r.getMaxRegionIndex(f);return f.sectionRegionIndex>y&&(f.sectionRegionIndex=y),f}case o.LEFT:{let O=v.Vz.widget(e.sectionIndex,e.sectionRegion,e.sectionRegionIndex),E=r.getSectionInfo(O);if(!E)return null;let w=E.regionNames.indexOf(O.sectionRegion),x=E.regionNames[w-1];if(!x)return null;O.sectionRegion=x;let P=r.getMaxRegionIndex(O);return O.sectionRegionIndex>P&&(O.sectionRegionIndex=P),O}}}moveWidgetSelectionInDirection(e){if(this.mode!==r.WIDGET||!v.Vz.isWidgetPath(this.path))return this.state;let t=this.getWidgetPathInDirection(this.path,e,!0);return null===t?this.state:this.setPath(t)}moveSectionSelectionInDirection(e){let{contents:t}=this;if(!t)return this.state;if(null==this.path)return this.state.setPath(v.Vz.section(0)).setMode(r.SECTION_ADD);let n=this.mode===r.SECTION_ADD,i=this.mode===r.SECTION,a=0===this.path.sectionIndex,l=this.path.sectionIndex===t.getSectionCount(),s=e=>{let n=E()(this.path.sectionIndex+e,0,t.getSectionCount());return this.state.setPath(v.Vz.section(n))};switch(e){case o.DOWN:if(n){if(l)return this.state;return this.state.setMode(r.SECTION)}if(i)return s(1).setMode(r.SECTION_ADD);break;case o.UP:if(n){if(a)return this.state;return s(-1).setMode(r.SECTION)}if(i)return this.state.setMode(r.SECTION_ADD)}return this.state}constructor(e,t){super(t.getPath(),t.getMode(),t.onUpdate),this.contents=e,this.state=t}}var P=n(67294),S=n(52303),C=n(33188),j=n(64166),I=n(14698),D=n(62425),T=n(78290),k=n(77225),N=n(30731),W=n(21965),R=n(32201),L=n(86665),$=n(79089),A=n(17903),F=n(34951),B=n(21328),Z=n(37360),M=n(75864),z=n(48650);function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){V(e,t,n[t])})}return e}function H(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let U=(0,M.yI)(()=>{let e=(0,l.iv)({name:"7613yh-LayoutThumbnails-classes-container",styles:"display:flex;flex-direction:column;label:LayoutThumbnails-classes-container;"}),t=(0,l.iv)({marginBottom:20,"&& a":{"&:hover, &:active, &:focus, &.focus-visible":{textDecoration:"none"}}},";label:LayoutThumbnails-classes-description;"),n=(0,l.iv)(H(_({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(230px, 1fr))",gridTemplateRows:"max-content"},(0,z.W)(12)),{minHeight:460}),";label:LayoutThumbnails-classes-thumbnails;"),o=(0,l.iv)({name:"64iq6e-LayoutThumbnails-classes-smallerThumbnails",styles:"grid-template-columns:repeat(auto-fill, minmax(130px, 1fr));label:LayoutThumbnails-classes-smallerThumbnails;"}),r=(0,l.iv)({flex:1,marginBottom:24,marginLeft:12,marginRight:12,cursor:"pointer"},";label:LayoutThumbnails-classes-thumbnailWrapper;"),i=(0,l.iv)(H(_({flex:1,display:"block"},u.W.border({color:"#dddee0",width:1,style:"solid",radius:4})),{boxShadow:`0px 1px 3px 0px ${s.w.colorOut((0,c.OF)().mainColors.primary.fade(.1))}`,"&:hover, &:active, &:focus, &.focus-visible, &.isSelected":_({background:s.w.colorOut((0,c.OF)().mainColors.primary.fade(.1))},u.W.border({color:s.w.colorOut((0,c.OF)().mainColors.primary),radius:4})),"&.focus-visible":{boxShadow:`0 0 0 1px ${s.w.colorOut((0,c.OF)().mainColors.primary)}`}}),";label:LayoutThumbnails-classes-thumbnail;"),a=(0,l.iv)({name:"56rm13-LayoutThumbnails-classes-thumbnailImage",styles:"width:100%;min-width:200px;label:LayoutThumbnails-classes-thumbnailImage;"}),d=(0,l.iv)({name:"1xjd3xd-LayoutThumbnails-classes-thumbnailImageSmall",styles:"width:100%;display:block;label:LayoutThumbnails-classes-thumbnailImageSmall;"}),p=(0,l.iv)(_({display:"flex",alignItems:"center",marginLeft:4,marginTop:8},u.W.font({weight:400})),";label:LayoutThumbnails-classes-labelContainer;"),m=(0,l.iv)({display:"flex",marginLeft:16,"&:hover,&active,&:focus,&.focus-visible":{color:s.w.colorOut((0,c.OF)().mainColors.primary)}},";label:LayoutThumbnails-classes-informationIcon;"),f=(0,l.iv)({name:"1ks5j16-LayoutThumbnails-classes-searchContent",styles:"margin-bottom:16px;label:LayoutThumbnails-classes-searchContent;"}),b=(0,l.iv)(_({width:"100%"},u.W.font({weight:400})),";label:LayoutThumbnails-classes-searchLabel;"),g=(0,l.iv)(H(_({width:"100%",outline:0},u.W.padding({vertical:8,horizontal:40}),u.W.border({color:(0,c.OF)().border.color,radius:6})),{"&:hover, &:active, &:focus, &.focus-visible, &.isSelected":_({},u.W.border({color:s.w.colorOut((0,c.OF)().mainColors.primary)}))}),";label:LayoutThumbnails-classes-searchInput;"),h=(0,l.iv)({name:"1qnwzn2-LayoutThumbnails-classes-clearButton",styles:"position:absolute;right:8px;label:LayoutThumbnails-classes-clearButton;"}),y=(0,l.iv)({name:"1c17lvw-LayoutThumbnails-classes-form",styles:"display:flex;flex-direction:column;min-height:0;label:LayoutThumbnails-classes-form;"});return{form:y,thumbnailImage:a,thumbnailImageSmall:d,container:e,description:t,thumbnails:n,smallerThumbnails:o,thumbnailWrapper:r,thumbnail:i,labelContainer:p,informationIcon:m,searchContent:f,searchLabel:b,searchInput:g,clearButton:h}});function G(e){var t,n,o;let{sections:r}=e,i=U(),[a,s]=(0,P.useState)(Object.keys(r)[0]),c=null!==(t=e.value)&&void 0!==t?t:a,u=null!==(n=e.onChange)&&void 0!==n?n:s,d=(0,$.hu)("layoutSection"),p=null!==(o=e.labelID)&&void 0!==o?o:d+"-label";return P.createElement("div",{className:i.container},P.createElement("div",{className:(0,l.cx)((0,B.s)().root,i.description),id:d},e.label&&P.createElement("p",{id:p},P.createElement("strong",null,e.label)),P.createElement("p",null,P.createElement(A.Z,{source:"Select a section you want to add for your page. Find out more in the <1>documentation.</1>",c1:e=>P.createElement(F.Z,{to:"https://success.vanillaforums.com/kb/articles/544-create-a-custom-layout#sections"},e)}))),P.createElement(Z.xt,{"aria-labelledby":p,"aria-describedby":d,name:"layoutSection",onChange:u,value:c,className:i.thumbnails},Object.keys(r).reverse().map(t=>{let n=(0,S.t)(r[t].name),o=(0,S.t)(r[t].name);return P.createElement(Z.gF,{onClick(n){if("click"===n.type&&0!==n.clientX&&0!==n.clientY){var o;null===(o=e.onSectionClick)||void 0===o||o.call(e,t)}},value:t,accessibleDescription:o,key:t,className:i.thumbnailWrapper},({isSelected:e,isFocused:o})=>P.createElement(P.Fragment,null,P.createElement("span",{role:"decoration",className:(0,l.cx)(i.thumbnail,{isSelected:e,"focus-visible":o})},P.createElement("img",{width:"188",height:"138",className:i.thumbnailImage,alt:n,src:r[t].iconUrl})),P.createElement("div",{className:i.labelContainer},(0,S.t)(n))))})))}var q=n(82707),J=n(3694),X=n(77423),Y=n(39607),K=n(10923),Q=n(23279),ee=n.n(Q);function et(e){var t,n;let{widgets:o,labelID:r}=e,i=(0,P.useRef)(null),a=U(),s=(0,q.J)(),[c,u]=(0,P.useState)(Object.keys(o)),[d,p]=(0,P.useState)(Object.keys(o)[0]),[m,f]=(0,P.useState)(""),b=null!==(t=e.value)&&void 0!==t?t:d,g=null!==(n=e.onChange)&&void 0!==n?n:p,h=(0,$.hu)("widgetDescription"),y=(0,Y.tm)(),v=e=>{var t;if(!y())return;let n=[];Object.keys(o).forEach(t=>{o[t].name.toLocaleLowerCase().includes(e.toLocaleLowerCase())&&n.push(t)}),u(n);let r=null!==(t=n[0])&&void 0!==t?t:null;n.includes(b)||null===r||g(r)},O=(0,P.useRef)(v);O.current=v;let E=(0,P.useCallback)(ee()(e=>{O.current(e)},1e3/60),[]),w=e=>{f(e),E(e)};return P.createElement("div",{className:a.container},P.createElement("div",{className:(0,l.cx)((0,B.s)().root,a.description),id:h},P.createElement(A.Z,{source:"Get started selecting the best widget for your Homepage. Find out more in the <1>documentation.</1>",c1:e=>P.createElement(F.Z,{to:"https://success.vanillaforums.com/kb/articles/548"},e)})),P.createElement("div",{className:(0,l.cx)(s.content,a.searchContent)},P.createElement("span",{className:s.iconContainer(!1)},P.createElement(X.JO,{size:"compact",icon:"search-search"})),P.createElement("label",{htmlFor:"searchInput",className:a.searchLabel},P.createElement("input",{ref:i,className:a.searchInput,autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:"searchInput",spellCheck:"false",tabIndex:0,value:m,type:"text","aria-label":"Search Text",placeholder:(0,S.t)("Search"),onChange(e){w(e.target.value)}})),m&&P.createElement(J.C,{onClick(e){var t;e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),w(""),null===(t=i.current)||void 0===t||t.focus()},className:(0,l.cx)(s.clear,a.clearButton)})),P.createElement(Z.xt,{"aria-labelledby":r,"aria-describedby":h,name:"widget",onChange:e=>g(e),value:b,className:(0,l.cx)(a.thumbnails,a.smallerThumbnails)},c.sort((e,t)=>{var n,r,i,a;let l=null!==(i=null===(n=o[e])||void 0===n?void 0:n.name)&&void 0!==i?i:"",s=null!==(a=null===(r=o[t])||void 0===r?void 0:r.name)&&void 0!==a?a:"";return(0,K.TY)(l,s)}).map(e=>{let t=(0,S.t)(o[e].name);return P.createElement(Z.gF,{value:e,key:e,className:a.thumbnailWrapper},({isSelected:n,isFocused:r})=>P.createElement(P.Fragment,null,P.createElement("span",{role:"decoration",className:(0,l.cx)(a.thumbnail,{isSelected:n,"focus-visible":r})},P.createElement("img",{width:"120",height:"100",className:a.thumbnailImageSmall,alt:t,src:o[e].iconUrl})),P.createElement("div",{className:a.labelContainer},(0,S.t)(t))))})))}function en(e){let{title:t,sections:n,isVisible:o,exitHandler:r,onAddSection:i,itemType:a,selectedSection:l}=e,[s,c]=(0,P.useState)(null!=l?l:Object.keys(n)[0]),u=(0,R.V)(),d=(0,L.B)(),p=(0,$.hu)("layoutThumbnail");return P.createElement(D.Z,{noFocusOnExit:!0,isVisible:o,size:W.Z.LARGE,exitHandler:r},P.createElement("form",{"data-layout-editor-modal":!0,className:U().form,onSubmit(e){e.preventDefault(),i(s)}},P.createElement(j.Z,{header:P.createElement(I.Z,{titleID:p,closeFrame:r,title:t}),body:P.createElement(T.Z,null,P.createElement("div",{className:u.contents},"sections"===a?P.createElement(G,{labelID:p,sections:n,onChange:c,value:s}):P.createElement(et,{labelID:p,widgets:n,onChange:c,value:s}))),footer:P.createElement(k.Z,{justifyRight:!0},P.createElement(N.Z,{buttonType:C.q.TEXT,onClick:r,className:d.actionButton},(0,S.t)("Cancel")),P.createElement(N.Z,{buttonType:C.q.TEXT,submit:!0,className:d.actionButton},(0,S.t)("Add")))})))}var eo=n(20058),er=n(10855);let ei=P.forwardRef(function(e,t){var n;let o=g(),{editorContents:i,editorSelection:a,layoutViewType:s}=t9(),c=(0,eo.U2)(s),[u,d]=(0,P.useState)(!1),p=(0,P.useRef)(null);t=null!=t?t:p;let m=v.Vz.areSectionPathsEqual(e.path,a.getPath())&&a.getMode()===r.SECTION_ADD;return(0,Y.gw)(t,m),P.createElement(P.Fragment,null,P.createElement(er.ZP,{fullGutter:!0},P.createElement(N.Z,{"aria-hidden":!m,"data-layout-editor-focusable":!0,buttonRef:t,tabIndex:-1,"data-layout-selectable":!0,buttonType:C.q.CUSTOM,onClick(t){t.preventDefault(),t.stopPropagation(),a.moveSelectionTo(e.path,r.SECTION_ADD),d(!0)},ariaLabel:`Add section at position ${e.path.sectionIndex}`,className:(0,l.cx)(o.addSection,"addSection",{isSelected:m||u})},P.createElement("div",{className:(0,l.cx)(o.buttonLine)},P.createElement("div",{className:(0,l.cx)(o.buttonCircle,"buttonCircle")},P.createElement(X.JO,{icon:"data-add"}))))),P.createElement(en,{title:(0,S.t)("Choose the Type of Section"),exitHandler(){d(!1),a.moveSelectionTo(e.path,r.SECTION_ADD)},sections:null!==(n=null==c?void 0:c.sections)&&void 0!==n?n:{},onAddSection(t){d(!1),i.insertSection(e.path.sectionIndex,{$hydrate:t}),a.moveSelectionTo(e.path,r.SECTION)},isVisible:u,itemType:"sections"}))});var ea=n(94184),el=n.n(ea),es=n(85819),ec=n(94982);function eu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){eu(e,t,n[t])})}return e}function ep(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let em=(0,M.yI)(()=>{let e=(0,c.OF)(),t=(0,ec.J)().mediaQueries(),n=(0,l.iv)({height:"100%","&&&":ed({width:1125,maxHeight:(0,es.sI)(80)},t.oneColumnDown({width:"100%"}))},";label:WidgetSettings-classes-container;"),o=(0,l.iv)({"&&":ed({width:"100%",height:"100%",display:"flex",paddingTop:0,paddingBottom:0},t.oneColumnDown({flexDirection:"column"}))},";label:WidgetSettings-classes-section;"),r=(0,l.iv)(ed({flex:1,display:"flex",flexDirection:"column",maxWidth:"70%",width:"100%",minWidth:500},t.oneColumnDown({maxWidth:"100%",minWidth:"initial",overflow:"initial"})),";label:WidgetSettings-classes-preview;"),i=(0,l.iv)(ed({marginTop:8,marginBottom:16},u.W.padding({top:e.spacer.panelComponent,horizontal:e.spacer.panelComponent})),";label:WidgetSettings-classes-previewHeader;"),a=(0,l.iv)(ep(ed({position:"sticky",overflow:"auto"},u.W.margin({vertical:e.spacer.panelComponent,horizontal:e.spacer.panelComponent}),u.W.border({radius:6})),{"& > div":{width:"100%",height:"60%"}}),";label:WidgetSettings-classes-previewBody;"),p=(0,l.iv)(ep(ed({padding:16},u.W.margin({vertical:0})),{"& > div":ed({},u.W.margin({vertical:0}))}),";label:WidgetSettings-classes-previewContent;"),m=(0,l.iv)(ed({minWidth:300,maxWidth:"35%",width:"100%",overflowY:"auto",borderLeft:(0,d.$N)()},u.W.padding({all:16,top:0}),t.oneColumnDown({maxWidth:"100%",borderLeft:"none",borderTop:(0,d.$N)(),overflowY:"initial"})),";label:WidgetSettings-classes-settings;"),f=(0,l.iv)(ep(ed({},u.W.padding({vertical:e.spacer.headingBox})),{textAlign:"center",textTransform:"uppercase"}),";label:WidgetSettings-classes-settingsHeader;"),b=(0,l.iv)({minHeight:(0,es.sI)(80),"& > section":{maxHeight:"none"},"& .form-group":{borderBottom:"none",paddingTop:0,paddingBottom:8,"& .label-wrap":{flex:"0 0 41%"},"& .input-wrap":{display:"flex",justifyContent:"flex-end",flex:"0 0 59%",maxWidth:"59%","& textarea, & input":{fontSize:13,borderColor:s.w.colorOut(e.border.color),"&:focus, &:hover, &:active, &.focus-visible":{borderColor:s.w.colorOut(e.elementaryColors.primary)}},"& input":{minHeight:28,lineHeight:"28px",padding:"0 8px"}},"& .toggle-wrap":{width:60,height:30,"& .toggle-well":{width:60,height:30},"& .toggle-slider":{width:24,height:24},"&.toggle-wrap-on .toggle-slider":{left:33}},"& .file-upload":{minHeight:30,"& > input, & .file-upload-choose, & .file-upload-browse":{lineHeight:"28px",fontSize:13,maxHeight:30,borderColor:s.w.colorOut(e.border.color),"&:focus, &:hover, &:active, &.focus-visible":{borderColor:s.w.colorOut(e.elementaryColors.primary)}},"& .file-upload-choose":{padding:"0 8px",maxWidth:"calc(100% - 63px)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",borderTopRightRadius:0,borderBottomRightRadius:0},"& .file-upload-browse":{minWidth:64,background:s.w.colorOut(e.mainColors.bg),color:s.w.colorOut(e.mainColors.fg),"&:focus, &:hover, &:active, &.focus-visible":{background:s.w.colorOut(e.mainColors.primary),borderColor:s.w.colorOut(e.elementaryColors.primary),color:s.w.colorOut(e.mainColors.primaryContrast)}}}},"& .form-group:last-of-type":{paddingBottom:24},"& .formGroup-toggle":{"& .label-wrap":{flex:"0 0 66.66666666%"},"& .input-wrap":{flex:"0 0 33.33333333%"}},"& .formGroup-radio":{"& .input-wrap":{flexDirection:"column"}}},";label:WidgetSettings-classes-modalForm;"),g=(0,l.iv)({borderColor:s.w.colorOut(e.border.color),"&:focus, &:hover, &:active, &.focus-visible":{borderColor:s.w.colorOut(e.elementaryColors.primary)},"& > input::placeholder":{color:"#aaadb1"}},";label:WidgetSettings-classes-autocompleteContainer;"),h=(0,l.iv)(ed({display:"block"},u.W.font({size:16,weight:700}),u.W.margin({vertical:16})),";label:WidgetSettings-classes-formGroupHeader;");return{container:n,section:o,preview:r,previewHeader:i,previewBody:a,previewContent:p,settings:m,settingsHeader:f,modalForm:b,formGroupHeader:h,autocompleteContainer:g}});var ef=n(72656),eb=n(77289),eg=n(99369),eh=n(32812),ey=n(36780),ev=n(24504);function eO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){eO(e,t,n[t])})}return e}function ew(e){let t=e.schema.properties&&"html"in e.schema.properties,n=em(),{widgetCatalog:o,assetCatalog:r,widgetID:i,config:a}=e,l=o[i]?o[i].$reactComponent:r&&r[i]?r[i].$reactComponent:"",s={layout:[{$reactComponent:l,$reactProps:eE({$hydrate:i},a)}]};return P.createElement("div",{className:n.preview},P.createElement("div",{className:n.previewHeader},P.createElement(A.Z,{source:"Add or edit your widget here. You can choose your widget options by selecting a layout option, title and description if applicable. Set your widget conditions to specify where the widget will appear along with who the widget will be visible to. Styles will be inherited from <1>Style Guide. </1>Find out more in the <2>documentation.</2>",c1:e=>P.createElement(F.Z,{to:"https://success.vanillaforums.com/kb/articles/279"},e),c2:e=>P.createElement(F.Z,{to:"https://success.vanillaforums.com/kb/articles/547"},e)})),t?P.createElement(ef.I,{value:e.value,onChange:t=>e.onChange(eE({},e.value,t))}):P.createElement("div",{className:n.previewBody},P.createElement(eh.f,{extraClasses:n.previewContent},P.createElement(ev.VA,null,P.createElement(ey.FU.Provider,{value:{linkContexts:[""],isDynamicNavigation:()=>!0,pushSmartLocation(){},makeHref:()=>"",areLinksDisabled:!1}},P.createElement(eb.I.Provider,{value:{componentFetcher:eg.jJ,fallbackWidget:eg.fy}},P.createElement(eb.t,Object.assign({},s))))))))}var ex=n(81399);function eP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){eP(e,t,n[t])})}return e}function eC(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let ej=(0,M.yI)(()=>{let e=(0,l.iv)({name:"ywf8d0-WidgetSettingsAccordion-classes-root",styles:"&:last-child > .item{border-bottom:solid 1px #c1cbd7;};label:WidgetSettingsAccordion-classes-root;"}),t=(0,l.iv)(eS({},u.W.padding({top:8,horizontal:16})),";label:WidgetSettingsAccordion-classes-panel;"),n=(0,l.iv)(eC(eS({textAlign:"center",width:"100%"},u.W.font({transform:"uppercase",color:"#757e8c",size:12,weight:600})),{borderTop:"solid 1px #c1cbd7"}),";label:WidgetSettingsAccordion-classes-header;"),o=(0,l.iv)(eC(eS({},u.W.margin({horizontal:-16})),{width:(0,es.yx)("100% + 32px"),"& .form-group":{borderBottom:"none"}}),";label:WidgetSettingsAccordion-classes-item;");return{root:e,header:n,panel:t,item:o}});function eI(e){let t=ej();return P.createElement(Z.UQ,{collapsible:!0,multiple:!0,className:t.root},P.createElement(Z.Qd,{className:(0,l.cx)(t.item,"item")},P.createElement(Z._m,{className:t.header,arrow:!0},e.header),P.createElement(Z.Hk,{className:t.panel},e.children)))}function eD(e){return e.header&&e.expandable?P.createElement(eI,{header:e.header},e.children):P.createElement(P.Fragment,null,e.header&&P.createElement("span",{className:em().formGroupHeader},e.header),e.children)}var eT=n(57704);function ek(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){ek(e,t,n[t])})}return e}let eW=(0,p.yI)(()=>{var e,t;(0,c.OF)();let n=(0,M.Y7)("navigationManager"),o=n("expandColapseButton",eN({display:"flex",alignItems:"center",height:36,marginLeft:-8,marginRight:16},{"& span":{marginLeft:6}})),r=n("newLinkButton",eN({display:"flex",alignItems:"center",height:36},{"& span":{marginLeft:6}})),i=n({flex:1}),a=n("toolbar",(e=eN({display:"flex",flexDirection:"row"},u.W.margin({horizontal:-16}),u.W.padding({horizontal:16})),t=(t={borderBottom:(0,d.$N)()},t),Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e)),l=n("treeContainer",eN({position:"relative"},u.W.margin({horizontal:-8}),u.W.padding({vertical:16})));return{expandColapseButton:o,newLinkButton:r,spacer:i,toolbar:a,treeContainer:l}});var eR=n(11319),eL=n(81612),e$=n(57067),eA=n(88084),eF=n(17878),eB=n(59736);function eZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){eZ(e,t,n[t])})}return e}function ez(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let eV=(0,p.yI)(()=>{let e=(0,c.OF)(),t=(0,M.Cg)("navigationManager"),n=t("dragging",{lineHeight:18,fontWeight:e.fonts.weights.bold,border:{radius:2,color:e.mixBgAndFg(.2)},scrollGutter:{mobile:2*e.gutter.size}}),o=t("states",{hover:{bg:e.mainColors.primary.fade(.1)},active:{bg:e.mainColors.primary.fade(.1)},dragged:{bg:e.mainColors.bg,shadow:"0 5px 10px 0 rgba(0, 0, 0, 0.3)"}});return{dragging:n,states:o}}),e_=(0,p.yI)(()=>{let e=eV(),t=(0,c.OF)(),n=(0,M.Y7)("navigationManager"),o=n("nameColumn",eM({flexGrow:0,flexShrink:0,flexBasis:224,marginLeft:-6,marginRight:6},u.W.padding({horizontal:2}))),r=n("urlColumn",eM({flexGrow:0,flexShrink:0,flexBasis:224,marginLeft:-6,marginRight:6},u.W.padding({horizontal:2}))),i=n("spacer",{flex:1}),a=n("actions",{flexGrow:0,flexShrink:0,flexBasis:160,visibility:"hidden",display:"flex",justifyContent:"flex-end",paddingRight:4}),l=n("expandCollapseButton",eM({},u.W.padding({horizontal:12}))),p=n("cancelButton",eM({},u.W.margin({horizontal:8}))),m=n("applyButton",eM({},u.W.margin({horizontal:8}))),f=n("showButton",eM({color:s.w.colorOut(t.mainColors.fg)},u.W.margin({horizontal:8}))),b=n("editButton",eM({},u.W.margin({horizontal:8}))),g=n("deleteButton",eM({color:s.w.colorOut(t.messageColors.deleted.bg)},u.W.margin({horizontal:8}))),h=n("editableInput",eM(ez(eM({},u.W.border({color:t.mixBgAndFg(.2),radius:0,width:1}),u.W.padding({vertical:0,horizontal:5}),u.W.margin({vertical:-1,left:-6})),{lineHeight:(0,eB.dd)(22),outline:0}),{"&:focus":eM({},u.W.border({color:t.mainColors.primary.fade(.5),radius:0,width:1}))})),y=n("container",eM({display:"flex",alignItems:"center",minHeight:28},(0,d.si)("none"),{[`&:hover .${a}, &.isEditing .${a}`]:{visibility:"visible"},"&&&.isDragging":ez(eM({minWidth:(0,eB.dd)(300),opacity:.65,boxShadow:e.states.dragged.shadow},u.W.border(e.dragging.border)),{fontWeight:e.dragging.fontWeight,backgroundColor:s.w.colorOut(e.states.dragged.bg)}),"&.isHiddenItem":{color:s.w.colorOut(t.mainColors.fg.fade(.5))},"&.hasChildren":eM({},u.W.font({weight:t.fonts.weights.bold})),"&:hover, &&.isCombining":{backgroundColor:s.w.colorOut(e.states.hover.bg)},"&:focus-within, &.isEditing":{backgroundColor:s.w.colorOut(e.states.active.bg)},"&.hasError":{color:s.w.colorOut(t.messageColors.error.fg)}}));return{container:y,expandCollapseButton:l,nameColumn:o,urlColumn:r,editableInput:h,spacer:i,cancelButton:p,applyButton:m,editButton:b,showButton:f,deleteButton:g,actions:a}});function eH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eU(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){eH(e,t,n[t])})}return e}function eG(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let eq=P.forwardRef(function(e,t){let n=e_(),o=(0,P.useRef)(),r=(0,P.useRef)(null),i=(0,P.useRef)(null),a=(0,S.t)("(untitled)"),l=(0,S.t)("Paste or type url"),{depth:s,item:c,disabled:u,snapshot:d,provided:p,onDelete:m,onShow:f,onSave:b,onCollapse:g,onExpand:h,onStartEditing:y,onStopEditing:v}=e,{data:O,isExpanded:E,hasChildren:w}=c,{name:x,url:j,isCustom:I,isHidden:D}=O,{isDragging:T}=d,k=Boolean(d.combineTargetFor),[W,R]=(0,P.useState)(!1),L=(0,Y.xy)(W),[$,A]=(0,P.useState)(O);function F(){R(!1),v()}function B(){T||D||(R(!0),y())}function Z(){F(),b(eG(eU({},$),{name:$.name.trim(),url:function(e){e=e.trim();let t=/^https?:\/\//i.test(e),n=/^~?\//.test(e);if(/javascript:/i.test(e))return"/";if(t||n)return e;let o=/^[a-z0-9]+[a-z0-9-]*(\.[a-z0-9]+[a-z0-9-]*)+(\/.*)?$/i.test(e);if(o)return"http://"+e;let r=e.startsWith("~");return r?"~/"+e.slice(1):"/"+e}($.url)}))}(0,P.useImperativeHandle)(t,()=>({edit:B})),(0,P.useEffect)(()=>{A(O)},[O,W]),(0,P.useEffect)(()=>{var e,t;W&&!L?null===(e=r.current)||void 0===e||e.focus():!W&&L&&(null===(t=o.current)||void 0===t||t.focus())},[W,L]);let M=x.length?x:a,z=j.length?j:"/",V=P.createElement("div",Object.assign({ref(e){o.current=e,p.innerRef(e)}},p.draggableProps,p.dragHandleProps,{onClick:function(){var e,t;(null===(e=o.current)||void 0===e?void 0:e.matches(":focus-within"))||null===(t=o.current)||void 0===t||t.focus()},onDoubleClick:B,onKeyDown:function(e){switch(e.key){case"Enter":W?Z():B();break;case"Escape":e.preventDefault(),e.stopPropagation(),F();break;case"Delete":W||m()}},style:eG(eU({},p.draggableProps.style),{pointerEvents:u?"none":"all"}),className:el()(n.container,{hasChildren:w,isEditing:W,isDragging:T,isCombining:k,isExpanded:E,isChild:s>0,isHiddenItem:D})}),P.createElement(N.Z,{buttonType:C.q.CUSTOM,className:n.expandCollapseButton,tabIndex:-1,style:{visibility:w?"visible":"hidden"},disabled:D,onClick(){(E?g:h)()}},E&&w?P.createElement(eL.Mt,null):P.createElement(eL.iM,null)),P.createElement("span",{className:n.nameColumn},W?P.createElement("input",{ref:r,className:n.editableInput,maxLength:255,type:"text",value:$.name,placeholder:a,onChange:function(e){let t=e.target.value;A(e=>eG(eU({},e),{name:t}))}}):M),!w&&P.createElement("span",{className:n.urlColumn},W?P.createElement("input",{ref:i,className:n.editableInput,maxLength:255,disabled:!I,type:"text",value:$.url,placeholder:l,onChange:function(e){let t=e.target.value;A(e=>eG(eU({},e),{url:t}))}}):z),P.createElement("span",{className:n.spacer}),P.createElement("span",{className:n.actions},W&&P.createElement(P.Fragment,null,P.createElement(N.Z,{buttonType:C.q.TEXT,className:n.cancelButton,onClick:function(e){e.preventDefault(),F()}},(0,S.t)("Cancel")),P.createElement(N.Z,{buttonType:C.q.TEXT,className:n.applyButton,onClick:function(e){e.preventDefault(),Z()}},(0,S.t)("Apply"))),!W&&D&&P.createElement(N.Z,{buttonType:C.q.TEXT,className:n.showButton,onClick:function(e){e.preventDefault(),f()}},(0,S.t)("Show")),!W&&!D&&P.createElement(N.Z,{buttonType:C.q.TEXT,className:n.editButton,onClick:function(e){e.preventDefault(),B()}},(0,S.t)("Edit")),!W&&!D&&P.createElement(N.Z,{buttonType:C.q.TEXT,className:n.deleteButton,onClick:function(e){e.preventDefault(),m()}},I?(0,S.t)("Delete"):(0,S.t)("Hide"))));return d.isDragging?(0,Y.t_)(V,"dragging-item-portal",!0):V});function eJ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eX(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){eJ(e,t,n[t])})}return e}function eY(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function eK({item:e,isVisible:t,onCancel:n,onConfirm:o}){let r=null==e?void 0:e.data.name,i=null==e?void 0:e.data.url;return P.createElement(eF.Z,{isVisible:Boolean(t),title:P.createElement(A.Z,{source:'Delete "<0/>"',c0:r}),onCancel:()=>n(e),onConfirm:()=>o(e)},P.createElement(A.Z,{source:'Are you sure you want to delete <0/> "<1/>" ?',c0:r,c1:P.createElement("strong",null,P.createElement("em",null,i))}))}function eQ(e){var t;let{treeData:n,onChangeTreeData:o,onStartEditing:r,onStopEditing:i}=e,a=(0,P.useRef)({}),l=(0,P.useRef)(null),s=(0,eR.fp)(),c=eW(),[u,d]=(0,P.useState)(),[p,m]=(0,P.useState)(),[f,b]=(0,P.useState)(),g=void 0!==u;function h(e){o((0,eA.FU)(n,e,{isExpanded:!1}))}function y(e){o((0,eA.FU)(n,e,{isExpanded:!0}))}function v(e){let t=Object.values(n.items).find(t=>t.children.includes(e)),r={parentId:t.id,index:t.children.indexOf(e)},i=(0,eA.cu)(n,r);o(i.tree)}return(0,P.useEffect)(()=>{if(void 0!==p){var e;null===(e=a.current[p])||void 0===e||e.edit()}},[p]),P.createElement(P.Fragment,null,P.createElement(eK,{isVisible:void 0!==f,item:f?n.items[f]:void 0,onConfirm:function(){v(f),b(void 0)},onCancel:function(){b(void 0)}}),P.createElement("div",{className:c.toolbar},e.isNestingEnabled?P.createElement(P.Fragment,null,P.createElement(N.Z,{buttonType:C.q.CUSTOM,className:c.expandColapseButton,onClick:function(){o((0,eA.tD)(n,{isExpanded:!0}))},ariaLabel:(0,S.t)("Expand All")},P.createElement(X.JO,{icon:"navigation-expandAll"}),!s.isCompact&&P.createElement("span",null,(0,S.t)("Expand All"))),P.createElement(N.Z,{buttonType:C.q.CUSTOM,className:c.expandColapseButton,onClick:function(){o((0,eA.tD)(n,{isExpanded:!1}))},ariaLabel:(0,S.t)("Collapse All")},P.createElement(X.JO,{icon:"navigation-collapseAll"}),!s.isCompact&&P.createElement("span",null,(0,S.t)("Collapse All")))):"",P.createElement("div",{className:c.spacer}),P.createElement(N.Z,{buttonType:C.q.CUSTOM,className:c.newLinkButton,ariaLabel:(0,S.t)("New Link"),disabled:g,onClick:function(){let e=function(){let e=function(){var e;let t=null===(e=l.current)||void 0===e?void 0:e.querySelector("*[data-rbd-draggable-id]:focus-within");return null==t?void 0:t.dataset.rbdDraggableId}();if(!e)return;let t=Object.values(n.items).find(t=>t.children.includes(e));return null==t?void 0:t.id}()||n.rootId,t=n.items[e],r=function(){let e=(0,K.k$)();return{id:e,children:[],data:{id:e,children:[],name:"",url:"",isCustom:!0}}}();o({rootId:n.rootId,items:eY(eX({},n.items),{[e]:eY(eX({},t),{children:[...t.children,r.id]}),[r.id]:r})}),m(r.id)}},P.createElement(eL.wl,null),!s.isCompact&&P.createElement("span",null,(0,S.t)("New Link")))),P.createElement("div",{className:c.treeContainer,ref:l},P.createElement(e$.Z,{tree:n,renderItem:function(e){let{depth:t,provided:l,item:s,snapshot:c}=e,{id:p}=s;return P.createElement(eq,{ref:e=>a.current[p]=e,item:s,depth:t,provided:l,snapshot:c,disabled:g&&u!==p,onDelete:()=>(function(e){let t=n.items[e];t.data.isCustom?b(e):o((0,eA.FU)(n,e,{isExpanded:!1,data:eY(eX({},t.data),{isHidden:!0})}))})(p),onShow:()=>(function(e){let t=n.items[e];o((0,eA.FU)(n,e,{isExpanded:!0,data:eY(eX({},t.data),{isHidden:!1})}))})(p),onSave(e){var t,r;return t=p,r=e,void o((0,eA.FU)(n,t,{data:r}))},onExpand:()=>y(p),onCollapse:()=>h(p),onStartEditing(){var e;d(e=p),r()},onStopEditing:()=>(function(e){let t=n.items[e];""===t.data.name&&""===t.data.url&&v(e),d(void 0),i()})(p)})},onDragEnd:function(e,t){if(!t)return;let r=function(e){let t=[],o=n.items[e.parentId],r=Object.values(n.items);do o&&t.unshift(o.id),o=r.find(e=>e.children.includes(o.id));while(o&&o.id!==n.rootId)return t}(t);r.length>2&&(t.parentId=r[1]);let i=(0,eA.dB)(n,e,t);t.parentId&&(i=(0,eA.FU)(i,t.parentId,{isExpanded:!0})),o(i)},onExpand:e=>y(e),onCollapse:e=>h(e),offsetPerLevel:16,isDragEnabled:!0,isNestingEnabled:null===(t=e.isNestingEnabled)||void 0===t||t})))}var e0=n(77617);function e1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){e1(e,t,n[t])})}return e}function e6(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let e3=()=>{let e=(0,c.OF)(),t=(0,e0._)(),n=(0,l.iv)({name:"1e6pj5t-NavigationLinksModal-styles-modalButton",styles:"margin-left:24px;label:NavigationLinksModal-styles-modalButton;"}),o=(0,l.iv)(e2({},u.W.margin({vertical:20}),u.W.font(e6(e2({},e.fontSizeAndWeightVars("medium")),{weight:t.font.weight,color:s.w.colorOut(e.mixBgAndFg(.7))})),{"a[href]":e2({},u.W.font(e6(e2({},e.fontSizeAndWeightVars("medium")),{color:e.mainColors.primary,lineHeight:t.font.lineHeight}))),"a[href]:hover":{textDecoration:"underline"}}),";label:NavigationLinksModal-styles-modalDescription;");return{modalButton:n,modalDescription:o}};function e5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){e5(e,t,n[t])})}return e}function e7(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let e4=e=>e7(e8({},e),{name:e.name.length?e.name:(0,S.t)("(untitled)"),url:e.url.length?e.url:"/"}),e9=e=>e.reduce((e,t)=>{let{id:n}=t;t.children||(t.children=[]);let o={id:n,children:t.children.map(e=>e.id),hasChildren:t.children.length>0,isExpanded:!0,data:t};return[...e,o,...e9(t.children)]},[]),te=e=>{e=function e(t){return t.map(t=>e7(e8({},t),{id:t.id||(0,K.k$)(),children:t.children?e(t.children):[]}))}(e);let t=e9(e).reduce((e,t)=>(e[t.id]=t,e),{});return{rootId:"tree",items:e7(e8({},t),{tree:{id:"tree",children:e.map(e=>e.id),data:void 0}})}},tt=(e,t)=>e[t].children.reduce((t,n)=>{let o=e[n],r=e7(e8({},e4(o.data)),{children:tt(e,n)});return[...t,r]},[]);function tn(e){let{onCancel:t,isVisible:n,navigationItems:o,onSave:r,isNestingEnabled:i,title:a,description:l}=e,s=e3(),[c,u]=(0,P.useState)(!1),[d,p]=(0,P.useState)(te(o));function m(){!c&&(p(te(o)),t())}return(0,P.useEffect)(()=>{p(te(o))},[o]),P.createElement(D.Z,{isVisible:n,size:W.Z.LARGE,exitHandler:m},P.createElement(j.Z,{header:P.createElement(I.Z,{closeFrame:m,title:(0,S.t)(a)}),body:P.createElement(T.Z,null,l&&P.createElement("p",{className:s.modalDescription},l),P.createElement(eQ,{isNestingEnabled:i,treeData:d,onChangeTreeData:p,onStartEditing:()=>u(!0),onStopEditing:()=>u(!1)})),footer:P.createElement(k.Z,{justifyRight:!0},P.createElement(N.Z,{className:s.modalButton,buttonType:C.q.TEXT,onClick:m,disabled:c},(0,S.t)("Cancel")),P.createElement(N.Z,{className:s.modalButton,buttonType:C.q.TEXT_PRIMARY,onClick:function(){let{items:e,rootId:t}=d,n=tt(e,t);r(n)},disabled:c},(0,S.t)("Apply")))}))}var to=n(67903);let tr={condition:e=>"modal"===e.control.inputType&&"Quick Links"===e.rootSchema.description,callback:function(e){var t;let{control:n,instance:o}=e,[r,i]=(0,P.useState)(!1);function a(){i(!1)}return P.createElement(P.Fragment,null,P.createElement("div",{className:"input-wrap"},P.createElement(N.Z,{onClick:function(){i(!0)},buttonType:C.q.STANDARD},n.modalTriggerLabel)),P.createElement(tn,{title:"Quick Links",isNestingEnabled:!1,navigationItems:null!==(t=null!=o?o:(0,to.p)().links)&&void 0!==t?t:[],isVisible:r,onCancel:a,onSave(t){e.onChange(t),a()}}))}};var ti=n(29272);function ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){ta(e,t,n[t])})}return e}function ts(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let tc={condition:e=>"modal"===e.control.inputType&&"Tabs"===e.rootSchema.description,callback:function(e){let t=e3(),[n,o]=(0,P.useState)(!1);function r(){o(!1)}let i=e.control,{description:a}=i.modalContent;return P.createElement(P.Fragment,null,P.createElement("div",{className:"input-wrap"},P.createElement(N.Z,{onClick:function(){o(!0)},buttonType:C.q.STANDARD},i.modalTriggerLabel)),P.createElement(D.Z,{isVisible:n,size:W.Z.LARGE,exitHandler:r},P.createElement(j.Z,{header:P.createElement(I.Z,{closeFrame:r,title:i.modalContent.label}),body:P.createElement(T.Z,null,a&&P.createElement("p",{className:t.modalDescription},a),P.createElement(ti.K,Object.assign({},ts(tl({},e),{control:ts(tl({},i.modalContent),{description:void 0})})))),footer:P.createElement(k.Z,{justifyRight:!0},P.createElement(N.Z,{className:t.modalButton,buttonType:C.q.TEXT,onClick:r},(0,S.t)("Cancel")),P.createElement(N.Z,{className:t.modalButton,buttonType:C.q.TEXT_PRIMARY,onClick:r},(0,S.t)("Apply")))})))}};var tu=n(30520);function td(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){td(e,t,n[t])})}return e}function tm(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let tf={condition:e=>"modal"===e.control.inputType&&"Site Totals"===e.rootSchema.description,callback:function(e){let t=(0,tu.Q)(e.instance,e.rootSchema),[n,o]=(0,P.useState)(!1),r=e3();function i(){o(!1)}(0,P.useEffect)(()=>{e.onChange(t)},[]);let a=e.control,{description:l}=a.modalContent;return P.createElement(P.Fragment,null,P.createElement("div",{className:"input-wrap"},P.createElement(N.Z,{onClick:function(){o(!0)},buttonType:C.q.STANDARD},a.modalTriggerLabel)),P.createElement(D.Z,{isVisible:n,size:W.Z.LARGE,exitHandler:i},P.createElement(j.Z,{header:P.createElement(I.Z,{closeFrame:i,title:a.modalContent.label}),body:P.createElement(T.Z,null,l&&P.createElement("p",{className:r.modalDescription},l),P.createElement(ti.K,Object.assign({},tm(tp({},e),{control:tm(tp({},a.modalContent),{description:void 0}),getRowIcon:function(e){return"data-site-metric"}})))),footer:P.createElement(k.Z,{justifyRight:!0},P.createElement(N.Z,{className:r.modalButton,buttonType:C.q.TEXT,onClick:i},(0,S.t)("Cancel")),P.createElement(N.Z,{className:r.modalButton,buttonType:C.q.TEXT_PRIMARY,onClick:i},(0,S.t)("Apply")))})))}};var tb=n(33879);function tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){tg(e,t,n[t])})}return e}function ty(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function tv(e){return["Events","Discussions","Announcements","Questions","Ideas","Articles","Discussion List"].includes(e)}function tO(e){let t=em(),n=function(e,t,n){let o=e;if("Quick Links"===e.description&&(o=ty(th({},e),{properties:ty(th({},e.properties),{links:ty(th({},e.properties.links),{"x-control":{description:(0,S.t)("Add/Edit quick links"),label:(0,S.t)("Links List"),inputType:"modal",modalTriggerLabel:(0,S.t)("Edit"),modalContent:th({},e.properties.links["x-control"])}})})})),"Tabs"===e.description&&(o=ty(th({},e),{properties:ty(th({},e.properties),{tabConfiguration:ty(th({},e.properties.tabConfiguration),{"x-control":{description:(0,S.t)("Add/Edit Tabs Configuration"),label:(0,S.t)("Tabs"),inputType:"modal",modalTriggerLabel:(0,S.t)("Edit"),modalContent:th({},e.properties.tabConfiguration["x-control"])}})})})),"Site Totals"===e.description){let{apiParams:r}=e.properties,i=ty(th({},r),{properties:ty(th({},r.properties),{counts:ty(th({},r.properties.counts),{"x-control":{description:(0,S.t)("Add/Edit Site Totals Configuration"),label:(0,S.t)("Site Metrics"),inputType:"modal",modalTriggerLabel:(0,S.t)("Edit"),modalContent:th({},r.properties.counts["x-control"])}})})});o=ty(th({},e),{properties:ty(th({},e.properties),{apiParams:i})})}if(["Discussions","Announcements","Questions","Ideas","Discussion List"].includes(e.description)){let a=n&&n.containerOptions&&n.containerOptions.displayType&&n.containerOptions.displayType!==tb.Ku.LIST;a&&(o=ty(th({},e),{properties:ty(th({},e.properties),{discussionOptions:ty(th({},e.properties.discussionOptions),{properties:ty(th({},e.properties.discussionOptions.properties),{metas:{"x-control":{label:(0,S.t)("Meta Options"),description:""},description:"Configure meta options.",properties:ty(th({},e.properties.discussionOptions.properties.metas.properties),{asIcons:{default:!0,description:"Metas as Icons.",type:"boolean"},display:{description:"Display metas",type:"object",properties:ty(th({},e.properties.discussionOptions.properties.metas.properties.display.properties),{category:{description:"Enable category option in meta.",type:"boolean"},startedByUser:{description:"Enable author option in meta.",type:"boolean"},lastCommentDate:{description:"Enable last comment date option in meta.",type:"boolean"},userTags:{description:"Enable user tags option in meta.",type:"boolean"},unreadCount:{description:"Enable unread count option in meta.",type:"boolean"}})}}),type:"object"}})})})})),"Discussion List"===e.description&&(o=ty(th({},o),{properties:ty(th({},o.properties),{apiParams:ty(th({},o.properties.apiParams),{properties:ty(th({},o.properties.apiParams.properties),{followed:{type:"boolean"}})}),containerOptions:ty(th({},o.properties.containerOptions),{properties:ty(th({},o.properties.containerOptions.properties),{displayType:ty(th({},o.properties.containerOptions.properties.displayType),{enum:["grid","list"],"x-control":ty(th({},o.properties.containerOptions.properties.displayType["x-control"]),{choices:{staticOptions:{list:"List",grid:"Grid"}}})}),viewAll:{type:"object",properties:{showViewAll:{type:"boolean"}}}})})})}))}if(tv(e.description)){var l;let{apiParams:s}=o.properties,c=s.properties,{featuredImage:u,fallbackImage:d}=c,p=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(c,["featuredImage","fallbackImage"]),m=th({},p);(null===(l=n.containerOptions)||void 0===l?void 0:l.displayType)!=="link"&&(m.featuredImage=u,m.fallbackImage=d),o=ty(th({},o),{properties:ty(th({},o.properties),{apiParams:ty(th({},s),{properties:m})})})}let f=Object.entries(t).reduce((e,[t,{schema:n}])=>ty(th({},e),{[t]:n}),{});return"Guest Sign In"===e.description&&(f=ty(th({},f),{"role-filter":ty(th({},f["role-filter"]),{properties:ty(th({},f["role-filter"].properties),{roleIDs:ty(th({},f["role-filter"].properties.roleIDs),{"x-control":ty(th({},f["role-filter"].properties.roleIDs["x-control"]),{tooltip:"The guest widget only appears to guest users.",inputType:"empty"})})})})})),"Discussion List"!==e.description&&(o=ty(th({},o),{properties:ty(th({},o.properties),{$middleware:{type:"object",properties:f,"x-control":{label:(0,S.t)("Conditions")}}})})),o}(e.schema,e.middlewares,e.value),o=["containerOptions","itemOptions","$middleware","displayOptions"];tv(e.schema.description)&&(o.push("apiParams"),e.schema.properties.discussionOptions&&o.push("discussionOptions"));let r=function(e){return P.createElement(eD,Object.assign({expandable:!!e.groupName&&o.map(e=>e.toLowerCase()).includes(e.groupName.toLowerCase())},e))};return P.createElement("div",{className:t.settings},P.createElement("h3",{className:t.settingsHeader},(0,S.t)("Widget Options")),P.createElement(eT.I,{FormControlGroup:ex.k,FormControl:e=>(0,ex.c)(e,[tr,tc,tf]),FormGroupWrapper:r,schema:n,instance:e.value,onChange:e.onChange,hideDescriptionInLabels:!0,size:"small",autocompleteClassName:t.autocompleteContainer}))}function tE(e){var t,n,o,r,i,a;let{widgetID:l,onSave:s,isVisible:c,exitHandler:u,initialValue:d,widgetCatalog:p,middlewaresCatalog:m,assetCatalog:f}=e,b=em(),g=(0,L.B)(),h=(0,R.V)(),y=(0,$.hu)("widgetSettings_Modal"),[v,O]=(0,P.useState)(null!=d?d:{});(0,P.useEffect)(()=>{O(null!=d?d:{})},[d]);let E=f&&f[l]?f:p;return P.createElement(D.Z,{isVisible:c,size:W.Z.LARGE,exitHandler:u,titleID:y,className:b.container},P.createElement("form",{onSubmit(e){e.preventDefault(),s(v)},className:b.modalForm},P.createElement(j.Z,{header:P.createElement(I.Z,{titleID:y,closeFrame:u,title:`${(0,S.t)("Add/Edit")} ${null!==(r=null===(t=E[l])||void 0===t?void 0:t.name)&&void 0!==r?r:""}`}),body:P.createElement("section",{className:el()("frameBody-contents",h.contents,b.section)},P.createElement(ew,{widgetID:l,config:v,widgetCatalog:p,value:v,onChange:O,schema:null!==(i=null===(n=E[l])||void 0===n?void 0:n.schema)&&void 0!==i?i:{},middlewares:m,assetCatalog:f}),P.createElement(tO,{value:v,onChange:O,schema:null!==(a=null===(o=E[l])||void 0===o?void 0:o.schema)&&void 0!==a?a:{},middlewares:m})),footer:P.createElement(k.Z,{justifyRight:!0},P.createElement(N.Z,{className:g.actionButton,buttonType:C.q.TEXT,onClick:u},(0,S.t)("Cancel")),P.createElement(N.Z,{submit:!0,className:g.actionButton,buttonType:C.q.TEXT_PRIMARY},(0,S.t)("Save")))})))}var tw=n(34098),tx=n(82492),tP=n.n(tx);function tS(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tC(e){var t,n,o,i,a,l,s,c,u;let d=g(),{editorContents:p,editorSelection:m,layoutViewType:f}=t9(),b=(0,P.useRef)(null),h=(0,eo.U2)(f),[y,O]=(0,P.useState)(!1),[E,w]=(0,P.useState)(!1),[x,S]=(0,P.useState)(""),j=null!==(i=null===(t=null==h?void 0:h.widgets[x])||void 0===t?void 0:t.schema)&&void 0!==i?i:{},I=v.Vz.areWidgetPathsEqual(e.path,m.getPath())&&m.getMode()===r.WIDGET;(0,Y.gw)(b,I);let D=null!==(a=null===(n=p.getSection(e.path))||void 0===n?void 0:n.$hydrate)&&void 0!==a?a:"",T=null!==(l=null==h?void 0:null===(o=h.sections)||void 0===o?void 0:o[D].allowedWidgetIDs)&&void 0!==l?l:null,k=null!==(s=null==h?void 0:h.widgets)&&void 0!==s?s:{};return null!=T&&(k=Object.fromEntries(Object.entries(k).filter(([e,t])=>!!T.includes(e)))),P.createElement(P.Fragment,null,P.createElement(N.Z,{"data-layout-editor-focusable":!0,buttonRef:b,tabIndex:I?0:-1,buttonType:C.q.CUSTOM,ariaLabel:"Add widget",onClick(t){t.preventDefault(),t.stopPropagation(),m.moveSelectionTo(e.path,r.WIDGET),O(!0)},className:d.addWidget},P.createElement("div",{className:(0,tw.cx)(d.buttonCircle,"buttonCircle")},P.createElement(X.JO,{icon:"data-add"}))),P.createElement(en,{title:"Choose your Widget",exitHandler(){O(!1),m.moveSelectionTo(e.path,r.WIDGET)},sections:k,onAddSection(e){w(!0),S(e)},isVisible:y,itemType:"widgets"}),P.createElement(tE,{exitHandler(){w(!1)},onSave(t){p.insertWidget(e.path,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){tS(e,t,n[t])})}return e}({$hydrate:x},t)),m.moveSelectionTo(e.path,r.WIDGET),w(!1),O(!1)},isVisible:E,initialValue:function e(t,n,o,r){let i=null!=r?r:{};return t&&"object"===t.type&&Object.entries(t.properties).map(([t,r])=>{if("object"===r.type)e(r,n,o?`${o}.${t}`:t,i);else if(r[n]){if(o){let a=[...o.split("."),t],l={};a.slice(0,-1).reduce(function(e,t){return e[t]={}},l)[t]=r[n],i=tP()(i,l)}else i[t]=r[n]}}),i}(j,"default"),widgetID:x,widgetCatalog:null!==(c=null==h?void 0:h.widgets)&&void 0!==c?c:{},middlewaresCatalog:null!==(u=null==h?void 0:h.middlewares)&&void 0!==u?u:{}}))}var tj=n(79179),tI=n(25811),tD=n(38443),tT=n(26458);function tk(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tN(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){tk(e,t,n[t])})}return e}function tW(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function tR(e){let{editorContents:t,editorSelection:n}=t9(),o=g(),i=0===e.path.sectionIndex,a=e.path.sectionIndex===t.getSectionCount()-1,l=(0,c.OF)(),s=(document.body.clientWidth-l.contentWidth-2*l.gutter.size)/2;s=Math.max(l.gutter.size,s);let u=P.createElement(tI.$,{onClick(){t.deleteSection(e.path.sectionIndex)},disabled:e.hasAsset},P.createElement(X.JO,{icon:"data-trash"}));return P.createElement(tj.FG,{className:o.toolbarOffset(s),onClick(e){e.preventDefault(),e.stopPropagation()}},P.createElement(tI.$,{disabled:i,onClick(){let o=tW(tN({},e.path),{sectionIndex:e.path.sectionIndex-1});t.moveSection(e.path,o),n.moveSelectionTo(o,r.SECTION)}},P.createElement(X.JO,{icon:"data-up"})),P.createElement(tI.$,{disabled:a,onClick(){let o=tW(tN({},e.path),{sectionIndex:e.path.sectionIndex+1});t.moveSection(e.path,o),n.moveSelectionTo(o,r.SECTION)}},P.createElement(X.JO,{icon:"data-down"})),e.allowColumnInvert&&P.createElement(tI.$,{onClick(n){n.preventDefault(),n.stopPropagation();let o=t.getSection(e.path),r=null==o||!o.isInverted||!o.isInverted,i=tW(tN({},o),{isInverted:r});t.modifySection(e.path.sectionIndex,i)},ariaLabel:"Invert the secondary column alignment between left and right."},P.createElement(X.JO,{icon:"data-swap"})),P.createElement(tD.Z,{component:tT.e,condition:!!e.hasAsset,componentProps:{label:(0,S.t)("This section contains a required widget and cannot be deleted")}},e.hasAsset?P.createElement("span",null,u):u))}var tL=n(62140),t$=n(3308),tA=n(36459),tF=n(31792),tB=n(95563);function tZ(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tM(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){tZ(e,t,n[t])})}return e}function tz(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function tV(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function t_(e){let{editorSelection:t}=t9();return function(n){n.preventDefault(),n.stopPropagation(),t.moveSelectionTo(e,r.SECTION)}}function tH(e,t){let{editorSelection:n}=t9(),o=v.Vz.areSectionPathsEqual(n.getPath(),e),i=o&&n.getMode()===r.SECTION;(0,Y.gw)(t,i);let a=o&&[r.WIDGET,r.SECTION].includes(n.getMode());return(0,P.useDebugValue)({isActive:a,isCorrectPath:o,isSecureContext}),{activeClasses:(0,l.cx)({isActive:a}),isActive:a,isSelected:i}}function tU(e){let{editorSelection:t}=t9(),n=v.Vz.areSectionPathsEqual(e.$editorPath,t.getPath())&&[r.SECTION_ADD].includes(t.getMode()),o=g();return P.createElement(P.Fragment,null,n&&P.createElement("div",{className:o.addSectionContextualStatic},P.createElement(ei,{path:e.$editorPath})))}function tG(e){var t,n;let o=e.$editorPath,{editorSelection:i,editorContents:a}=t9(),l=g(),s=null!==(n=null===(t=i.getPath())||void 0===t?void 0:t.sectionIndex)&&void 0!==n?n:0,c=o.sectionIndex===s,u=a.getSectionCount(),d=o.sectionIndex===u-1,p=i.getMode()===r.SECTION&&c,m=a.isSectionFullWidth(e.$editorPath),f=a.isSectionFullWidth(tz(tM({},e.$editorPath),{sectionIndex:e.$editorPath.sectionIndex-1})),b=tL.u[e.$hydrate].allowColumnInvert,h=-20;m?h=0:f&&(h=-16);let y=tL.u[e.$hydrate].regionNames.some(t=>e[t]&&e[t].some(e=>(null==e?void 0:e.props)&&e.props.$hydrate&&e.props.$hydrate.includes("asset")));return P.createElement(P.Fragment,null,!e.skipBefore&&P.createElement("div",{className:l.addSectionContextualBefore},P.createElement(ei,{path:o})),d&&P.createElement("div",{className:l.addSectionContextualAfter},P.createElement(ei,{path:tz(tM({},o),{sectionIndex:o.sectionIndex+1})})),!e.skipAfter&&p&&P.createElement(tR,{path:e.$editorPath,offset:h,allowColumnInvert:b,hasAsset:y}))}function tq(e){let{editorSelection:t,editorContents:n}=t9(),o=n.getSectionInfo(e.$editorPath);if(!o)return e;let i=tM({},e),a=v.Vz.areSectionPathsEqual(e.$editorPath,t.getPath())&&[r.SECTION,r.WIDGET].includes(t.getMode());for(let l of o.regionNames){var s;if("string"!=typeof l)continue;let c=P.Children.toArray(null!==(s=e[l])&&void 0!==s?s:[]);(0===c.length||!o.oneWidgetPerRegion&&a)&&(c.push(P.createElement(tC,{key:"add-button",path:tz(tM({},e.$editorPath),{sectionRegion:l,sectionRegionIndex:c.length})})),i[l]=c)}return i}let tJ={};!function(e){for(let[t,n]of Object.entries(e))tJ[t.toLowerCase()]={Component:n}}({SectionTwoColumns:function(e){e=tq(e);let{$editorPath:t,$componentName:n,$hydrate:o}=e,r=tV(e,["$editorPath","$componentName","$hydrate"]),i=g(),a=(0,P.useRef)(null),{isActive:s,isSelected:c,activeClasses:u}=tH(e.$editorPath,a),d=t_(e.$editorPath);return P.createElement(P.Fragment,null,P.createElement(tB.Z,Object.assign({},r,{role:"button","aria-label":`Two column section at position ${e.$editorPath.sectionIndex}`,"data-layout-editor-focusable":!0,onClick:d,className:(0,l.cx)(i.section(),u),tabIndex:c?0:-1,"data-layout-selectable":!0,contentRef:a,childrenBefore:P.createElement(tG,Object.assign({},e))})))},SectionThreeColumns:function(e){e=tq(e);let{$editorPath:t,$componentName:n,$hydrate:o}=e,r=tV(e,["$editorPath","$componentName","$hydrate"]),i=g(),a=(0,P.useRef)(null),{isActive:s,isSelected:c,activeClasses:u}=tH(e.$editorPath,a),d=t_(e.$editorPath);return P.createElement(P.Fragment,null,P.createElement(tF.Z,Object.assign({},r,{role:"button","aria-label":"Three column section","data-layout-editor-focusable":!0,onClick:d,className:(0,l.cx)(i.section(),u),tabIndex:c?0:-1,"data-layout-selectable":!0,contentRef:a,childrenBefore:P.createElement(tG,Object.assign({},e))})))},SectionOneColumn:function(e){e=tq(e);let{$editorPath:t,$componentName:n,$hydrate:o}=e,r=tV(e,["$editorPath","$componentName","$hydrate"]),i=g(),a=(0,P.useRef)(null),{isActive:s,isSelected:c,activeClasses:u}=tH(e.$editorPath,a),d=t_(e.$editorPath);return P.createElement(P.Fragment,null,P.createElement(tA.t,Object.assign({},r,{role:"button","aria-label":`One column section at position ${e.$editorPath.sectionIndex}`,"data-layout-editor-focusable":!0,onClick:d,className:(0,l.cx)(i.section(),u),tabIndex:c?0:-1,"data-layout-selectable":!0,contentRef:a,childrenBefore:P.createElement(tG,Object.assign({},e))})))},SectionFullWidth:function(e){e=tq(e);let{$editorPath:t,$componentName:n,$hydrate:o}=e,r=tV(e,["$editorPath","$componentName","$hydrate"]),{editorSelection:i,editorContents:a}=t9(),s=g(),c=(0,P.useRef)(null),{isActive:u,isSelected:d,activeClasses:p}=tH(e.$editorPath,c),m=t_(e.$editorPath),f=0===e.$editorPath.sectionIndex,b=a.isSectionFullWidth(e.$editorPath),h=a.isSectionFullWidth(tz(tM({},e.$editorPath),{sectionIndex:e.$editorPath.sectionIndex-1})),y=b&&(f||h);return P.createElement(P.Fragment,null,y&&P.createElement(tU,Object.assign({},e)),P.createElement(t$.a,Object.assign({},r,{role:"button","aria-label":`Full width section at position ${e.$editorPath.sectionIndex}`,"data-layout-editor-focusable":!0,onClick:m,className:(0,l.cx)(s.section(1),"isFullWidth",p,s.fullWidth),tabIndex:d?0:-1,contentRef:c,"data-layout-selectable":!0,childrenBefore:P.createElement(tG,Object.assign({},e,{skipBefore:y}))})))}});let tX=e=>{var t;return null!==(t=tJ[e.toLowerCase()])&&void 0!==t?t:(0,eg.jJ)(e)};var tY=n(42965);function tK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tQ(e){var t,n;let{editorContents:i,editorSelection:a,layoutViewType:s}=t9(),c=a.getWidgetPathInDirection(e.path,o.RIGHT),u=a.getWidgetPathInDirection(e.path,o.LEFT),d=a.getWidgetPathInDirection(e.path,o.DOWN),p=a.getWidgetPathInDirection(e.path,o.UP),m=(0,eo.U2)(s),f=i.getWidget(e.path),b=null!=f?f:{},{$hydrate:h}=b,y=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(b,["$hydrate"]),[v,O]=(0,P.useState)(!1),E=null==h?void 0:h.includes("asset"),w=P.createElement(tI.$,{disabled:E,onClick(t){t.preventDefault(),t.stopPropagation(),i.deleteWidget(e.path),a.moveSelectionTo(e.path,r.WIDGET)}},P.createElement(X.JO,{icon:"data-trash"}));return P.createElement(P.Fragment,null,P.createElement(tj.FG,{onClick(e){e.preventDefault(),e.stopPropagation()},className:(0,l.cx)(g().toolbarMenu,"layoutEditorToolbarMenu")},P.createElement(tI.$,{disabled:!u,onClick(){u&&(i.moveWidget(e.path,u),a.moveSelectionTo(u,r.WIDGET))}},P.createElement(X.JO,{icon:"data-left"})),P.createElement(tI.$,{disabled:!p,onClick(){p&&(i.moveWidget(e.path,p),a.moveSelectionTo(p,r.WIDGET))}},P.createElement(X.JO,{icon:"data-up"})),P.createElement(tI.$,{disabled:!d,onClick(){d&&(i.moveWidget(e.path,d),a.moveSelectionTo(d,r.WIDGET))}},P.createElement(X.JO,{icon:"data-down"})),P.createElement(tI.$,{disabled:!c,onClick(){c&&(i.moveWidget(e.path,c),a.moveSelectionTo(c,r.WIDGET))}},P.createElement(X.JO,{icon:"data-right"})),P.createElement(tI.$,{onClick(e){e.preventDefault(),e.stopPropagation(),O(!0)}},P.createElement(X.JO,{icon:"data-pencil"})),P.createElement(tD.Z,{component:tT.e,condition:!!E,componentProps:{label:(0,S.t)("You cannot delete this required widget")}},E?P.createElement("span",null,w):w)),P.createElement(tE,{exitHandler(){O(!1)},onSave(t){i.modifyWidget(e.path,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){tK(e,t,n[t])})}return e}({$hydrate:h},t)),a.moveSelectionTo(e.path,r.WIDGET),O(!1)},isVisible:v,initialValue:y,widgetCatalog:null!==(t=null==m?void 0:m.widgets)&&void 0!==t?t:{},middlewaresCatalog:null!==(n=null==m?void 0:m.middlewares)&&void 0!==n?n:{},widgetID:null!=h?h:"",assetCatalog:null==m?void 0:m.assets}))}var t0=n(11129);function t1(e){let{$editorPath:t,children:n}=e,{editorSelection:o}=t9(),i=(0,P.useRef)(null),a=o.getMode()===r.WIDGET&&v.Vz.areWidgetPathsEqual(t,o.getPath());(0,Y.gw)(i,a);let l=g();return(0,P.useLayoutEffect)(()=>{var e;null===(e=i.current)||void 0===e||e.setAttribute("data-layout-editor-focusable","")},[i.current]),P.createElement(eh.f,{onClick(t){t.preventDefault(),t.stopPropagation(),o.moveSelectionTo(e.$editorPath,a?r.SECTION:r.WIDGET)},tabIndex:a?0:-1,widgetRef:i,extraClasses:l.widget,extraContent:a&&P.createElement(P.Fragment,null,P.createElement("div",{className:l.widgetBorder}),v.Vz.isWidgetPath(t)&&P.createElement(tQ,{path:t})),childrenWrapperClassName:(0,t0.eH)()},n)}var t2=n(59245),t6=n(72588),t3=n(51640);function t5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t8(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){t5(e,t,n[t])})}return e}function t7(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}let t4=P.createContext({});function t9(){return(0,P.useContext)(t4)}function ne(e){return P.createElement(nn,Object.assign({},e),P.createElement(nt,Object.assign({},e)))}function nt(e){let{catalog:t}=e,n=(0,P.useRef)(null),{editorContents:i,editorSelection:a}=t9(),[l,s]=(0,P.useState)(null);(0,P.useEffect)(()=>{!i.validate().isValid&&Object.keys(t.assets).length>0&&"discussionList"===t.layoutViewType&&(i.insertSection(0,tY.u.discussionList()),a.moveSelectionTo(v.Vz.section(0),r.SECTION))},[t.assets,t.layoutViewType]),(0,Y.LJ)(n,(e,t)=>{let o=null==t?void 0:t.closest("[data-layout-editor-modal]");!t||e||o?e&&t===n.current&&a.restoreState():a.stashState()});let c=(0,$.hu)("description");if(0===i.getSectionCount()&&i.validate().isValid){let u=e=>{i.insertSection(0,{$hydrate:e}),a.moveSelectionTo(v.Vz.section(0),r.SECTION)},d=g();return P.createElement("form",{className:d.initialSectionForm,onKeyPress(e){("Enter"===e.key||"Space"===e.key)&&(e.preventDefault(),e.stopPropagation(),l&&u(l))}},P.createElement(er.ZP,{fullGutter:!0,narrow:!0,maxWidth:800},P.createElement(G,{label:"Start with a Section",onSectionClick:u,sections:t.sections,onChange:s,value:null!=l?l:Object.keys(t.sections)[0]})))}let p=g();return P.createElement(P.Fragment,null,P.createElement("div",{className:(0,t3.W)().visuallyHidden,id:c},"Enter and Escape keys switch modes between between the editor, sections, and widgets. In the section mode Arrow Up and Arrow Down navigate between between sections. In the widget mode the arrow keys navigate between widgets. Tab navigates into toolbars. Shift Tab navigates out of toolbars."),P.createElement("div",{ref:n,className:p.root,tabIndex:a.getMode()===r.NONE?0:-1,onKeyDown:function(e){if(e.target===n.current){"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),a.setMode(r.SECTION));return}let t=e.target instanceof HTMLElement&&e.target.hasAttribute("data-layout-editor-focusable");if(t)switch(e.key){case"ArrowDown":e.preventDefault(),e.stopPropagation(),a.moveSelectionInDirection(o.DOWN);break;case"ArrowUp":e.preventDefault(),e.stopPropagation(),a.moveSelectionInDirection(o.UP);break;case"ArrowRight":e.preventDefault(),e.stopPropagation(),a.moveSelectionInDirection(o.RIGHT);break;case"ArrowLeft":e.preventDefault(),e.stopPropagation(),a.moveSelectionInDirection(o.LEFT);break;case"Enter":a.getMode()===r.SECTION&&null!==a.getPath()&&(e.preventDefault(),e.stopPropagation(),a.moveSelectionTo(a.getPath(),r.WIDGET));break;case"Escape":if(a.getMode()===r.WIDGET&&null!==a.getPath())e.preventDefault(),e.stopPropagation(),a.moveSelectionTo(v.Vz.section(a.getPath().sectionIndex),r.SECTION);else if(a.getMode()===r.SECTION||a.getMode()===r.SECTION_ADD){var i;null===(i=n.current)||void 0===i||i.focus(),a.setMode(r.NONE)}}},"aria-label":"Layout Editor","aria-describedby":c},P.createElement(ey.FU.Provider,{value:t7(t8({},ey.XE),{areLinksDisabled:!0})},P.createElement(t6.Yk,null,P.createElement(er.v$,{maxWidth:1264},P.createElement(er.t6,null,P.createElement(eb.I.Provider,{value:{fallbackWidget:eg.fy,componentFetcher:tX,componentWrapper:t1}},P.createElement(eb.t,{allowInternalProps:!0,layout:i.hydrate().layout}))))))))}function nn(e){let{draft:t,onDraftChange:n,children:o}=e,{layoutViewType:i}=t,a=(0,eo.U2)(i),[l,s]=(0,P.useState)(null);(0,P.useEffect)(()=>{s(new w(v.Vz.section(0),r.NONE,s))},[s]);let c=(0,P.useMemo)(()=>a?new v.xM(t,a,e=>n(t7(t8({},t),{layout:e.getLayout()}))):null,[a,t,n]),u=(0,P.useMemo)(()=>null===c||null===l?null:l.withContents(c),[l,c]);return null===c||null===u?P.createElement(t2.n,null):P.createElement(t4.Provider,{value:{layoutViewType:t.layoutViewType,editorContents:c,editorSelection:u}},o)}var no=n(40533),nr=n(47178),ni=n(52839);function na(e,t,n,o,r,i,a){try{var l=e[i](a),s=l.value}catch(c){n(c);return}l.done?t(s):Promise.resolve(s).then(o,r)}function nl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ns(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){nl(e,t,n[t])})}return e}function nc(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n.push.apply(n,o)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var nu=n(88791),nd=n(68835),np=n(22056),nm=n(57997),nf=n(85859);function nb(e){var t,n,o;let{cancelPath:r,disableSave:i,onSave:a,autoFocusTitleInput:l,leftPanel:s}=e,c=(0,nf.wt)(),u=null!==(t=e.isCompact)&&void 0!==t?t:c===nf.tx.COMPACT,d=(0,P.useRef)(),[p,m]=(0,P.useState)(e.title),f=null!==(n=e.title)&&void 0!==n?n:p,b=null!==(o=e.onTitleChange)&&void 0!==o?o:m,g=(0,nm.Z)(),h=e=>{d.current&&d.current!==document.activeElement&&(e&&e.preventDefault(),d.current.focus(),document.execCommand("selectAll"))},y=()=>{if(""!==f.trim())a&&a();else{var e;null===(e=d.current)||void 0===e||e.reportValidity()}},v=function(e,t){let[n,o]=(0,P.useState)(e);return(0,P.useEffect)(()=>{let t=setTimeout(()=>{o(e)},500);return()=>{clearTimeout(t)}},[e]),n}(f,500);return(0,P.useEffect)(()=>{v!==e.title&&""!==v&&b&&b(v)},[v]),P.createElement(P.Fragment,null,P.createElement("div",{className:g.editingContainerWrapper},P.createElement("div",{className:el()(g.editingContainer,s?void 0:g.noLeftPanel)},P.createElement("div",{className:g.wrapper},P.createElement("div",{className:g.editLeftActions},P.createElement(nu.Z,{buttonType:C.q.TEXT,className:g.backButton,to:r},P.createElement(eL.wI,null),(0,S.t)("Cancel"))),!u&&P.createElement("div",{className:g.editTitle},P.createElement(nd.a,{required:!0,onChange:e=>b(e.target.value),className:el()((0,np.W)().themeInput),ref:e=>d.current=e,value:f,placeholder:(0,S.t)("Untitled"),disabled:i,onFocus:e=>e.target.select(),autoFocus:l,onKeyDown(e){"Enter"===e.key&&(e.preventDefault(),e.target.blur())},onMouseDown:h,maxLength:100}),P.createElement(N.Z,{buttonType:C.q.ICON,onClick:h,disabled:i},P.createElement(eL.dY,{small:!0}))),P.createElement("div",{className:g.editActions},e.actions,!e.noSaveButton&&P.createElement(N.Z,{buttonType:C.q.TEXT_PRIMARY,className:g.saveButton,onClick:y,disabled:i},(0,S.t)("Save")))))),u&&P.createElement("div",{className:el()(g.editTitle,g.editTitleOnMobile)},P.createElement(nd.a,{required:!0,onChange:e=>b(e.target.value),className:el()((0,np.W)().themeInput),ref:e=>d.current=e,value:f,placeholder:(0,S.t)("Untitled"),disabled:i,onFocus:e=>e.target.select(),autoFocus:l,onKeyDown(e){"Enter"===e.key&&(e.preventDefault(),e.target.blur())},onMouseDown:h,maxLength:100}),P.createElement(N.Z,{buttonType:C.q.ICON,onClick:h},P.createElement(eL.dY,{small:!0}))))}var ng=n(10914);function nh(e){let{isSaving:t,actions:n,disableSave:o}=e,r=function(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["isSaving","actions","disableSave"]);return P.createElement(nb,Object.assign({},r,{noSaveButton:!0,actions:P.createElement(P.Fragment,null,n,P.createElement(N.Z,{buttonType:C.q.TEXT_PRIMARY,onClick:e.onSave,disabled:t||o},t?P.createElement(ng.Z,null):(0,S.t)("Save")))}))}var ny=n(70015),nv=n(33691),nO=n(46452),nE=n(83323),nw=n(57298);function nx(e,t,n,o,r,i,a){try{var l=e[i](a),s=l.value}catch(c){n(c);return}l.done?t(s):Promise.resolve(s).then(o,r)}function nP(e){var t,n,o;let{history:r}=e,{layoutViewType:l,layoutID:s}=e.match.params,{layoutDraft:c,persistDraft:u,updateDraft:d}=function(e,t){var n,o;let r=(0,no.BQ)();(0,P.useEffect)(()=>{!e&&t&&r(ni.initializeLayoutDraft({initialLayout:{layoutViewType:t}}))},[e,t]);let i=(0,no.BK)(({layoutSettings:e})=>e.layoutDraft),a=(0,no.BK)(({layoutSettings:t})=>e?t.layoutJsonsByLayoutID[e]:void 0);(0,P.useEffect)(()=>{e&&((null==a?void 0:a.status)?a.status===nr.Px.SUCCESS&&r(ni.initializeLayoutDraft({initialLayout:nc(ns({},a.data),{layoutViewType:t})})):r(ni.fetchLayoutJson(e)).unwrap().then(e=>{r(ni.initializeLayoutDraft({initialLayout:nc(ns({},e),{layoutViewType:t})}))}))},[e,a]);let l=(0,P.useCallback)((o=(n=function*(e){if(i)return r(ni.updateLayoutDraft(e)),r(ni.persistLayoutDraft(ns({},i,e))).unwrap()},function(){var e=this,t=arguments;return new Promise(function(o,r){var i=n.apply(e,t);function a(e){na(i,o,r,a,l,"next",e)}function l(e){na(i,o,r,a,l,"throw",e)}a(void 0)})}),function(e){return o.apply(this,arguments)}),[r,i]),s=(0,P.useCallback)(e=>{r(ni.updateLayoutDraft(e))},[r]);return{layoutDraft:i,persistDraft:l,updateDraft:s}}(s,l),p=(0,nv.pm)(),[m,f]=(0,P.useState)(!1),{textContent:b,setTextContent:g,loadTextDraft:h,validateTextDraft:y,dismissJsonError:v,jsonErrorMessage:O}=function(){let[e,t]=(0,P.useState)(""),[n,o]=(0,P.useState)(null),r=(0,P.useCallback)(()=>{o(null)},[o]),i=(0,P.useCallback)(e=>{o(null),t(JSON.stringify(nc(ns({},e),{layoutID:void 0,name:void 0,layoutViewType:void 0}),null,4))},[o,t]),a=(0,P.useCallback)((e,t)=>{try{var n;let r=JSON.parse(e),i=tY.u.validateAssets(nc(ns({},r),{layoutViewType:t}));return o(i.isValid?null:null!==(n=i.message)&&void 0!==n?n:""),i.isValid?r:null}catch(a){return(0,K.H)(a),o(a.message),null}},[o]);return{textContent:e,setTextContent:t,jsonErrorMessage:n,dismissJsonError:r,loadTextDraft:i,validateTextDraft:a}}(),E=(0,eo.U2)(l),w=(0,ny.g_)([i.M]),x=!!(null==w?void 0:null===(t=w.data)||void 0===t?void 0:t[i.M]);function S(){var e;return(S=(e=function*(){if(c)try{f(!0);let e=yield u(c);e&&(r.replace((0,nw.qC)(a.H8.url(e))),p.addToast({autoDismiss:!0,body:P.createElement(P.Fragment,null,(0,nw.t)("Layout saved."))}))}catch(t){p.addToast({autoDismiss:!0,body:P.createElement(P.Fragment,null,t.description)})}},function(){var t=this,n=arguments;return new Promise(function(o,r){var i=e.apply(t,n);function a(e){nx(i,o,r,a,l,"next",e)}function l(e){nx(i,o,r,a,l,"throw",e)}a(void 0)})})).apply(this,arguments)}return P.createElement(D.Z,{size:W.Z.FULL_SCREEN,isVisible:!0,scrollable:!0},x&&P.createElement(nh,{actions:P.createElement(N.Z,{onClick(e){e.preventDefault(),!c||h(c)},buttonType:C.q.TEXT},(0,nw.t)("Advanced")),onSave:function(){return S.apply(this,arguments)},cancelPath:null==s?a.xh.url(l):a.H8.url({name:null!==(n=null==c?void 0:c.name)&&void 0!==n?n:(0,nw.t)("My Layout"),layoutID:s,layoutViewType:l}),autoFocusTitleInput:null==s,title:null!==(o=null==c?void 0:c.name)&&void 0!==o?o:(0,nw.t)("My Layout"),onTitleChange(e){d({name:e})},disableSave:!!O,isSaving:m}),c&&E?x?P.createElement(ne,{draft:c,onDraftChange:d,catalog:E}):P.createElement("h1",{style:{paddingLeft:24}},(0,nw.t)("Page Not Found")):P.createElement(t2.n,null),P.createElement(D.Z,{exitHandler(){!function(){let e=y(b,l);e&&(d(e),g(""))}()},isVisible:!!b,size:W.Z.MODAL_AS_SIDE_PANEL_RIGHT_LARGE},O&&P.createElement(nO.Z,{confirmText:(0,nw.t)("Dismiss"),onConfirm(){v()},cancelText:(0,nw.t)("Discard Changes"),onCancel(){v(),g("")},title:"Editor contains invalid JSON.",stringContents:O}),P.createElement(nE.Z,{value:b,onChange(e,t){t&&g(t)},language:"json",jsonSchemaUri:(0,nw.or)(`/api/v2/layouts/schema?layoutViewType=${l}`)})))}}}]);