"use strict";(self.webpackChunkvanillaadmin_new=self.webpackChunkvanillaadmin_new||[]).push([[5122,3410],{78816(e,t,a){var n,s;a.d(t,{mf:()=>n}),(s=n||(n={})).CATEGORIES="categories",s.DEFAULT="default",s.DISCUSSIONS="discussions",s.FLAT="flat",s.HEADING="heading"},68228(e,t,a){a.d(t,{ZP:()=>C});var n=a(57298),s=a(75741),i=a(99308),o=a(47178),r=a(23279),l=a.n(r);function u(e,t,a,n,s,i,o){try{var r=e[i](o),l=r.value}catch(u){a(u);return}r.done?t(l):Promise.resolve(l).then(n,s)}let d=(0,i.ZP)("@@categorySuggestions"),c=class e extends s.ZP{constructor(...t){super(...t),this.internalLoadCategories=(t,a)=>{let{suggestionsByQuery:n}=this.getState().forum.categories,i=null!==(r=n[t])&&void 0!==r?r:{status:o.Px.PENDING};if(i.status===o.Px.LOADING||i.status===o.Px.SUCCESS)return;var r,l,d=this;let c=(0,s.KP)(e.loadCategories,(l=function*(){let e=yield d.api.get("/categories/search",{params:{query:t,parentCategoryID:a,expand:["breadcrumbs"]}});return e.data},function(){var e=this,t=arguments;return new Promise(function(a,n){var s=l.apply(e,t);function i(e){u(s,a,n,i,o,"next",e)}function o(e){u(s,a,n,i,o,"throw",e)}i(void 0)})}))({query:t});return this.dispatch(c)},this.loadCategories=l()(this.internalLoadCategories,100)}};c.loadCategories=d.async("GET");var g=a(67294),h=a(46458),v=a(89163),m=a(73819);let C=function(e){var t,a,i;let[r,l]=(0,g.useState)(""),[u,d]=(0,g.useState)(!1),C=function(e,t,a){let n=(0,s.LO)(c),i=(0,h.v9)(t=>{var a;return null!==(a=t.forum.categories.suggestionsByQuery[e])&&void 0!==a?a:{status:o.Px.PENDING}});return(0,g.useEffect)(()=>{(e||a)&&n.loadCategories(e,t)},[e,t,a]),i}(r,e.parentCategoryID,u),p=()=>{d(!0)},{multiple:f}=e,S;if(C.status===o.Px.SUCCESS&&C.data){let y=C.data;e.displayAs&&(y=y.filter(t=>t.displayAs===e.displayAs)),S=y.map(e=>{var t,a,n,s;let i,o=null!==(a=null===(t=e.breadcrumbs)||void 0===t?void 0:t.length)&&void 0!==a?a:0;return o>1&&(i=null===(n=e.breadcrumbs)||void 0===n?void 0:null===(s=n[o-2])||void 0===s?void 0:s.name),{value:e.categoryID,label:e.name,data:{parentLabel:i}}})}let b=C.status===o.Px.LOADING;return f?g.createElement(m.n,Object.assign({onFocus:p},e,{placeholder:(0,n.t)("Search..."),isLoading:b,onInputChange:l,label:null!==(t=e.label)&&void 0!==t?t:(0,n.t)("Community Category"),showIndicator:!0,options:S,maxHeight:e.maxHeight})):g.createElement(v.Z,Object.assign({onFocus:p},e,{placeholder:(0,n.t)("Search..."),onInputChange:l,isLoading:b,onChange(t){e.onChange&&e.onChange([t])},options:S,label:null!==(a=e.label)&&void 0!==a?a:(0,n.t)("Community Category"),value:(null!==(i=e.value)&&void 0!==i?i:[])[0],maxHeight:e.maxHeight}))}}}]);