"use strict";(self.webpackChunkvanillaadmin_new=self.webpackChunkvanillaadmin_new||[]).push([[4789],{52368(e,t,r){r.r(t);var n=r(99369),o=r(3308),l=r(36459),i=r(31792),c=r(95563),s=r(98760),a=r(29871),u=r(7284),d=r(76264),p=r(96491),m=r(45340),f=r(71996),y=r(57114),g=r(17544),b=r(91421),O=r(95804),h=r(88005),v=r(4980),C=r(13539),E=r(67294),P=r(88078),S=r(32812),w=r(33879),j=r(99489),I=r(17102),R=r(57557),N=r.n(R),x=r(42747),B=r(49986),D=r(32353),T=r(11590),Z=r(83386),A=r(28236);function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let k=(0,A.yI)(()=>{let e=(0,D.GG)().options,t=(0,T.iv)(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){L(e,t,r[t])})}return e}({},Z.W.padding(e.box.spacing)),";label:FeaturedCollections-style-listWrapper;");return{listWrapper:t}});function W(e){let{record:t,asTile:r,featuredImage:n}=e,o=k();return E.createElement(B.H,{name:null==t?void 0:t.name,description:null==t?void 0:t.excerpt,image:null==t?void 0:t.image,featuredImage:n,asTile:r,url:null==t?void 0:t.url,className:(0,T.cx)((0,D.nv)().root,!r&&o.listWrapper)})}function H(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F(e){var t,r,n,o,l;let{options:i,collection:c}=e,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["options","collection"]),u=(0,j.u)(i),d=(0,E.useMemo)(()=>{var e;return[w.Ku.GRID,w.Ku.CAROUSEL].includes(null!==(e=u.options.displayType)&&void 0!==e?e:w.Ku.LIST)},[u]),p=(o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){H(e,t,r[t])})}return e}({},N()(i,"featuredImage")),l=(l={displayType:null!==(t=null==i?void 0:i.displayType)&&void 0!==t?t:w.Ku.LIST},l),Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(l)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(l,e))}),o),m=(null==c?void 0:c.records)&&c.records.map(e=>E.createElement(W,Object.assign({key:e.recordID},e,{asTile:d,featuredImage:null==i?void 0:i.featuredImage})));if(p.displayType===w.Ku.LINK&&(null==c?void 0:c.records)){let f=c.records.map(e=>{var t,o;return{id:e.recordID.toString(),name:null!==(r=null===(t=e.record)||void 0===t?void 0:t.name)&&void 0!==r?r:"",url:null!==(n=null===(o=e.record)||void 0===o?void 0:o.url)&&void 0!==n?n:"#"}});return E.createElement(s.Z,Object.assign({},a,{links:f,containerOptions:p}))}return E.createElement(I.h,Object.assign({},a,{options:p}),d?m:E.createElement(x.a,null,m))}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G(e){let{containerOptions:t,displayOptions:r}=e,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["containerOptions","displayOptions"]),o=(0,E.useMemo)(()=>N()(n,"apiParams"),[n]),l=(0,E.useMemo)(()=>(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){U(e,t,r[t])})}return e})({},t,(null==r?void 0:r.featuredImage)&&{featuredImage:{display:r.featuredImage,fallbackImage:r.fallbackImage}}),[t,r]);return E.createElement(F,Object.assign({},o,{options:l}))}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,n.pX)({SectionFullWidth:o.a,SectionOneColumn:l.t,SectionTwoColumns:c.Z,SectionThreeColumns:i.Z,QuickLinks:s.g,UserSpotlightWidget:a.q,SiteTotalsWidget:u.o,CategoriesWidget:d.m,DiscussionsWidget:m.o,LeaderboardWidget:p.f,HtmlWidget:f.o,RSSWidget:y.q,NewPostMenu:g.Z,BannerWidget:b.d,BannerContentWidget:O.U,TabWidget:h.O,CallToActionWidget:v.Z,GuestCallToActionWidget:C.Z,FeaturedCollectionsWidget:function(e){var t,r;let{containerOptions:n}=e;return E.createElement(S.$,null,E.createElement(G,Object.assign({},e,{containerOptions:(t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_(e,t,r[t])})}return e}({},n),r=(r={maxColumnCount:(null==n?void 0:n.displayType)===w.Ku.CAROUSEL?2:null==n?void 0:n.maxColumnCount},r),Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t),collection:{collectionID:1,name:"Preview Collection",records:P.Z.discussions(10,!0).map(e=>({recordID:e.discussionID,recordType:j.Q.DISCUSSION,record:{name:e.name,excerpt:e.excerpt,url:e.url,image:e.image}}))}})))}})},17476(e,t,r){r.d(t,{ed:()=>B,zg:()=>Z,Ox:()=>T});var n,o,l=r(47178),i=r(18626),c=r(82391),s=r(33188),a=r(81612),u=r(2292),d=r(24462),p=r(88791),m=r(57298),f=r(94184),y=r.n(f),g=r(67294),b=r(23410),O=r(59736),h=r(75994),v=r(75864),C=r(83386);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){E(e,t,r[t])})}return e}function S(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let w=()=>{let e=(0,v.Y7)("pageErrorMessage"),t=(0,h.OF)(),r=e({justifyContent:"center"}),n=e("title",P({},C.W.font(S(P({},t.fontSizeAndWeightVars("title","semiBold")),{lineHeight:t.lineHeights.condensed,align:"center"})))),o=e("description",S(P({},C.W.font(S(P({},t.fontSizeAndWeightVars("large")),{align:"center"}))),{marginTop:(0,O.dd)(12)})),l=e("cta",P({display:"flex",justifyContent:"center",alignItems:"center"},C.W.margin({top:(0,O.dd)(21),horizontal:"auto"}))),i=e("titleAsParagraph",P({},C.W.font(P({},t.fontSizeAndWeightVars("large"))))),c=e("icon",P({},{"&&":P({display:"block",color:b.w.colorOut(t.mainColors.primary),height:(0,O.dd)(85),width:(0,O.dd)(85)},C.W.margin({bottom:12,horizontal:"auto"}))}));return{root:r,title:n,description:o,cta:l,titleAsParagraph:i,errorIcon:c}};var j=r(81478),I=r(21328);function R(e){let{detailedErrors:t}=e;return t&&0!==Object.keys(e).length?g.createElement("div",{className:(0,I.s)().root},g.createElement("h3",null,"Debug Errors"),Object.entries(t).map(([e,t],r)=>g.createElement("label",{key:r},g.createElement("strong",null,e),g.createElement(j.Z,{errors:t})))):g.createElement(g.Fragment,null)}var N=r(10923);function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){var t,r;let n=w(),l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){x(e,t,r[t])})}return e}({},function(e){let t=w(),r=(0,c.JH)(),n=T(e);switch(e){case 403:case o.PERMISSION:return{message:n,description:(0,m.t)("You don't have permission to view this resource."),actionItem:g.createElement(D,null),icon:g.createElement(a.LT,{message:n,className:t.errorIcon})};case 404:case o.NOT_FOUND:return{message:n,description:(0,m.t)("The page you were looking for could not be found."),actionItem:g.createElement(p.Z,{buttonType:s.q.PRIMARY,to:"/"},(0,m.t)("Back to home page")),icon:g.createElement(a.LT,{message:n,className:t.errorIcon})};case o.GENERIC:default:return{message:n,description:(0,m.t)("Please try again later."),actionItem:g.createElement(p.Z,{className:r.primary,to:"/"},(0,m.t)("Back to Home")),icon:g.createElement(a.LT,{message:n,className:t.errorIcon})}}}(Z(e)),e.error||{}),{message:i,messageAsParagraph:f,description:b}=l;return g.createElement("main",{className:y()(e.className,n.root)},l.icon,!f&&g.createElement(u.Z,{depth:1,className:n.title,title:i}),f&&g.createElement(d.Z,{className:n.titleAsParagraph},i),l.description&&g.createElement(d.Z,{className:n.description},b),(0,N.fF)()&&g.createElement(R,{detailedErrors:null==l?void 0:null===(t=l.response)||void 0===t?void 0:null===(r=t.data)||void 0===r?void 0:r.errors}),l.actionItem&&g.createElement("div",{className:n.cta},l.actionItem))}function D(){let{currentUser:e}=(0,i.eu)();return e.status===l.Px.SUCCESS&&e.data&&(0,i.$m)(e.data)?g.createElement(p.Z,{to:`/entry/signin?Target=${encodeURIComponent(window.location.href)}`},(0,m.t)("Sign In")):null}function T(e){switch(e){case 403:case o.PERMISSION:return(0,m.t)("Permission Problem");case 404:case o.GENERIC:default:return(0,m.t)("There was an error")}}function Z(e){return e.apiError&&e.apiError.response?e.apiError.response.status:e.error&&e.error.status?e.error.status:e.defaultError?e.defaultError:(0,e.defaultError)}(n=o||(o={})).GENERIC="generic",n.PERMISSION="permission",n.NOT_FOUND="notfound"},47313(e,t,r){r.d(t,{m:()=>u});var n=r(10855),o=r(81156),l=r(52239),i=r(67294),c=r(17476),s=r(43023),a=r(46345);function u(e){let t=(0,c.zg)(e),r=(0,c.Ox)(t),u={inheritHeight:(0,l.vi)()};return i.createElement(o.Z,{title:r},i.createElement(n.ZP,{className:u.inheritHeight,tag:"main"},i.createElement(s.Z,{className:u.inheritHeight},i.createElement(a.Z,{className:u.inheritHeight},i.createElement(c.ed,Object.assign({},e,{className:u.inheritHeight}))))))}},8283(e,t,r){r.d(t,{A:()=>i});var n=r(67294),o=r(10923),l=r(47313);class i extends n.Component{static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){(0,o.H)(e,t)}render(){let{error:e}=this.state;return e?n.createElement(l.m,{error:e}):this.props.children}constructor(...e){super(...e),this.state={error:null}}}},99489(e,t,r){r.d(t,{Q:()=>n,u:()=>c});var n,o,l=r(75864),i=r(33879);(o=n||(n={})).ARTICLE="article",o.CATEGORY="category",o.DISCUSSION="discussion",o.EVENT="event",o.GROUPS="groups",o.KNOWLEDGE_BASE="knowledgeBase";let c=(0,l.yI)((e,t)=>{var r,n,o,c;let s=(0,l.Cg)("featuredCollections"),a=(0,i.Iq)().options,u=s("options",a,e),d=s("featuredImage",{display:null!==(o=null==e?void 0:null===(r=e.featuredImage)||void 0===r?void 0:r.display)&&void 0!==o&&o,fallbackImage:null!==(c=null==e?void 0:null===(n=e.featuredImage)||void 0===n?void 0:n.fallbackImage)&&void 0!==c?c:void 0});return{options:u,featuredImage:d}})},36207(e,t,r){r.d(t,{Z:()=>u,b:()=>d});var n=r(75741),o=r(99308),l=r(47178);function i(e,t,r,n,o,l,i){try{var c=e[l](i),s=c.value}catch(a){r(a);return}c.done?t(s):Promise.resolve(s).then(n,o)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var l=e.apply(t,r);function c(e){i(l,n,o,c,s,"next",e)}function s(e){i(l,n,o,c,s,"throw",e)}c(void 0)})}}let s="/collections",a=(0,o.Jy)("@@collections"),u=class e extends n.ZP{constructor(...t){super(...t),this.getCollectionsList=()=>{let{collections:t}=this.getState().collections;if(t.status===l.Px.LOADING||t.status===l.Px.SUCCESS)return;var r=this;let o=(0,n.KP)(e.getCollectionsListACs,c(function*(){let e=yield r.api.get(s);return e.data}))();return this.dispatch(o)},this.getCollectionsByResource=t=>{var r=this;let o=(0,n.KP)(e.getCollectionsByResourceACs,c(function*(){let e=yield r.api.get(`${s}/by-resource`,{params:t});return e.data}))(t);return this.dispatch(o)},this.putCollectionsByResource=t=>{var r=this;let o=(0,n.KP)(e.putCollectionsByResourceACs,c(function*(){let e=`${s}/by-resource`;yield r.api.put(e,{record:t.record,collectionIDs:[]});let n=yield r.api.put(e,t);return n.data}))(t);return this.dispatch(o)},this.postCollections=t=>{var r=this;let o=(0,n.KP)(e.postCollectionsACs,c(function*(){let e=yield r.api.post(s,t);return e.data}))(t);return this.dispatch(o)}}};function d(){return(0,n.LO)(u)}u.getCollectionsListACs=a.async("GET_COLLECTION_LIST"),u.getCollectionsByResourceACs=a.async("GET_COLLECTIONS_BY_RESOURCE"),u.putCollectionsByResourceACs=a.async("PUT_COLLECTIONS_BY_RESOURCE"),u.postCollectionsACs=a.async("POST_COLLECTIONS")},20745(e,t,r){r.r(t),r.d(t,{CollectionsFormLoadable:()=>V,default:()=>Y});var n=r(11590),o=r(47178),l=r(17903),i=r(28236),c=r(83386),s=r(75994),a=r(23410),u=r(67147);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){d(e,t,r[t])})}return e}function m(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let f=(0,i.yI)(()=>{let e=(0,s.OF)(),t=(0,n.iv)({name:"1bicps7-CollectionsForm-styles-formBody",styles:"min-height:300px;label:CollectionsForm-styles-formBody;"}),r=(0,n.iv)(m(p({},c.W.margin({top:16})),{display:"flex",alignItems:"center"}),";label:CollectionsForm-styles-newCollection;"),l=(0,n.iv)(m(p({width:20,minWidth:20,height:20},c.W.margin({left:8})),{borderRadius:10}),";label:CollectionsForm-styles-deleteNewCollectionButton;"),i=(0,n.iv)({name:"16063wc-CollectionsForm-styles-newCollectionsInputWrapper",styles:";label:CollectionsForm-styles-newCollectionsInputWrapper;"}),d=(0,n.iv)(m(p({},c.W.font(p({},e.fontSizeAndWeightVars("small")))),{padding:(0,u.y7)().padding,paddingTop:(0,u.y7)().paddingTop,paddingBottom:(0,u.y7)().paddingBottom,paddingLeft:(0,u.y7)().paddingLeft,paddingRight:(0,u.y7)().paddingRight,textTransform:"capitalize",[`&.${o.Px.SUCCESS}`]:{color:a.w.colorOut(e.messageColors.confirm)},[`&.${o.Px.ERROR}`]:{color:a.w.colorOut(e.messageColors.error.fg)}}),";label:CollectionsForm-styles-newCollectionStatus;"),f=(0,n.iv)(p({display:"flex",justifyContent:"flex-start"},c.W.padding({vertical:8})),";label:CollectionsForm-styles-addNewWrapper;"),y=(0,n.iv)({fontWeight:e.fonts.weights.normal,display:"flex",alignItems:"center",lineHeight:1,"& svg":m(p({},c.W.margin({right:4})),{width:"1.25em"})},";label:CollectionsForm-styles-addNewButton;");return{formBody:t,newCollection:r,deleteNewCollectionButton:l,newCollectionsInputWrapper:i,newCollectionStatus:d,addNewWrapper:f,addNewButton:y}});var y=r(67294),g=r(46458),b=r(36207),O=r(10923),h=r(5641);function v(e,t,r,n,o,l,i){try{var c=e[l](i),s=c.value}catch(a){r(a);return}c.done?t(s):Promise.resolve(s).then(n,o)}function C(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var l=e.apply(t,r);function i(e){v(l,n,o,i,c,"next",e)}function c(e){v(l,n,o,i,c,"throw",e)}i(void 0)})}}var E=r(33691),P=r(30731),S=r(33188),w=r(81478),j=r(21422),I=r(73819),R=r(75211),N=r(64166),x=r(78290),B=r(32201),D=r(77225),T=r(86665),Z=r(14698),A=r(10914),L=r(57298),k=r(77423),W=r(39607),H=r(41054),F=r(89734),U=r.n(F),G=r(44908),_=r.n(G);function M(e,t,r,n,o,l,i){try{var c=e[l](i),s=c.value}catch(a){r(a);return}c.done?t(s):Promise.resolve(s).then(n,o)}function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){K(e,t,r[t])})}return e}function $(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}let q=({collectionID:e,name:t})=>({label:t,value:e});function V(e){var t,r;let{onSuccess:i,onCancel:c,recordID:s,recordType:a}=e,[u,d]=(0,y.useState)([]),p=(0,B.V)(),m=(0,T.B)(),v=f(),F=function(e=!0){let t=(0,b.b)();(0,y.useEffect)(()=>{e&&t.getCollectionsList()},[e]);let r=(0,g.v9)(e=>{var t;return null!==(t=e.collections.collections.status)&&void 0!==t?t:o.Px.PENDING}),n=(0,g.v9)(e=>r===o.Px.SUCCESS?e.collections.collections.data.filter(O.Dw):[]);return{status:r,data:n}}(),G={recordID:s,recordType:a},K=function(e){let t=(0,b.b)(),r=(0,h.j)(e),n=(0,g.v9)(e=>{var t;return null!==(t=e.collections.collectionsByResourceHash[r])&&void 0!==t?t:{status:o.Px.PENDING}});return(0,y.useEffect)(()=>{n.status===o.Px.PENDING&&t.getCollectionsByResource(e)},[e,n,t]),n}(G),V=function(e){var t;let r=(0,h.j)(e),n=(0,g.v9)(e=>null!==(t=e.collections.collectionsStatusByResourceHash[r])&&void 0!==t?t:{});return n}(G),Y=function(e){let t=(0,b.b)();function r(){return(r=C(function*(r){try{yield t.putCollectionsByResource({collectionIDs:r,record:e})}catch(n){throw Error(n.description)}})).apply(this,arguments)}return function(e){return r.apply(this,arguments)}}(G),J=function(e){let t=(0,b.b)();function r(){return(r=C(function*(r=[]){try{for(let n of r){if(0===n.length)return;let o={name:n,records:[e]};yield t.postCollections(o)}}catch(l){throw Error(l.description)}})).apply(this,arguments)}return function(){return r.apply(this,arguments)}}(G),{addToast:Q}=(0,E.pm)();(0,y.useEffect)(()=>{var e,t;if(F.status===o.Px.SUCCESS&&u.length!==(null===(e=F.data)||void 0===e?void 0:e.length)){let r=U()((null!==(t=F.data)&&void 0!==t?t:[]).map(q),({label:e})=>e.toLowerCase());d(r)}},[F]),(0,y.useEffect)(()=>{K.status===o.Px.SUCCESS&&K.data&&K.data.length>0?eo($(z({},ee),{collections:U()(K.data.map(q),({label:e})=>e.toLowerCase())})):eo($(z({},ee),{collections:[]}))},[K]);let X=(0,H.TA)({initialValues:{collections:[],newCollections:[]},onSubmit:(r=(t=function*(e,t){var r;let n=K.data?null===(r=K.data)||void 0===r?void 0:r.map(({collectionID:e})=>e):[],o=e.collections.map(({value:e})=>e),c=e.newCollections.filter(e=>ep(e)&&e.length>0),s=n.filter(e=>0>o.indexOf(e)),a=o.filter(e=>(null==n?void 0:n.indexOf(e))<0);try{yield Y(o),c.length>0&&(yield J(c));let u=a.length+c.length,d=s.length;Q({autoDismiss:!0,body:y.createElement(y.Fragment,null,(0,L.t)("Success!"),u>0&&y.createElement(y.Fragment,null," ",y.createElement(l.Z,{source:u>1?"Added to <0/> collections":"Added to 1 collection.",c0:u})),d>0&&y.createElement(y.Fragment,null," ",y.createElement(l.Z,{source:d>1?"Removed from <0/> collections.":"Removed from 1 collection.",c0:d})))})}catch(p){Q({autoDismiss:!1,dismissible:!0,body:y.createElement(y.Fragment,null,p.message)})}finally{i(),t.resetForm()}},function(){var e=this,r=arguments;return new Promise(function(n,o){var l=t.apply(e,r);function i(e){M(l,n,o,i,c,"next",e)}function c(e){M(l,n,o,i,c,"throw",e)}i(void 0)})}),function(e,t){return r.apply(this,arguments)})}),{values:ee,setFieldValue:et,handleSubmit:er,isSubmitting:en,setValues:eo}=X,el=(0,y.useMemo)(()=>{let e=[...u.map(({label:e})=>e),...ee.newCollections].filter(e=>""!==e).map(e=>e.toLowerCase());return _()(e).length!==e.length},[ee.newCollections,u]),ei=()=>{let{newCollections:e}=ee;et("newCollections",[...e,""])},ec=(0,y.useRef)(null),es=X.values.newCollections.length,ea=(0,W.xy)(es);(0,y.useEffect)(()=>{if(es>(null!=ea?ea:es)){var e;null===(e=ec.current)||void 0===e||e.focus()}},[es,ea]);let eu=e=>{let t=ee.newCollections.filter((t,r)=>r!==e);et("newCollections",t)},ed=e=>{let{currentTarget:{id:t,value:r}}=e,{newCollections:n}=ee,[o]=t.split("-"),l=[...n];l[o]=r,et("newCollections",l)},ep=e=>{if(en||""===e)return!0;let{newCollections:t}=ee,r=[...u.map(({label:e})=>e),...t];return r.filter(t=>t.toLowerCase()===e.toLowerCase()).length<=1};return y.createElement("form",{onSubmit:er},y.createElement(N.Z,{header:y.createElement(Z.Z,{closeFrame:c,title:(0,L.t)("Add to Collections")}),body:y.createElement(x.Z,null,y.createElement("div",{className:(0,n.cx)(p.contents,v.formBody)},y.createElement(I.n,{label:(0,L.t)("Select Existing Collections"),options:u,value:ee.collections,maxHeight:130,showIndicator:!0,onChange:e=>et("collections",e),hideSelectedOptions:!1}),ee.newCollections.length>0&&y.createElement(j.Z,{label:(0,L.t)("Create New Collection")},ee.newCollections.map((e,t)=>{var r;return y.createElement("div",{key:t},y.createElement("div",{className:v.newCollection},y.createElement(R.oi,{inputRef:t===es-1?ec:void 0,id:`${t}-newCollection`,"aria-label":(0,L.t)(`New Collection ${t+1}`),className:(0,n.cx)(!ep(e)&&"hasError"),value:e,onChange:ed,disabled:en}),y.createElement(P.Z,{buttonType:S.q.ICON,className:v.deleteNewCollectionButton,onClick:()=>eu(t)},y.createElement(k.JO,{icon:"analytics-remove"}))),(null===(r=V[e])||void 0===r?void 0:r.status)&&y.createElement("p",{className:(0,n.cx)(v.newCollectionStatus,V[e].status)},(0,L.t)(V[e].status)),!ep(e)&&y.createElement(w.Z,{padded:!0,errors:[{message:(0,L.t)(`A collection named "${e}" already exists.`)}]}))})),y.createElement("div",{className:v.addNewWrapper},y.createElement(P.Z,{className:v.addNewButton,buttonType:S.q.TEXT,onClick:ei},y.createElement(k.JO,{icon:"analytics-add"})," ",(0,L.t)("Add New Collection"))))),footer:y.createElement(D.Z,{justifyRight:!0},y.createElement(P.Z,{buttonType:S.q.TEXT,onClick:c,className:m.actionButton},(0,L.t)("Cancel")),y.createElement(P.Z,{submit:!0,disabled:en||el,buttonType:S.q.TEXT_PRIMARY,className:m.actionButton},en?y.createElement(A.Z,null):(0,L.t)("Submit")))}))}let Y=V},30556(e,t,r){r.d(t,{Y:()=>p});var n=r(67294),o=r(89472),l=r(57298),i=r(62425),c=r(21965),s=r(39607),a=r(86830),u=r(37703);let d=(0,s.rq)({loadFunction:()=>Promise.all([r.e(1216),r.e(8780),r.e(9331),r.e(2102),r.e(5163),r.e(8728),r.e(4789),r.e(1479),r.e(5852),r.e(6721),r.e(6811),r.e(176),r.e(7103),r.e(3981),r.e(858),r.e(6936),r.e(1643),r.e(1991),r.e(6492),r.e(9044),r.e(9938),r.e(378),r.e(4403),r.e(3269),r.e(2487),r.e(7928),r.e(8317),r.e(8614),r.e(1385),r.e(5307),r.e(4466),r.e(7790),r.e(3623)]).then(r.bind(r,20745)),fallback:()=>n.createElement(u.Z,{size:100,loaderStyleClass:(0,a.D)().mediumLoader})});function p(e){let[t,r]=(0,n.useState)(e.initialVisibility||!1),a=()=>r(!0),u=()=>r(!1);return n.createElement(n.Fragment,null,!e.modalOnly&&n.createElement(o.Z,{onClick:a},(0,l.t)("Add to Collection")),n.createElement(s.Yh,null,n.createElement(i.Z,{isVisible:t,size:c.Z.MEDIUM,exitHandler:u},n.createElement(d,Object.assign({},e,{onSuccess:u,onCancel:u})))))}},5641(e,t,r){r.d(t,{j:()=>o});var n=r(10923);function o(e){let{recordID:t,recordType:r}=e;return(0,n.Q6)([r,t])}},51960(e,t,r){r.d(t,{x:()=>a});var n=r(47178),o=r(87219),l=r(76983),i=r(36207),c=r(5641);let s={collections:{status:n.Px.PENDING},collectionsByResourceHash:{},collectionsStatusByResourceHash:{},putCollectionsByResourceHash:{}},a=(0,o.ZP)((0,l.reducerWithInitialState)(s).case(i.Z.getCollectionsListACs.started,e=>(e.collections={status:n.Px.LOADING},e)).case(i.Z.getCollectionsListACs.done,(e,t)=>{var r;return e.collections={status:n.Px.SUCCESS,data:null!==(r=t.result)&&void 0!==r?r:[]},e}).case(i.Z.getCollectionsListACs.failed,(e,t)=>(e.collections={status:n.Px.ERROR,error:t.error},e)).case(i.Z.getCollectionsByResourceACs.started,(e,t)=>{let{recordID:r,recordType:o}=t,l=(0,c.j)({recordID:r,recordType:o});return e.collectionsByResourceHash[l]={status:n.Px.LOADING},e}).case(i.Z.getCollectionsByResourceACs.done,(e,t)=>{let{recordID:r,recordType:o}=t.params,l=(0,c.j)({recordID:r,recordType:o});return e.collectionsByResourceHash[l]={status:n.Px.SUCCESS,data:t.result},e}).case(i.Z.getCollectionsByResourceACs.failed,(e,t)=>{let{recordID:r,recordType:o}=t.params,l=(0,c.j)({recordID:r,recordType:o});return e.collectionsByResourceHash[l]={status:n.Px.ERROR,error:t.error},e}).case(i.Z.putCollectionsByResourceACs.started,(e,t)=>{let{record:r}=t,o=(0,c.j)(r);return e.putCollectionsByResourceHash[o]={status:n.Px.LOADING},e}).case(i.Z.putCollectionsByResourceACs.done,(e,t)=>{let{record:r}=t.params,o=(0,c.j)(r);return e.putCollectionsByResourceHash[o]={status:n.Px.SUCCESS,data:t.result},e.collectionsByResourceHash[o]||(e.collectionsByResourceHash[o]={status:n.Px.SUCCESS,data:[]}),e.collectionsByResourceHash[o].data=t.result,e}).case(i.Z.putCollectionsByResourceACs.failed,(e,t)=>{let{record:r}=t.params,o=(0,c.j)(r);return e.putCollectionsByResourceHash[o]={status:n.Px.ERROR,error:t.error},e}).case(i.Z.postCollectionsACs.started,(e,t)=>{let{name:r,records:o}=t,l=(0,c.j)(o[0]);return e.collectionsStatusByResourceHash[l]||(e.collectionsStatusByResourceHash[l]={}),e.collectionsStatusByResourceHash[l][r]={status:n.Px.LOADING},e}).case(i.Z.postCollectionsACs.done,(e,t)=>{var r,o;let{name:l,records:i}=t.params,s=(0,c.j)(i[0]);return e.collectionsStatusByResourceHash[s][l]={status:n.Px.SUCCESS,data:t.result.collectionID},e.collectionsByResourceHash[s]||(e.collectionsByResourceHash[s]={status:n.Px.SUCCESS,data:[]}),null===(r=e.collectionsByResourceHash[s].data)||void 0===r||r.push(t.result),e.collections.status===n.Px.PENDING&&(e.collections={status:n.Px.SUCCESS,data:[]}),null===(o=e.collections.data)||void 0===o||o.push(t.result),e}).case(i.Z.postCollectionsACs.failed,(e,t)=>{let{name:r,records:o}=t.params,l=(0,c.j)(o[0]);return e.collectionsStatusByResourceHash[l][r]={status:n.Px.ERROR,error:t.error},e}))}}]);